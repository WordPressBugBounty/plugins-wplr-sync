/*! For license information please see index.js.LICENSE.txt */
(()=>{"use strict";var e,t={79:(e,t,n)=>{var r,a,o,l,i,c=n(1746),u=n(9570),s=n(3391),d=n(6089),f=n(1368),p=n(3648),m=n(1774),y=n(2223),h=n(4114),g=n(9176),v=n(5952),b=n(1168),E=n(2685),w=n(2925),R=n(4810),k=n(3531),S=pEngine.prefix,O=(pEngine.domain,pEngine.rest_url.replace(/\/+$/,"")),I=pEngine.api_url.replace(/\/+$/,""),P=pEngine.plugin_url.replace(/\/+$/,""),A="1"===pEngine.is_pro,x=(A&&pEngine.is_registered,pEngine.rest_nonce),T=n(1794),j=n(5643);function C(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var D=j.Ay.div(r||(r=C(["\n  color: white;\n  padding: 15px;\n  margin-bottom: -15px;\n\n  a {\n    color: #7dedff;\n    text-decoration: none;\n  }\n\n  p {\n    font-size: 15px;\n  }\n"]))),N=(0,j.Ay)(R.z)(a||(a=C(["\n\n  .neko-block-title {\n    display: none;\n  }\n\n  .plugin-desc {\n    display: flex;\n    flex-direction: column;\n    margin-left: 15px;\n  }\n\n  .neko-block-content {\n    display: flex;\n    padding: 15px;\n\n    h2 {\n      font-size: 18px;\n      margin: 0;\n\n      a {\n        text-decoration: none;\n      }\n    }\n\n    p {\n      margin: 0px;\n      margin-top: 10px;\n      font-size: 13px;\n      line-height: 1.5;\n    }\n\n    .plugin-actual-desc {\n      font-size: 13px;\n      font-weight: 500;\n    }\n  }\n"]))),F=j.Ay.img(o||(o=C(["\n  height: 125px;\n  width: auto;\n  border-radius: 10px;\n  background: lightgray;\n"]))),M=j.Ay.div(l||(l=C(["\n\n  margin: 15px;\n\n  .center {\n    background: white;\n    color: black;\n    border-radius: 10px;\n    padding: 10px;\n    max-width: 100%\n    overflow: none;\n\n    h2 {\n      font-size: 26px;\n    }\n\n    table {\n      width: 100%;\n\n      tr td:first-child {\n        width: 220px;\n        font-weight: bold;\n        color: #1e7cba;\n      }\n\n      * {\n        overflow-wrap: anywhere;\n      }\n    }\n  }\n\n  hr {\n    border-color: #1e7cba;\n  }\n"]))),L=j.Ay.ul(i||(i=C(["\n  margin-top: 10px;\n  background: rgb(0, 72, 88);\n  padding: 10px;\n  color: rgb(58, 212, 58);\n  max-height: 600px;\n  min-height: 200px;\n  display: block;\n  font-family: monospace;\n  font-size: 12px;\n  white-space: pre;\n  overflow-x: auto;\n  width: calc(100vw - 276px);\n  color: white;\n\n  .log-date {\n    color: var(--neko-yellow);\n    margin-left: 8px;\n  }\n\n  .log-type {\n    background: #0000004d;\n    padding: 2px 5px;\n    border-radius: 8px;\n    text-transform: uppercase;\n  }\n\n  .log-content {\n    display: block;\n  }\n\n  .log-warning .log-type {\n    background: var(--neko-yellow);\n    color: white;\n  }\n\n  .log-fatal .log-type {\n    background: var(--neko-red);\n    color: white;\n  }\n"])));function G(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",a=n.toStringTag||"@@toStringTag";function o(n,r,a,o){var c=r&&r.prototype instanceof i?r:i,u=Object.create(c.prototype);return U(u,"_invoke",function(n,r,a){var o,i,c,u=0,s=a||[],d=!1,f={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,n){return o=t,i=0,c=e,f.n=n,l}};function p(n,r){for(i=n,c=r,t=0;!d&&u&&!a&&t<s.length;t++){var a,o=s[t],p=f.p,m=o[2];n>3?(a=m===r)&&(c=o[(i=o[4])?5:(i=3,3)],o[4]=o[5]=e):o[0]<=p&&((a=n<2&&p<o[1])?(i=0,f.v=r,f.n=o[1]):p<m&&(a=n<3||o[0]>r||r>m)&&(o[4]=n,o[5]=r,f.n=m,i=0))}if(a||n>1)return l;throw d=!0,r}return function(a,s,m){if(u>1)throw TypeError("Generator is already running");for(d&&1===s&&p(s,m),i=s,c=m;(t=i<2?e:c)||!d;){o||(i?i<3?(i>1&&(f.n=-1),p(i,c)):f.n=c:f.v=c);try{if(u=2,o){if(i||(a="next"),t=o[a]){if(!(t=t.call(o,c)))throw TypeError("iterator result is not an object");if(!t.done)return t;c=t.value,i<2&&(i=0)}else 1===i&&(t=o.return)&&t.call(o),i<2&&(c=TypeError("The iterator does not provide a '"+a+"' method"),i=1);o=e}else if((t=(d=f.n<0)?c:n.call(r,f))!==l)break}catch(t){o=e,i=1,c=t}finally{u=1}}return{value:t,done:d}}}(n,a,o),!0),u}var l={};function i(){}function c(){}function u(){}t=Object.getPrototypeOf;var s=[][r]?t(t([][r]())):(U(t={},r,function(){return this}),t),d=u.prototype=i.prototype=Object.create(s);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,U(e,a,"GeneratorFunction")),e.prototype=Object.create(d),e}return c.prototype=u,U(d,"constructor",u),U(u,"constructor",c),c.displayName="GeneratorFunction",U(u,a,"GeneratorFunction"),U(d),U(d,a,"Generator"),U(d,r,function(){return this}),U(d,"toString",function(){return"[object Generator]"}),(G=function(){return{w:o,m:f}})()}function U(e,t,n,r){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}U=function(e,t,n,r){function o(t,n){U(e,t,function(e){return this._invoke(t,n,e)})}t?a?a(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(o("next",0),o("throw",1),o("return",2))},U(e,t,n,r)}function z(e,t,n,r,a,o,l){try{var i=e[o](l),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,a)}function B(e){return function(){var t=this,n=arguments;return new Promise(function(r,a){var o=e.apply(t,n);function l(e){z(o,r,a,l,i,"next",e)}function i(e){z(o,r,a,l,i,"throw",e)}l(void 0)})}}function W(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o,l,i=[],c=!0,u=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=o.call(n)).done)&&(i.push(r.value),i.length!==t);c=!0);}catch(e){u=!0,a=e}finally{try{if(!c&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(u)throw a}}return i}}(e,t)||q(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function q(e,t){if(e){if("string"==typeof e)return H(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?H(e,t):void 0}}function H(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var Y=wp.element,V=Y.useState,K=Y.useEffect,X="".concat(O,"/meow-common/v1"),Q=function(e){var t=e.request,n=e.title,r=e.max,a=W(V(!1),2),o=a[0],l=a[1],i=W(V([]),2),c=i[0],u=i[1],s=c.length>0?c.reduce(function(e,t){return e+t}):0,d=c.length>0?Math.ceil(s/c.length):0,f=!c.length&&o;return K(function(){o&&setTimeout(B(G().m(function e(){var n,r,a;return G().w(function(e){for(;;)switch(e.n){case 0:return n=(new Date).getTime(),e.n=1,(0,k.IU)("".concat(X,"/").concat(t),{method:"POST",nonce:x});case 1:r=(new Date).getTime(),a=r-n,u(function(e){return[].concat(function(e){if(Array.isArray(e))return H(e)}(t=e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||q(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),[a]);var t});case 2:return e.a(2)}},e)})),1e3)},[c]),React.createElement(D,{style:{width:200,textAlign:"center"}},React.createElement(p.s,{h2:!0,style:{color:"white"}},n),React.createElement(T.X,{size:200,value:f?r:d,max:r},React.createElement("span",{style:{fontSize:20}},f?"START":d+" ms"),React.createElement("span",{style:{fontSize:12}},f?"YOUR ENGINE":c.length+" requests")),React.createElement(w.M,{style:{width:"100%",marginTop:10},color:o?"#cc3627":"#ccb027",onClick:function(){o||u([]),l(!o)}},o?"Stop":"Start"))};function $(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o,l,i=[],c=!0,u=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=o.call(n)).done)&&(i.push(r.value),i.length!==t);c=!0);}catch(e){u=!0,a=e}finally{try{if(!c&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(u)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return J(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?J(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function J(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function Z(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",a=n.toStringTag||"@@toStringTag";function o(n,r,a,o){var c=r&&r.prototype instanceof i?r:i,u=Object.create(c.prototype);return ee(u,"_invoke",function(n,r,a){var o,i,c,u=0,s=a||[],d=!1,f={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,n){return o=t,i=0,c=e,f.n=n,l}};function p(n,r){for(i=n,c=r,t=0;!d&&u&&!a&&t<s.length;t++){var a,o=s[t],p=f.p,m=o[2];n>3?(a=m===r)&&(c=o[(i=o[4])?5:(i=3,3)],o[4]=o[5]=e):o[0]<=p&&((a=n<2&&p<o[1])?(i=0,f.v=r,f.n=o[1]):p<m&&(a=n<3||o[0]>r||r>m)&&(o[4]=n,o[5]=r,f.n=m,i=0))}if(a||n>1)return l;throw d=!0,r}return function(a,s,m){if(u>1)throw TypeError("Generator is already running");for(d&&1===s&&p(s,m),i=s,c=m;(t=i<2?e:c)||!d;){o||(i?i<3?(i>1&&(f.n=-1),p(i,c)):f.n=c:f.v=c);try{if(u=2,o){if(i||(a="next"),t=o[a]){if(!(t=t.call(o,c)))throw TypeError("iterator result is not an object");if(!t.done)return t;c=t.value,i<2&&(i=0)}else 1===i&&(t=o.return)&&t.call(o),i<2&&(c=TypeError("The iterator does not provide a '"+a+"' method"),i=1);o=e}else if((t=(d=f.n<0)?c:n.call(r,f))!==l)break}catch(t){o=e,i=1,c=t}finally{u=1}}return{value:t,done:d}}}(n,a,o),!0),u}var l={};function i(){}function c(){}function u(){}t=Object.getPrototypeOf;var s=[][r]?t(t([][r]())):(ee(t={},r,function(){return this}),t),d=u.prototype=i.prototype=Object.create(s);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,ee(e,a,"GeneratorFunction")),e.prototype=Object.create(d),e}return c.prototype=u,ee(d,"constructor",u),ee(u,"constructor",c),c.displayName="GeneratorFunction",ee(u,a,"GeneratorFunction"),ee(d),ee(d,a,"Generator"),ee(d,r,function(){return this}),ee(d,"toString",function(){return"[object Generator]"}),(Z=function(){return{w:o,m:f}})()}function ee(e,t,n,r){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}ee=function(e,t,n,r){function o(t,n){ee(e,t,function(e){return this._invoke(t,n,e)})}t?a?a(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(o("next",0),o("throw",1),o("return",2))},ee(e,t,n,r)}function te(e,t,n,r,a,o,l){try{var i=e[o](l),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,a)}function ne(e){return function(){var t=this,n=arguments;return new Promise(function(r,a){var o=e.apply(t,n);function l(e){te(o,r,a,l,i,"next",e)}function i(e){te(o,r,a,l,i,"throw",e)}l(void 0)})}}var re=wp.element,ae=re.useState,oe=re.useEffect;I&&O&&P||console.error("[@common/dashboard] apiUrl, restUrl and pluginUrl are mandatory.");var le="".concat(O,"/meow-common/v1"),ie=React.createElement(D,null,React.createElement(p.s,{p:!0,style:{lineHeight:"1.5",margin:"0 0 15px 0"}},"Hi! â˜€ï¸ Meow Apps isn't your typical plugin suiteâ€”it's a passion project led by me, ",React.createElement("a",{target:"_blank",rel:"noreferrer",href:"https://jordymeow.com"},"Jordy Meow"),", and a stellar team! ðŸ’• Based in ",React.createElement("a",{target:"_blank",rel:"noreferrer",href:"https://offbeatjapan.org"},"Japan"),", we're all about making your WordPress experience smoother and speedier. Our plugins are all about boosting your site's performance and user-friendliness. Ready to level up your WordPress game? Check out ",React.createElement("a",{href:"http://meowapps.com",rel:"noreferrer",target:"_blank"},"Meow Apps")," and let's make magic happen! ðŸŒ´ðŸ™€")),ce=React.createElement(D,null,React.createElement(p.s,{p:!0},"The ",React.createElement("b",null,"Empty Request Time")," measures your installation's basic performance by showing the average time needed to process an empty request on your server. To see how disabling plugins affects the results, turn some off and run the test again. Aim for a time under 2,000 ms, but ideally, keep it below 500 ms. The ",React.createElement("b",null,"File Operation Time")," creates a temporary 10MB file each time it runs. ",React.createElement("b",null,"The SQL Request Time")," calculates the total number of posts. This process should be quick and have a similar duration to the Empty Request Time.")),ue=React.createElement(D,null,React.createElement(p.s,{p:!0},"Maintain a streamlined WordPress setup by using essential plugins and a dependable hosting provider. Refrain from self-hosting unless you're an expert. Go further by reading our tutorials:",React.createElement("ul",null,React.createElement("li",null,"â­ï¸ ",React.createElement("a",{href:"https://meowapps.com/tutorial-improve-seo-wordpress/",rel:"noreferrer",target:"_blank"},"SEO Checklist & Optimization")),React.createElement("li",null,"â­ï¸ ",React.createElement("a",{href:"https://meowapps.com/tutorial-faster-wordpress-optimize/",rel:"noreferrer",target:"_blank"},"Optimize your WordPress Speed")),React.createElement("li",null,"â­ï¸ ",React.createElement("a",{href:"https://meowapps.com/tutorial-optimize-images-wordpress/",rel:"noreferrer",target:"_blank"},"Optimize Images (CDN, and so on)")),React.createElement("li",null,"â­ï¸ ",React.createElement("a",{href:"https://meowapps.com/tutorial-hosting-service-wordpress/",rel:"noreferrer",target:"_blank"},"The Best Hosting Services for WordPress"))))),se=function(){var e=ne(Z().m(function e(){var t;return Z().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,(0,k.IU)("".concat(le,"/all_settings/"),{method:"POST",nonce:x});case 1:return t=e.v,e.a(2,t.data)}},e)}));return function(){return e.apply(this,arguments)}}(),de=function(){var e=ne(Z().m(function e(t){var n,r,a;return Z().w(function(e){for(;;)switch(e.n){case 0:return n=t.value,r=t.id,e.n=1,(0,k.IU)("".concat(le,"/update_option"),{method:"POST",nonce:x,json:{name:r,value:n}});case 1:return a=e.v,e.a(2,a)}},e)}));return function(t){return e.apply(this,arguments)}}(),fe=function(){var e=ne(Z().m(function e(){var t;return Z().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,(0,k.IU)("".concat(le,"/error_logs"),{method:"POST",nonce:x});case 1:return t=e.v,e.a(2,t.data.reverse())}},e)}));return function(){return e.apply(this,arguments)}}(),pe=function(){var e=(0,u.jE)(),t=$(ae(!1),2),n=t[0],r=t[1],a=$(ae(""),2),o=a[0],l=a[1],i=(0,d.I)({queryKey:["all_settings"],queryFn:se}),c=i.data,s=i.error,_=(0,f.n)({mutationFn:de,onSuccess:function(){e.invalidateQueries(["all_settings"])}}),k=(0,f.n)({mutationFn:fe}),S=null==c?void 0:c.meowapps_hide_meowapps,O=null==c?void 0:c.force_sslverify;oe(function(){s&&!n&&(r(!0),console.error("Error from useQuery",s.message))},[s]),oe(function(){var e=document.getElementById("meow-common-phpinfo");e&&l(e.innerHTML)},[]);var I=function(e,t){_.mutate({value:e,id:t})},P=React.createElement(m.d,{title:"Main Menu"},React.createElement(y.E,{max:"1"},React.createElement(h.R,{name:"meowapps_hide_meowapps",label:"Hide (Not Recommended)",description:React.createElement(p.s,{p:!0},"This will hide the Meow Apps Menu (on the left side) and everything it contains. You can re-enable it through though an option that will be added in Settings â†’ General."),value:"1",disabled:_.isPending,checked:S,onChange:I}))),A=React.createElement(m.d,{title:"SSL Verify"},React.createElement(y.E,{max:"1"},React.createElement(h.R,{name:"force_sslverify",label:"Force (Not Recommended)",description:React.createElement(p.s,{p:!0},"This will enforce the usage of SSL when checking the license or updating the plugin."),value:"1",disabled:_.isPending,checked:O,onChange:I})));return React.createElement(g.z,{showRestError:n},React.createElement(v.n,{title:"The Dashboard"}),React.createElement(b.N,null,React.createElement(b.Y,{full:!0},React.createElement(E._,{keepTabOnReload:!0},React.createElement(E.V,{title:"Meow Apps"},ie,React.createElement(b.N,null,React.createElement(b.Y,{minimal:!0},React.createElement(N,{title:"AI Engine",className:"primary"},React.createElement(F,{src:"https://ps.w.org/ai-engine/assets/icon-256x256.png"}),React.createElement("div",{className:"plugin-desc"},React.createElement("h2",null,React.createElement("a",{target:"_blank",href:"https://wordpress.org/plugins/ai-engine/",rel:"noreferrer"},"AI Engine")),React.createElement("p",{className:"plugin-actual-desc"},"This is the ultimate AI plugin for WordPress. From a chatbot adapted to your needs to an AI that can write your content for you, API, REST, and more."),React.createElement("p",null,React.createElement("div",null,"Free Version: ",React.createElement("a",{target:"_blank",href:"https://wordpress.org/plugins/ai-engine/",rel:"noreferrer"},"WordPress.org")),React.createElement("div",null,"Pro Version: ",React.createElement("a",{target:"_blank",href:"https://meowapps.com/ai-engine/",rel:"noreferrer"},"Meow Apps"))))),React.createElement(N,{title:"Media Cleaner",className:"primary"},React.createElement(F,{src:"https://ps.w.org/media-cleaner/assets/icon-256x256.png"}),React.createElement("div",{className:"plugin-desc"},React.createElement("h2",null,React.createElement("a",{target:"_blank",href:"https://wordpress.org/plugins/media-cleaner/",rel:"noreferrer"},"Media Cleaner")),React.createElement("p",{className:"plugin-actual-desc"},"Is your Media Library bloated, your database heavy, and your website running slow? Media Cleaner will clean your Media Library from the media entries (and files) which aren't used in your website, as well as broken entries."),React.createElement("p",null,React.createElement("div",null,"Free Version: ",React.createElement("a",{target:"_blank",href:"https://wordpress.org/plugins/media-cleaner/",rel:"noreferrer"},"WordPress.org")),React.createElement("div",null,"Pro Version: ",React.createElement("a",{target:"_blank",href:"https://meowapps.com/media-cleaner/",rel:"noreferrer"},"Meow Apps"))))),React.createElement(N,{title:"Database Cleaner",className:"primary"},React.createElement(F,{src:"https://ps.w.org/database-cleaner/assets/icon-256x256.png"}),React.createElement("div",{className:"plugin-desc"},React.createElement("h2",null,React.createElement("a",{target:"_blank",href:"https://wordpress.org/plugins/database-cleaner/",rel:"noreferrer"},"Database Cleaner")),React.createElement("p",{className:"plugin-actual-desc"},"Not only does Database Cleaner have a user-friendly UI, but it's also equipped to handle large DBs, giving it an edge over other plugins. It's a must-have for any WordPress site."),React.createElement("p",null,React.createElement("div",null,"Free Version: ",React.createElement("a",{target:"_blank",href:"https://wordpress.org/plugins/database-cleaner/",rel:"noreferrer"},"WordPress.org")),React.createElement("div",null,"Pro Version: ",React.createElement("a",{target:"_blank",href:"https://meowapps.com/database-cleaner/",rel:"noreferrer"},"Meow Apps"))))),React.createElement(N,{title:"Media File Renamer",className:"primary"},React.createElement(F,{src:"https://ps.w.org/media-file-renamer/assets/icon-256x256.png"}),React.createElement("div",{className:"plugin-desc"},React.createElement("h2",null,React.createElement("a",{target:"_blank",href:"https://wordpress.org/plugins/media-file-renamer/",rel:"noreferrer"},"Media File Renamer")),React.createElement("p",{className:"plugin-actual-desc"},"Rename and move files directly from the dashboard, manually, automatically or via AI, either individually or in bulk. It's the best way to rename your files."),React.createElement("p",null,React.createElement("div",null,"Free Version: ",React.createElement("a",{target:"_blank",href:"https://wordpress.org/plugins/media-file-renamer/",rel:"noreferrer"},"WordPress.org")),React.createElement("div",null,"Pro Version: ",React.createElement("a",{target:"_blank",href:"https://meowapps.com/media-file-renamer/",rel:"noreferrer"},"Meow Apps"))))),React.createElement(N,{title:"Social Engine",className:"primary"},React.createElement(F,{src:"https://ps.w.org/social-engine/assets/icon-256x256.png"}),React.createElement("div",{className:"plugin-desc"},React.createElement("h2",null,React.createElement("a",{target:"_blank",href:"https://wordpress.org/plugins/social-engine/",rel:"noreferrer"},"Social Engine")),React.createElement("p",{className:"plugin-actual-desc"},'Effortlessly schedule and automate the perfect posts for all your networks. Unlimited capabilities and infinite className="plugin-actual-desc" extensibility, for free!'),React.createElement("p",null,React.createElement("div",null,"Free Version: ",React.createElement("a",{target:"_blank",href:"https://wordpress.org/plugins/social-engine/",rel:"noreferrer"},"WordPress.org")),React.createElement("div",null,"Pro Version: ",React.createElement("a",{target:"_blank",href:"https://meowapps.com/social-engine/",rel:"noreferrer"},"Meow Apps"))))),React.createElement(N,{title:"Meow Analytics",className:"primary"},React.createElement(F,{src:"https://ps.w.org/meow-analytics/assets/icon-256x256.png"}),React.createElement("div",{className:"plugin-desc"},React.createElement("h2",null,React.createElement("a",{rel:"noreferrer",target:"_blank",href:"https://wordpress.org/plugins/meow-analytics/"},"Meow Analytics")),React.createElement("p",{className:"plugin-actual-desc"},"Google Analytics for your website. Simple and fast."),React.createElement("p",null,React.createElement("div",null,"Free Version: ",React.createElement("a",{rel:"noreferrer",target:"_blank",href:"https://wordpress.org/plugins/meow-analytics/"},"WordPress.org")),React.createElement("div",null,"Pro Version: ",React.createElement("a",{rel:"noreferrer",target:"_blank",href:"https://meowapps.com/meow-analytics/"},"Meow Apps")))))),React.createElement(b.Y,{minimal:!0},React.createElement(N,{title:"Contact Form Block",className:"primary"},React.createElement(F,{src:"https://ps.w.org/seo-engine/assets/icon-256x256.png"}),React.createElement("div",{className:"plugin-desc"},React.createElement("h2",null,React.createElement("a",{target:"_blank",href:"https://wordpress.org/plugins/seo-engine/",rel:"noreferrer"},"SEO Engine")),React.createElement("p",{className:"plugin-actual-desc"},"Optimize your content for SEO and for the AI world, with AI assistants... while keeping everything simple and fast, as it should be! âœŒï¸"),React.createElement("p",null,React.createElement("div",null,"Free Version: ",React.createElement("a",{rel:"noreferrer",target:"_blank",href:"https://wordpress.org/plugins/seo-engine/"},"WordPress.org")),React.createElement("div",null,"Pro Version: ",React.createElement("a",{rel:"noreferrer",target:"_blank",href:"https://meowapps.com/seo-engine/"},"Meow Apps"))))),React.createElement(N,{title:"Meow Gallery",className:"primary"},React.createElement(F,{src:"https://ps.w.org/meow-gallery/assets/icon-256x256.png"}),React.createElement("div",{className:"plugin-desc"},React.createElement("h2",null,React.createElement("a",{rel:"noreferrer",target:"_blank",href:"https://wordpress.org/plugins/meow-gallery/"},"Meow Gallery")),React.createElement("p",{className:"plugin-actual-desc"},"Fast and beautiful galleries with many layouts. Forget the heavy and slow plugins, use the Meow Gallery for a better experience! ðŸ’•"),React.createElement("p",null,React.createElement("div",null,"Free Version: ",React.createElement("a",{rel:"noreferrer",target:"_blank",href:"https://wordpress.org/plugins/meow-gallery/"},"WordPress.org")),React.createElement("div",null,"Pro Version: ",React.createElement("a",{rel:"noreferrer",target:"_blank",href:"https://meowapps.com/meow-gallery/"},"Meow Apps"))))),React.createElement(N,{title:"Meow Lightbox",className:"primary"},React.createElement(F,{src:"https://ps.w.org/meow-lightbox/assets/icon-256x256.gif"}),React.createElement("div",{className:"plugin-desc"},React.createElement("h2",null,React.createElement("a",{rel:"noreferrer",target:"_blank",href:"https://wordpress.org/plugins/meow-lightbox/"},"Meow Lightbox")),React.createElement("p",{className:"plugin-actual-desc"},"Sleek and performant lightbox with EXIF support."),React.createElement("p",null,React.createElement("div",null,"Free Version: ",React.createElement("a",{rel:"noreferrer",target:"_blank",href:"https://wordpress.org/plugins/meow-lightbox/"},"WordPress.org")),React.createElement("div",null,"Pro Version: ",React.createElement("a",{rel:"noreferrer",target:"_blank",href:"https://meowapps.com/meow-lightbox/"},"Meow Apps"))))),React.createElement(N,{title:"Perfect Images (Retina)",className:"primary"},React.createElement(F,{src:"https://ps.w.org/wp-retina-2x/assets/icon-256x256.png"}),React.createElement("div",{className:"plugin-desc"},React.createElement("h2",null,React.createElement("a",{rel:"noreferrer",target:"_blank",href:"https://wordpress.org/plugins/wp-retina-2x/"},"Perfect Images")),React.createElement("p",{className:"plugin-actual-desc"},"Manage, Optimize, Replace your images with Perfect Images."),React.createElement("p",null,React.createElement("div",null,"Free Version: ",React.createElement("a",{rel:"noreferrer",target:"_blank",href:"https://wordpress.org/plugins/wp-retina-2x/"},"WordPress.org")),React.createElement("div",null,"Pro Version: ",React.createElement("a",{rel:"noreferrer",target:"_blank",href:"https://meowapps.com/wp-retina-2x/"},"Meow Apps"))))),React.createElement(N,{title:"Photo Engine",className:"primary"},React.createElement(F,{src:"https://ps.w.org/wplr-sync/assets/icon-256x256.png"}),React.createElement("div",{className:"plugin-desc"},React.createElement("h2",null,React.createElement("a",{rel:"noreferrer",target:"_blank",href:"https://wordpress.org/plugins/wplr-sync/"},"Photo Engine")),React.createElement("p",{className:"plugin-actual-desc"},"Organize your photos in folders and collections. Synchronize with Lightroom. Simplify and speed up your workflow."),React.createElement("p",null,React.createElement("div",null,"Free Version: ",React.createElement("a",{rel:"noreferrer",target:"_blank",href:"https://wordpress.org/plugins/wplr-sync/"},"WordPress.org")),React.createElement("div",null,"Pro Version: ",React.createElement("a",{rel:"noreferrer",target:"_blank",href:"https://meowapps.com/wplr-sync/"},"Meow Apps"))))),React.createElement(N,{title:"Contact Form Block",className:"primary"},React.createElement(F,{src:"https://ps.w.org/contact-form-block/assets/icon-256x256.png"}),React.createElement("div",{className:"plugin-desc"},React.createElement("h2",null,React.createElement("a",{rel:"noreferrer",target:"_blank",href:"https://wordpress.org/plugins/contact-form-block/"},"Contact Form Block")),React.createElement("p",{className:"plugin-actual-desc"},"Need a very simple but straightforward contact form? This is the one you need. It's fast, simple, and efficient."),React.createElement("p",null,React.createElement("div",null,"Free Version: ",React.createElement("a",{rel:"noreferrer",target:"_blank",href:"https://wordpress.org/plugins/contact-form-block/"},"WordPress.org")),React.createElement("div",null,"Pro Version: ",React.createElement("a",{rel:"noreferrer",target:"_blank",href:"https://meowapps.com/contact-form-block/"},"Meow Apps")))))))),React.createElement(E.V,{title:"Performance"},ce,React.createElement("div",{style:{display:"flex",justifyContent:"space-around",marginBottom:25}},React.createElement(Q,{title:"Empty Request Time",request:"empty_request",max:2500}),React.createElement(Q,{title:"File Operation Time",request:"file_operation",max:2600}),React.createElement(Q,{title:"SQL Request Time",request:"sql_request",max:2800})),ue),React.createElement(E.V,{title:"PHP Info"},React.createElement(M,{dangerouslySetInnerHTML:{__html:o}})),React.createElement(E.V,{title:"PHP Error Logs"},React.createElement(D,null,React.createElement(w.M,{style:{marginBottom:10},color:"#ccb027",onClick:function(){k.mutate()},disabled:k.isPending,isBusy:k.isPending},"Load PHP Error Logs"),React.createElement(L,null,(k.data||[]).map(function(e){return React.createElement("li",{className:"log-".concat(e.type),key:e.id},React.createElement("span",{className:"log-type"},e.type),React.createElement("span",{className:"log-date"},e.date),React.createElement("span",{className:"log-content"},e.content))})),React.createElement(p.s,{p:!0},"If you don't see any errors, your host might not allow remote access to PHP error logs. Contact them for assistance, or look in your hosting control panel."))),React.createElement(E.V,{title:"Settings"},React.createElement(R.z,{title:"Settings",className:"primary"},P,A))))))},me=wp.element,ye=(me.useState,me.useEffect,"".concat(O,"/meow-licenser/").concat(S,"/v1"),n(5084));const he=function(e){var t=e.busy,n=e.use_taken_date,r=e.upload_folder,a=e.filename_accents,o=e.public_api,l=e.auth_token,i=e.qr,c=e.check_same_file,u=e.updateOption,s=e.media_organizer,d=e.media_library,f=e.media_modals,g=e.big_image_size_threshold,v=React.createElement(m.d,{title:"Meta Date"},React.createElement(y.E,{max:"1"},React.createElement(h.R,{name:"wplr_use_taken_date",label:"Use Capture Date",value:"1",checked:n,onChange:u,description:"By default, WordPress use the Upload Date. This will force the Capture Date to be used instead."}))),E=React.createElement(m.d,{title:"Upload Folder"},React.createElement(y.E,{max:"1"},React.createElement(h.R,{name:"wplr_upload_folder",label:"Use Upload Date (instead of Capture Date)",value:"1",checked:"upload_date"===r,onChange:function(e,t){u(!0===e?"upload_date":"taken_date",t)},description:"Since you enabled the Capture Date above as the Meta Date, the folder will used that information. You can however choose to use the Upload Date instead with this option."}))),w=React.createElement(m.d,{title:"Sanitization"},React.createElement(y.E,{max:"1"},React.createElement(h.R,{name:"wplr_filename_accents",label:"Disable",value:"1",checked:a,onChange:u,description:"WordPress sanitizes filenames by default. This option will turn it off."}))),_=React.createElement(m.d,{title:"Media Organizer"},React.createElement(y.E,{max:"1"},React.createElement(h.R,{name:"wplr_media_organizer",label:"Enable (Recommended)",description:"Adds a Organizer in your Media menu. You will then able to organize your images in folders and collections.",value:"1",checked:s,onChange:u}))),k=React.createElement(m.d,{title:"Media Library"},React.createElement(y.E,{max:"1"},React.createElement(h.R,{name:"wplr_media_library",label:"Enable Media Browser (Not Recommended)",description:"Adds the Photo Engine Media Browser to the modals used for adding images (single image or gallery block).",value:"1",checked:d,onChange:u}))),S=React.createElement(m.d,{title:"Media Modals"},React.createElement(y.E,{max:"1"},React.createElement(h.R,{name:"wplr_media_modals",label:"Enable Media Browser (Beta)",description:"Adds the Photo Engine Media Browser to the Media Library.",value:"1",checked:f,onChange:u}))),O=React.createElement(m.d,{title:"Image Threshold"},React.createElement(h.R,{name:"wr2x_big_image_size_threshold",disabled:t,label:"Disable",value:"1",checked:g,onChange:u})),I=React.createElement(m.d,{title:"Public API"},React.createElement("div",{style:{display:"flex"}},React.createElement(y.E,{max:"1"},React.createElement(h.R,{name:"wplr_public_api",label:"Enable",value:"1",checked:o,onChange:u,description:React.createElement(p.s,{p:!0},"Read-only features will be available through the WordPress API for external apps. A QR Code will be displayed for auth.",o&&React.createElement("small",null,React.createElement("br",null),React.createElement("br",null),"Quick test: ",React.createElement("a",{href:"/wp-json/wplr/v1/hierarchy?wplr_auth_token=".concat(l)},"Hierarchy"),"."))})),o&&React.createElement("img",{style:{width:80,height:80,marginLeft:20},src:"https://api.qrserver.com/v1/create-qr-code/?size=200x200&data=".concat(encodeURIComponent(i))}))),P=React.createElement(m.d,{title:"Double Processing"},React.createElement(y.E,{max:"1"},React.createElement(h.R,{name:"wplr_check_same_file",label:"Avoid",value:"1",checked:c,onChange:u,description:"Avoid processing if the new file is the same as the old one. That will avoid thumbnails to be generated again, as well as optimization processes and so on."})));return React.createElement(React.Fragment,null,React.createElement(b.N,null,React.createElement(b.Y,{minimal:!0},React.createElement(R.z,{busy:t,title:"Features",className:"primary"},_,S,k,React.createElement(p.s,{p:!0},"The Media Organizer is recommended in order to look through your photos. Feel free to try the ",React.createElement("i",null,"Browser")," for the ",React.createElement("i",null,"Media Modals")," (for when you edit posts), but support isn't perfect yet. Your folders and collections will be always available through the filters."),React.createElement(p.s,{p:!0},React.createElement("i",null,"Browser")," for ",React.createElement("i",null,"Media Library")," is not recommended as you should use the Media Organizer instead in this case."))),React.createElement(b.Y,{minimal:!0},React.createElement(R.z,{busy:t,title:"Upload & Sync",className:"primary"},v,n&&E,w,P),React.createElement(R.z,{busy:t,title:"Advanced",className:"primary"},O,I))))};var ge=n(8899),ve=n(657),be=wp.i18n.__,Ee={};Ee.PENDING=be("Pending","wplr-sync"),Ee.RENAME=be("Rename","wplr-sync"),Ee.TITLE=be("Title","wplr-sync"),Ee.MEDIA=be("Media","wplr-sync"),Ee.ACTION=be("Action","wplr-sync"),Ee.THUMB=be("Thumb","wplr-sync"),Ee.LR_ID=be("LR ID","wplr-sync"),Ee.FILENAME=be("Filename","wplr-sync"),Ee.UNLINKED_PHOTOS=be("Unlinked Photos","wplr-sync"),Ee.DUPLICATED_LINKS=be("Duplicated Links","wplr-sync"),Ee.IGNORED_PHOTOS=be("Ignored Photos","wplr-sync"),Ee.UNKNOWN=be("Unknown","wplr-sync"),Ee.ENABLED=be("Enabled","wplr-sync"),Ee.NOT_LINKED=be("Not linked","wplr-sync"),Ee.NEVER_SYNCED=be("Never synced","wplr-sync"),Ee.SYNCED_AT=be("Last Sync: ","wplr-sync"),Ee.IGNORED=be("Ignored","wplr-sync"),Ee.DELETE=be("Delete","wplr-sync"),Ee.RESYNC_WITH_EXTENSIONS=be("Resync with Extensions","wplr-sync"),Ee.RESET_WITH_EXTENSIONS=be("Reset with Extensions","wplr-sync"),Ee.CLEAN_DB=be("Clean DB","wplr-sync"),Ee.REPAIR_DB=be("Repair DB","wplr-sync");const we=Ee;function Re(e){return Re="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Re(e)}function _e(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",a=n.toStringTag||"@@toStringTag";function o(n,r,a,o){var c=r&&r.prototype instanceof i?r:i,u=Object.create(c.prototype);return ke(u,"_invoke",function(n,r,a){var o,i,c,u=0,s=a||[],d=!1,f={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,n){return o=t,i=0,c=e,f.n=n,l}};function p(n,r){for(i=n,c=r,t=0;!d&&u&&!a&&t<s.length;t++){var a,o=s[t],p=f.p,m=o[2];n>3?(a=m===r)&&(c=o[(i=o[4])?5:(i=3,3)],o[4]=o[5]=e):o[0]<=p&&((a=n<2&&p<o[1])?(i=0,f.v=r,f.n=o[1]):p<m&&(a=n<3||o[0]>r||r>m)&&(o[4]=n,o[5]=r,f.n=m,i=0))}if(a||n>1)return l;throw d=!0,r}return function(a,s,m){if(u>1)throw TypeError("Generator is already running");for(d&&1===s&&p(s,m),i=s,c=m;(t=i<2?e:c)||!d;){o||(i?i<3?(i>1&&(f.n=-1),p(i,c)):f.n=c:f.v=c);try{if(u=2,o){if(i||(a="next"),t=o[a]){if(!(t=t.call(o,c)))throw TypeError("iterator result is not an object");if(!t.done)return t;c=t.value,i<2&&(i=0)}else 1===i&&(t=o.return)&&t.call(o),i<2&&(c=TypeError("The iterator does not provide a '"+a+"' method"),i=1);o=e}else if((t=(d=f.n<0)?c:n.call(r,f))!==l)break}catch(t){o=e,i=1,c=t}finally{u=1}}return{value:t,done:d}}}(n,a,o),!0),u}var l={};function i(){}function c(){}function u(){}t=Object.getPrototypeOf;var s=[][r]?t(t([][r]())):(ke(t={},r,function(){return this}),t),d=u.prototype=i.prototype=Object.create(s);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,ke(e,a,"GeneratorFunction")),e.prototype=Object.create(d),e}return c.prototype=u,ke(d,"constructor",u),ke(u,"constructor",c),c.displayName="GeneratorFunction",ke(u,a,"GeneratorFunction"),ke(d),ke(d,a,"Generator"),ke(d,r,function(){return this}),ke(d,"toString",function(){return"[object Generator]"}),(_e=function(){return{w:o,m:f}})()}function ke(e,t,n,r){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}ke=function(e,t,n,r){function o(t,n){ke(e,t,function(e){return this._invoke(t,n,e)})}t?a?a(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(o("next",0),o("throw",1),o("return",2))},ke(e,t,n,r)}function Se(e,t,n,r,a,o,l){try{var i=e[o](l),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,a)}function Oe(e){return function(){var t=this,n=arguments;return new Promise(function(r,a){var o=e.apply(t,n);function l(e){Se(o,r,a,l,i,"next",e)}function i(e){Se(o,r,a,l,i,"throw",e)}l(void 0)})}}function Ie(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Pe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ie(Object(n),!0).forEach(function(t){Ae(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ie(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Ae(e,t,n){return(t=function(e){var t=function(e){if("object"!=Re(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=Re(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Re(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var xe={refetchOnWindowFocus:!1,retry:!1};function Te(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",a=n.toStringTag||"@@toStringTag";function o(n,r,a,o){var c=r&&r.prototype instanceof i?r:i,u=Object.create(c.prototype);return je(u,"_invoke",function(n,r,a){var o,i,c,u=0,s=a||[],d=!1,f={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,n){return o=t,i=0,c=e,f.n=n,l}};function p(n,r){for(i=n,c=r,t=0;!d&&u&&!a&&t<s.length;t++){var a,o=s[t],p=f.p,m=o[2];n>3?(a=m===r)&&(c=o[(i=o[4])?5:(i=3,3)],o[4]=o[5]=e):o[0]<=p&&((a=n<2&&p<o[1])?(i=0,f.v=r,f.n=o[1]):p<m&&(a=n<3||o[0]>r||r>m)&&(o[4]=n,o[5]=r,f.n=m,i=0))}if(a||n>1)return l;throw d=!0,r}return function(a,s,m){if(u>1)throw TypeError("Generator is already running");for(d&&1===s&&p(s,m),i=s,c=m;(t=i<2?e:c)||!d;){o||(i?i<3?(i>1&&(f.n=-1),p(i,c)):f.n=c:f.v=c);try{if(u=2,o){if(i||(a="next"),t=o[a]){if(!(t=t.call(o,c)))throw TypeError("iterator result is not an object");if(!t.done)return t;c=t.value,i<2&&(i=0)}else 1===i&&(t=o.return)&&t.call(o),i<2&&(c=TypeError("The iterator does not provide a '"+a+"' method"),i=1);o=e}else if((t=(d=f.n<0)?c:n.call(r,f))!==l)break}catch(t){o=e,i=1,c=t}finally{u=1}}return{value:t,done:d}}}(n,a,o),!0),u}var l={};function i(){}function c(){}function u(){}t=Object.getPrototypeOf;var s=[][r]?t(t([][r]())):(je(t={},r,function(){return this}),t),d=u.prototype=i.prototype=Object.create(s);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,je(e,a,"GeneratorFunction")),e.prototype=Object.create(d),e}return c.prototype=u,je(d,"constructor",u),je(u,"constructor",c),c.displayName="GeneratorFunction",je(u,a,"GeneratorFunction"),je(d),je(d,a,"Generator"),je(d,r,function(){return this}),je(d,"toString",function(){return"[object Generator]"}),(Te=function(){return{w:o,m:f}})()}function je(e,t,n,r){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}je=function(e,t,n,r){function o(t,n){je(e,t,function(e){return this._invoke(t,n,e)})}t?a?a(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(o("next",0),o("throw",1),o("return",2))},je(e,t,n,r)}function Ce(e,t,n,r,a,o,l){try{var i=e[o](l),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,a)}function De(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o,l,i=[],c=!0,u=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=o.call(n)).done)&&(i.push(r.value),i.length!==t);c=!0);}catch(e){u=!0,a=e}finally{try{if(!c&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(u)throw a}}return i}}(e,t)||Ne(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ne(e,t){if(e){if("string"==typeof e)return Fe(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Fe(e,t):void 0}}function Fe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var Me=wp.element,Le=Me.useState,Ge=Me.useMemo,Ue={fontSize:"x-small",marginLeft:3};const ze=function(e){var t,n=e.busy,r=e.enable_keywords,a=e.sync_keywords,o=e.sync_keywords_options,l=e.updateOption,i=(0,u.jE)(),c=De(Le(!1),2),s=c[0],f=c[1],g=De(Le(null),2),v=g[0],E=g[1],_=De(Le(null),2),S=_[0],O=_[1],P=De(Le(!1),2),A=P[0],T=P[1],j=(0,d.I)(Pe({queryKey:["keywords-hierarchy"],queryFn:(t=Oe(_e().m(function e(){var t;return _e().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,(0,k.m9)("".concat(I,"/keywords_hierarchy/"),{headers:{"X-WP-Nonce":x}});case 1:if(!(t=e.v).success){e.n=2;break}return e.a(2,t);case 2:throw new Error(t.error||"Failed to fetch keywords hierarchy");case 3:return e.a(2)}},e)})),function(){return t.apply(this,arguments)})},xe)),C=j.data,D=j.isLoading,N=(null==C?void 0:C.data)||[],F=n||D,M=function(){i.invalidateQueries(["keywords-hierarchy"])},L=React.createElement(m.d,{title:"Enable Keywords"},React.createElement(y.E,{max:"1"},React.createElement(h.R,{name:"wplr_enable_keywords",label:"Create the Keywords Taxonomy",value:"1",checked:r,onChange:l,description:React.createElement(p.s,null,"The Keywords taxonomy (",React.createElement("b",null,"attachment_keyword"),") will be added to your Media Library. It works the same way as the tags already available for your posts.")}))),G=React.createElement(m.d,{title:"Sync Keywords"},React.createElement(ge.u,{name:"wplr_sync_keywords",scrolldown:!0,onChange:l,description:"Synchronize your LR keywords with a taxonomy available in your Media Library."},Object.keys(o).map(function(e){var t=o[e];return React.createElement(ge.j,{id:t,value:t,label:t||"none",checked:a===t||!a&&!t})}))),U=function(){var e,t=(e=Te().m(function e(t){return Te().w(function(e){for(;;)switch(e.n){case 0:return T(!0),e.n=1,(0,k.Tb)("".concat(I,"/delete_keywords_hierarchy"),{nonce:x,json:{delete_keyword:t.id}});case 1:M(),T(!1);case 2:return e.a(2)}},e)}),function(){var t=this,n=arguments;return new Promise(function(r,a){var o=e.apply(t,n);function l(e){Ce(o,r,a,l,i,"next",e)}function i(e){Ce(o,r,a,l,i,"throw",e)}l(void 0)})});return function(e){return t.apply(this,arguments)}}(),z=function(e,t){return React.createElement(ve.R,{title:React.createElement(React.Fragment,null,e.name,React.createElement(p.s,{style:Ue},"(ID: ",e.id,", Photos: ",e.count,")")),icon:"tag",onMouseEnter:function(){return E((t=e).id),void O(t.name);var t},rightElement:React.createElement(w.M,{small:!0,className:"danger",onClick:function(){return U(e)}},we.DELETE),showRightElement:t},e.children.length?e.children.map(function(e){return z(e,t)}):null)},B=Ge(function(){return N.length?React.createElement(ve.M,null,N.map(function(e){return z(e,s)})):null},[N,s]),W=React.createElement(React.Fragment,null,React.createElement("div",null,React.createElement(p.s,{p:!0},"This is the hierarchy of tags stored by Photo Engine internally. If you wish this hierarchy to be synchronized with your theme directly, please learn about the ",React.createElement("a",{href:"https://meowapps.com/wplr-sync-extensions/"},"Photo Engine Extensions"),". You can also try the ",React.createElement("a",{href:"https://wordpress.org/plugins/meow-gallery/"},"Meow Gallery")," plugin that makes use of all this natively."),B),React.createElement("div",null,React.createElement(y.E,{max:"1"},React.createElement(h.R,{name:"unlockKeywordsHierarchy",label:React.createElement(p.s,null,"Unlock ",React.createElement("b",null,we.DELETE)),value:"1",checked:s,onChange:function(){f(!s)}})))),q=Ge(function(){if(!v)return null;var e=function(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=[],a=n;return t.forEach(function(t){var o;n=t.id===v,(a||t.id===v)&&r.push(t.id),t.children.length&&r.push.apply(r,function(e){if(Array.isArray(e))return Fe(e)}(o=e(t.children,n))||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(o)||Ne(o)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())}),r};return e(N).join(",")},[v]),H=React.createElement(React.Fragment,null,React.createElement(p.s,{p:!0},"You can add the ",React.createElement("i",null,"wplr")," attributes to the native WP Gallery shortcode. Hover the collections, folders and tags and copy/paste this shortcode to your pages."),(S||q)&&React.createElement("div",{style:{backgroundColor:"var(--neko-blue)",color:"white",borderRadius:10,padding:10}},React.createElement(p.s,{p:!0},"Here are my photos about ",React.createElement("i",null,S),":",React.createElement("br",null),'[gallery wplr-keyword="',q,'"]')),React.createElement(p.s,{p:!0},"We recommend you to use the ",React.createElement("a",{href:"https://wordpress.org/plugins/meow-gallery/"},"Meow Gallery"),". Not only it features beautiful layouts but it has a Gutenberg block to do all this automatically."));return React.createElement(b.N,null,React.createElement(b.Y,{minimal:!0},React.createElement(R.z,{busy:F||A,title:"Keywords (Tags)",className:"primary"},W)),React.createElement(b.Y,{minimal:!0},React.createElement(R.z,{busy:F||A,title:"Shortcodes",className:"primary"},H),React.createElement(R.z,{busy:F,title:"Keywords / Tags",className:"primary"},L,G)))};var Be=n(8323),We=n(3528),qe=n(5621),He=n(6118),Ye=n(9251),Ve=n(6e3);function Ke(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",a=n.toStringTag||"@@toStringTag";function o(n,r,a,o){var c=r&&r.prototype instanceof i?r:i,u=Object.create(c.prototype);return Xe(u,"_invoke",function(n,r,a){var o,i,c,u=0,s=a||[],d=!1,f={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,n){return o=t,i=0,c=e,f.n=n,l}};function p(n,r){for(i=n,c=r,t=0;!d&&u&&!a&&t<s.length;t++){var a,o=s[t],p=f.p,m=o[2];n>3?(a=m===r)&&(c=o[(i=o[4])?5:(i=3,3)],o[4]=o[5]=e):o[0]<=p&&((a=n<2&&p<o[1])?(i=0,f.v=r,f.n=o[1]):p<m&&(a=n<3||o[0]>r||r>m)&&(o[4]=n,o[5]=r,f.n=m,i=0))}if(a||n>1)return l;throw d=!0,r}return function(a,s,m){if(u>1)throw TypeError("Generator is already running");for(d&&1===s&&p(s,m),i=s,c=m;(t=i<2?e:c)||!d;){o||(i?i<3?(i>1&&(f.n=-1),p(i,c)):f.n=c:f.v=c);try{if(u=2,o){if(i||(a="next"),t=o[a]){if(!(t=t.call(o,c)))throw TypeError("iterator result is not an object");if(!t.done)return t;c=t.value,i<2&&(i=0)}else 1===i&&(t=o.return)&&t.call(o),i<2&&(c=TypeError("The iterator does not provide a '"+a+"' method"),i=1);o=e}else if((t=(d=f.n<0)?c:n.call(r,f))!==l)break}catch(t){o=e,i=1,c=t}finally{u=1}}return{value:t,done:d}}}(n,a,o),!0),u}var l={};function i(){}function c(){}function u(){}t=Object.getPrototypeOf;var s=[][r]?t(t([][r]())):(Xe(t={},r,function(){return this}),t),d=u.prototype=i.prototype=Object.create(s);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,Xe(e,a,"GeneratorFunction")),e.prototype=Object.create(d),e}return c.prototype=u,Xe(d,"constructor",u),Xe(u,"constructor",c),c.displayName="GeneratorFunction",Xe(u,a,"GeneratorFunction"),Xe(d),Xe(d,a,"Generator"),Xe(d,r,function(){return this}),Xe(d,"toString",function(){return"[object Generator]"}),(Ke=function(){return{w:o,m:f}})()}function Xe(e,t,n,r){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}Xe=function(e,t,n,r){function o(t,n){Xe(e,t,function(e){return this._invoke(t,n,e)})}t?a?a(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(o("next",0),o("throw",1),o("return",2))},Xe(e,t,n,r)}function Qe(e,t,n,r,a,o,l){try{var i=e[o](l),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,a)}function $e(e){return function(){var t=this,n=arguments;return new Promise(function(r,a){var o=e.apply(t,n);function l(e){Qe(o,r,a,l,i,"next",e)}function i(e){Qe(o,r,a,l,i,"throw",e)}l(void 0)})}}function Je(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o,l,i=[],c=!0,u=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=o.call(n)).done)&&(i.push(r.value),i.length!==t);c=!0);}catch(e){u=!0,a=e}finally{try{if(!c&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(u)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Ze(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ze(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ze(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var et=wp.element,tt=et.useState,nt=et.useEffect;const rt=function(e){var t=e.mutate,n=e.isServerSide,r=Je(tt(null),2),a=r[0],o=r[1],l=Je(tt(!1),2),i=l[0],c=l[1],u=Je(tt(e.wpId||null),2),d=u[0],f=u[1],m=Je(tt(e.lrId||null),2),y=m[0],h=m[1],g=Je(tt(e.lrId||null),2),v=g[0],b=g[1],E=Je(tt(e.lastSync||null),2),R=E[0],_=E[1],S=(0,Ve.b_)({concurrency:2}).runTask;nt(function(){n||(e.show?o(e.show):O(d))},[e.show]),nt(function(){e.show||o(y>0?"linked":0==y?"ignored":"unlinked")},[d,y,R]);var O=function(){var e=$e(Ke().m(function e(t){var n,r;return Ke().w(function(e){for(;;)switch(e.n){case 0:return c(function(e){return e+1}),e.n=1,S($e(Ke().m(function e(){return Ke().w(function(e){for(;;)if(0===e.n)return e.a(2,(0,k.Tb)("".concat(I,"/sync_info"),{nonce:x,json:{wpId:t}}))},e)})));case 1:n=e.v,r=n.data,f((null==r?void 0:r.wp_id)||t),h((null==r?void 0:r.lr_id)||null),_((null==r?void 0:r.lastsync)||null),c(function(e){return e-1});case 2:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}(),P=function(){var e=$e(Ke().m(function e(t){return Ke().w(function(e){for(;;)switch(e.n){case 0:b(t);case 1:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}(),A=function(){var e=$e(Ke().m(function e(){return Ke().w(function(e){for(;;)switch(e.n){case 0:t?t():O(d);case 1:return e.a(2)}},e)}));return function(){return e.apply(this,arguments)}}(),T=function(){var e=$e(Ke().m(function e(){return Ke().w(function(e){for(;;)switch(e.n){case 0:return c(function(e){return e+1}),e.n=1,(0,k.Tb)("".concat(I,"/link"),{nonce:x,json:{lrId:v,wpId:d}});case 1:e.v,A(),c(function(e){return e-1});case 2:return e.a(2)}},e)}));return function(){return e.apply(this,arguments)}}(),j=function(){var e=$e(Ke().m(function e(){return Ke().w(function(e){for(;;)switch(e.n){case 0:return c(function(e){return e+1}),e.n=1,(0,k.Tb)("".concat(I,"/unlink"),{nonce:x,json:{lrId:y,wpId:d}});case 1:A(),c(function(e){return e-1});case 2:return e.a(2)}},e)}));return function(){return e.apply(this,arguments)}}(),C=function(){var e=$e(Ke().m(function e(){return Ke().w(function(e){for(;;)switch(e.n){case 0:return c(function(e){return e+1}),e.n=1,(0,k.Tb)("".concat(I,"/link"),{nonce:x,json:{lrId:0,wpId:d}});case 1:A(),c(function(e){return e-1});case 2:return e.a(2)}},e)}));return function(){return e.apply(this,arguments)}}(),D=function(){var e=$e(Ke().m(function e(){return Ke().w(function(e){for(;;)switch(e.n){case 0:return c(function(e){return e+1}),e.n=1,(0,k.Tb)("".concat(I,"/unlink"),{nonce:x,json:{lrId:y,wpId:d,afterDelete:!0}});case 1:A(),c(function(e){return e-1});case 2:return e.a(2)}},e)}));return function(){return e.apply(this,arguments)}}(),N="linked"===a,F="ignored"===a,M="duplicates"===a,L="unlinked"===a;return React.createElement(s.A,null,React.createElement(He.A,{style:{display:"flex",alignItems:"center"}},React.createElement("div",{style:{display:"flex",flexDirection:"column"}},React.createElement("div",{style:{display:"flex",alignItems:"center"}},!i&&!N&&!F&&React.createElement(Ye.A,{name:"wplr_sync-lr-id",placeholder:"Type the LR ID",style:{marginRight:5},inputStyle:N?{backgroundColor:"#007cb9",color:"#ffffff4f"}:{},readOnly:i||N,value:y,onChange:P}),!i&&L&&React.createElement(w.M,{disabled:!v,onClick:T},"Link"),!i&&M&&React.createElement(w.M,{className:"danger",onClick:D},we.DELETE)),!i&&L&&React.createElement("small",null,"You can also ",React.createElement("a",{style:{cursor:"pointer"},onClick:C},"ignore")," this."),function(e,t,n){return i?React.createElement(p.s,{div:!0},"Loading..."):"unlinked"===e?null:"ignored"===e?React.createElement(p.s,{div:!0},we.IGNORED,"Â "):t>0?(r=n)&&new Date(r).getTime()&&"0000-00-00 00:00:00"!==n?React.createElement(p.s,{div:!0},we.SYNCED_AT," ",function(e){var t=new Date(e),n=t.getFullYear(),r=t.getMonth()+1,a=t.getDate(),o=Je((new Date).toLocaleDateString().split("/"),3),l=o[0],i=o[1],c=o[2];if("".concat(n).concat(r).concat(a)==="".concat(l).concat(i).concat(c)){var u=t.getHours(),s=u>12,d=s?"pm":"am";u=s?u-12:u;var f=t.getMinutes();return"".concat(u,":").concat(f," ").concat(d)}return"".concat(n,"/").concat(r,"/").concat(a)}(n),"Â "):React.createElement(p.s,{div:!0},we.NEVER_SYNCED):React.createElement(p.s,{div:!0},we.UNKNOWN);var r}(a,y,R),!i&&N&&React.createElement("a",{style:{cursor:"pointer"},onClick:j},"(unlink)"),!i&&F&&React.createElement("a",{style:{cursor:"pointer"},onClick:j}," (undo)"))))};function at(e){return at="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},at(e)}function ot(e){return function(e){if(Array.isArray(e))return dt(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||st(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function lt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function it(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?lt(Object(n),!0).forEach(function(t){ct(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):lt(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function ct(e,t,n){return(t=function(e){var t=function(e){if("object"!=at(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=at(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==at(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ut(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o,l,i=[],c=!0,u=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=o.call(n)).done)&&(i.push(r.value),i.length!==t);c=!0);}catch(e){u=!0,a=e}finally{try{if(!c&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(u)throw a}}return i}}(e,t)||st(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function st(e,t){if(e){if("string"==typeof e)return dt(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?dt(e,t):void 0}}function dt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var ft=wp.element,pt=ft.useState,mt=ft.useMemo;const yt=function(e){var t=e.busy,n=(0,u.jE)(),r=ut(pt("unlinked"),2),a=r[0],o=r[1],l=ut(pt([]),2),i=l[0],c=l[1],s=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"unlinked";return(0,d.I)(Pe({queryKey:["entries",t],queryFn:(e=Oe(_e().m(function e(){var n,r;return _e().w(function(e){for(;;)switch(e.n){case 0:return n=(0,k.mR)("".concat(I,"/entries"),{show:t}),e.n=1,(0,k.m9)(n,{headers:{"X-WP-Nonce":x}});case 1:if(!(r=e.v).success){e.n=2;break}return e.a(2,r);case 2:throw new Error(r.error||"Failed to fetch entries");case 3:return e.a(2)}},e)})),function(){return e.apply(this,arguments)})},xe))}(a),f=s.data,p=s.isLoading,m=(null==f?void 0:f.data)||[],y=t||p,h=function(){n.invalidateQueries(["entries",a])},g={width:120,height:120,objectFit:"cover"},v=mt(function(){return"duplicates"===a?[{accessor:"lr_id",title:we.LR_ID},{accessor:"filename",title:we.FILENAME},{accessor:"media",title:we.MEDIA}]:[{accessor:"thumbnail_url",title:we.THUMB,width:"150px"},{accessor:"media",title:we.MEDIA},{accessor:"action",title:we.ACTION}]},[a]),E=mt(function(){return"duplicates"===a?m.map(function(e){var t;return{id:e.ID,lr_id:e.lr_id,filename:e.lr_file||"Unknown",media:React.createElement("div",{style:{display:"flex",flexDirection:"column"}},null==e||null===(t=e.details)||void 0===t?void 0:t.map(function(t,n){var r=e.details.length>n+1?it(it({},g),{},{marginBottom:"5px"}):g;return React.createElement("div",{style:{display:"flex",alignItems:"center"}},React.createElement("img",{src:t.thumbnail_url,style:r}),React.createElement(rt,{show:a,wpId:t.ID,lrId:e.lr_id,mutate:function(){return h()}}))}))}}):m.map(function(e){return{id:e.ID,thumbnail_url:React.createElement("img",{src:e.thumbnail_url,style:g}),media:React.createElement("a",{href:"/wp-admin/post.php?post=".concat(e.ID,"&action=edit")},"# ",e.ID),action:React.createElement(rt,{show:a,wpId:e.ID,lrId:e.lr_id||null,mutate:function(){return h()}})}})},[m,a]),w=React.createElement(React.Fragment,null,React.createElement("p",null,"This screen will help you to link your unlinked photos between WordPress and Lightroom. ",React.createElement("b",null,"Don't forget that if you link a photo from here you also need to also add it manually to the WP/LR Service in Lightroom.")," Last but not least, be careful with the in 'Duplicated Links', they are ",React.createElement("b",null,"immediate")," and the 'Delete' is ",React.createElement("b",null,"unrecoverable"),"."),React.createElement(Be.g,{tiny:!0}),React.createElement(We.o,{name:"wplr_sync-consolidate",value:a,onChange:function(e){o(e)}},React.createElement(We.K,{title:"Unlinked Photos",value:"unlinked"}),React.createElement(We.K,{title:"Duplicated Links",value:"duplicates"}),React.createElement(We.K,{title:"Ignored Photos",value:"ignored"})),React.createElement("div",{style:{marginTop:10}}),React.createElement(qe.o,{busy:y,data:E,columns:v,onSelect:function(e){c([].concat(ot(i),ot(e)))},onUnselect:function(e){c(ot(i.filter(function(t){return!e.includes(t)})))},selectedItems:i}));return React.createElement(b.N,null,React.createElement(b.Y,{minimal:!0},React.createElement(R.z,{busy:t,className:"primary"},w)))};var ht=n(8550);function gt(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",a=n.toStringTag||"@@toStringTag";function o(n,r,a,o){var c=r&&r.prototype instanceof i?r:i,u=Object.create(c.prototype);return vt(u,"_invoke",function(n,r,a){var o,i,c,u=0,s=a||[],d=!1,f={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,n){return o=t,i=0,c=e,f.n=n,l}};function p(n,r){for(i=n,c=r,t=0;!d&&u&&!a&&t<s.length;t++){var a,o=s[t],p=f.p,m=o[2];n>3?(a=m===r)&&(c=o[(i=o[4])?5:(i=3,3)],o[4]=o[5]=e):o[0]<=p&&((a=n<2&&p<o[1])?(i=0,f.v=r,f.n=o[1]):p<m&&(a=n<3||o[0]>r||r>m)&&(o[4]=n,o[5]=r,f.n=m,i=0))}if(a||n>1)return l;throw d=!0,r}return function(a,s,m){if(u>1)throw TypeError("Generator is already running");for(d&&1===s&&p(s,m),i=s,c=m;(t=i<2?e:c)||!d;){o||(i?i<3?(i>1&&(f.n=-1),p(i,c)):f.n=c:f.v=c);try{if(u=2,o){if(i||(a="next"),t=o[a]){if(!(t=t.call(o,c)))throw TypeError("iterator result is not an object");if(!t.done)return t;c=t.value,i<2&&(i=0)}else 1===i&&(t=o.return)&&t.call(o),i<2&&(c=TypeError("The iterator does not provide a '"+a+"' method"),i=1);o=e}else if((t=(d=f.n<0)?c:n.call(r,f))!==l)break}catch(t){o=e,i=1,c=t}finally{u=1}}return{value:t,done:d}}}(n,a,o),!0),u}var l={};function i(){}function c(){}function u(){}t=Object.getPrototypeOf;var s=[][r]?t(t([][r]())):(vt(t={},r,function(){return this}),t),d=u.prototype=i.prototype=Object.create(s);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,vt(e,a,"GeneratorFunction")),e.prototype=Object.create(d),e}return c.prototype=u,vt(d,"constructor",u),vt(u,"constructor",c),c.displayName="GeneratorFunction",vt(u,a,"GeneratorFunction"),vt(d),vt(d,a,"Generator"),vt(d,r,function(){return this}),vt(d,"toString",function(){return"[object Generator]"}),(gt=function(){return{w:o,m:f}})()}function vt(e,t,n,r){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}vt=function(e,t,n,r){function o(t,n){vt(e,t,function(e){return this._invoke(t,n,e)})}t?a?a(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(o("next",0),o("throw",1),o("return",2))},vt(e,t,n,r)}function bt(e,t,n,r,a,o,l){try{var i=e[o](l),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,a)}function Et(e){return function(){var t=this,n=arguments;return new Promise(function(r,a){var o=e.apply(t,n);function l(e){bt(o,r,a,l,i,"next",e)}function i(e){bt(o,r,a,l,i,"throw",e)}l(void 0)})}}function wt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o,l,i=[],c=!0,u=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=o.call(n)).done)&&(i.push(r.value),i.length!==t);c=!0);}catch(e){u=!0,a=e}finally{try{if(!c&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(u)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Rt(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Rt(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Rt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var _t=wp.element.useState;const kt=function(e){var t=e.busy,n=e.extensions,r=e.troubles_issues,a=e.debugging_enabled,o=e.catch_errors,l=e.debuglogs,i=e.updateOption,c=(0,Ve.XS)(),u=wt(_t(!1),2),s=u[0],d=u[1],f=wt(_t("Ready."),2),g=f[0],v=f[1],E=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;(e=null!==e?e:c.getErrorCount())>0?(alert("The process has finished, but ".concat(e," error(s) occurred.")),v("Error occured!")):v("Done!"),c.reset()},_=function(e){if("add_collection"==e.action){var t="1"==e.is_folder?"folder":"collection";return"Create ".concat(t," '").concat(e.name,"'...")}if("remove_collection"==e.action){var n="1"==e.is_folder?"folder":"collection";return"Remove ".concat(n," '").concat(e.name,"'...")}return"add_media"==e.action?"Add media ".concat(e.wp_id," to collection ").concat(e.wp_col_id,"..."):"remove_media"==e.action?"Remove media ".concat(e.wp_id," from collection ").concat(e.wp_col_id,"..."):"add_tag"==e.action?"Add tag ".concat(e.name,"..."):"update_tag"==e.action?"Add parent ".concat(e.parent," for tag ").concat(e.name,"..."):"add_media_tag"==e.action?"Add tag ".concat(e.id," to media ").concat(e.wp_id,"..."):"remove_media_tag"==e.action?"Remove tag ".concat(e.id," from media ").concat(e.wp_id,"..."):"remove_tag"==e.action?"Remove tag ".concat(e.name,"..."):"Running unknown tasks..."},S=function(){var e=Et(gt().m(function e(){var t,n;return gt().w(function(e){for(;;)switch(e.n){case 0:return d(!0),v("Initiating sync..."),e.n=1,(0,k.Tb)("".concat(I,"/extensions_init"),{nonce:x,json:{is_removal:!1}});case 1:if((t=e.v).success){e.n=2;break}return alert(t.message),d(!1),e.a(2);case 2:return n=t.data.map(function(e){return function(){var t=Et(gt().m(function t(n){return gt().w(function(t){for(;;)switch(t.n){case 0:return v(_(e)),t.n=1,(0,k.Tb)("".concat(I,"/extensions_query"),{nonce:x,json:{task:e},signal:n});case 1:return t.a(2,t.v)}},t)}));return function(e){return t.apply(this,arguments)}}()}),e.n=3,c.start(n);case 3:E(),d(!1);case 4:return e.a(2)}},e)}));return function(){return e.apply(this,arguments)}}(),O=function(){var e=Et(gt().m(function e(){var t,n;return gt().w(function(e){for(;;)switch(e.n){case 0:return d(!0),v("Initiating reset..."),e.n=1,(0,k.Tb)("".concat(I,"/extensions_init"),{nonce:x,json:{is_removal:!0}});case 1:if((t=e.v).success){e.n=2;break}return alert(t.message),d(!1),e.a(2);case 2:return n=t.data.map(function(e){return function(){var t=Et(gt().m(function t(n){return gt().w(function(t){for(;;)switch(t.n){case 0:return v(_(e)),t.n=1,(0,k.Tb)("".concat(I,"/extensions_query"),{nonce:x,json:{task:e},signal:n});case 1:return t.a(2,t.v)}},t)}));return function(e){return t.apply(this,arguments)}}()}),e.n=3,c.start(n);case 3:if(!c.getErrorCount()){e.n=4;break}return E(),d(!1),e.a(2);case 4:return v("Final reset..."),e.n=5,(0,k.Tb)("".concat(I,"/extensions_reset"),{nonce:x});case 5:if((t=e.v).success){e.n=6;break}return alert(t.message),d(!1),e.a(2);case 6:E(),d(!1);case 7:return e.a(2)}},e)}));return function(){return e.apply(this,arguments)}}(),P=function(){var e=Et(gt().m(function e(){var t;return gt().w(function(e){for(;;)switch(e.n){case 0:return d(!0),v("Cleaning..."),e.n=1,(0,k.Tb)("".concat(I,"/clean"),{nonce:x});case 1:if((t=e.v).success){e.n=2;break}return alert(t.message),e.a(2);case 2:E(),d(!1);case 3:return e.a(2)}},e)}));return function(){return e.apply(this,arguments)}}(),A=function(){var e=Et(gt().m(function e(){var t;return gt().w(function(e){for(;;)switch(e.n){case 0:return d(!0),v("Repairing..."),e.n=1,(0,k.Tb)("".concat(I,"/repair"),{nonce:x});case 1:if((t=e.v).success){e.n=2;break}return alert(t.message),e.a(2);case 2:alert(t.data),E(),d(!1);case 3:return e.a(2)}},e)}));return function(){return e.apply(this,arguments)}}(),T=r.length?React.createElement("ul",null,r.map(function(e){return React.createElement("li",null,e)})):React.createElement(p.s,{p:!0},"Everything is fine. "),j=React.createElement(m.d,{title:"Debugging"},React.createElement(y.E,{max:"1"},React.createElement(h.R,{name:"wplr_debugging_enabled",label:"Enable",value:"1",checked:a,onChange:i,description:"Add a Debugging menu in Photo Engine. For advanced users only."}))),C=React.createElement(m.d,{title:"Catch Errors"},React.createElement(y.E,{max:"1"},React.createElement(h.R,{name:"wplr_catch_errors",label:"Enable",value:"1",checked:o,onChange:i,description:"Errors (from other plugins, themes, etc) happening during the Photo Engine process will be caught to avoid operations to fail."}))),D=React.createElement(m.d,{title:"Advanced Logs"},React.createElement(y.E,{max:"1"},React.createElement(h.R,{name:"wplr_debuglogs",label:"Enable",value:"1",checked:l,onChange:i,description:"Create an internal log file. For advanced users only."}))),N=React.createElement(React.Fragment,null,React.createElement("div",null,React.createElement(p.s,{p:!0},"Photo Engine synchronizes data about your photos, collections, and folders between your Lightroom and your WordPress. To use this data beyond the Media Library, you need to install and use extensions. You can learn more about it here: ",React.createElement("a",{href:"http://meowapps.com/wplr-sync-extensions/"},"WP/LR Extensions"),". You can also jump to ",React.createElement("a",{href:"https://wordpress.org/plugins/search/wplr-extension/"},"the list of the available extensions for Photo Engine"),"."),React.createElement("div",{style:{marginBottom:16}},React.createElement(w.M,{onClick:S},we.RESYNC_WITH_EXTENSIONS),React.createElement(w.M,{className:"secondary",onClick:O},we.RESET_WITH_EXTENSIONS),React.createElement(w.M,{className:"secondary",onClick:P},we.CLEAN_DB),React.createElement(w.M,{className:"secondary",onClick:A},we.REPAIR_DB)),React.createElement(ht.j,{value:100,busy:s,status:g}),React.createElement(p.s,{p:!0,style:{marginBottom:3}},React.createElement("i",null,React.createElement("b",null,we.RESYNC_WITH_EXTENSIONS)," will request the extensions to (re)create the folders/collections/keywords structure.")),React.createElement(p.s,{p:!0,style:{marginTop:3,marginBottom:3}},React.createElement("i",null,React.createElement("b",null,we.RESET_WITH_EXTENSIONS)," will request the extensions to undo their usage of the folders/collections/keywords structure.")),React.createElement(p.s,{p:!0,style:{marginTop:3}},React.createElement("i",null,React.createElement("b",null,we.CLEAN_DB)," will remove from its own database the entries related to deleted Media.")),React.createElement(p.s,{p:!0},React.createElement("i",null,React.createElement("b",null,we.REPAIR_DB)," will repair if any table is missing or corrupted."))));return React.createElement(b.N,null,React.createElement(b.Y,{minimal:!0},React.createElement(R.z,{busy:t||s,title:"Actions",className:"primary"},N)),React.createElement(b.Y,{minimal:!0},React.createElement(R.z,{busy:t,title:"Extensions",className:"primary"},function(e){return 0===e.length?React.createElement(p.s,{p:!0},"No extensions have been loaded."):1===e.length?React.createElement(p.s,{p:!0},"The extension for ",React.createElement("b",null,e[0])," is loaded."):React.createElement(p.s,{p:!0},"The extensions for ",React.createElement("b",null,e.join(", "))," are loaded.")}(n)),React.createElement(R.z,{busy:t,title:"Potential issues",className:"primary"},T),React.createElement(R.z,{busy:t,title:"Debugging",className:"primary"},j,C,D)))};function St(e){return St="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},St(e)}function Ot(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",a=n.toStringTag||"@@toStringTag";function o(n,r,a,o){var c=r&&r.prototype instanceof i?r:i,u=Object.create(c.prototype);return It(u,"_invoke",function(n,r,a){var o,i,c,u=0,s=a||[],d=!1,f={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,n){return o=t,i=0,c=e,f.n=n,l}};function p(n,r){for(i=n,c=r,t=0;!d&&u&&!a&&t<s.length;t++){var a,o=s[t],p=f.p,m=o[2];n>3?(a=m===r)&&(c=o[(i=o[4])?5:(i=3,3)],o[4]=o[5]=e):o[0]<=p&&((a=n<2&&p<o[1])?(i=0,f.v=r,f.n=o[1]):p<m&&(a=n<3||o[0]>r||r>m)&&(o[4]=n,o[5]=r,f.n=m,i=0))}if(a||n>1)return l;throw d=!0,r}return function(a,s,m){if(u>1)throw TypeError("Generator is already running");for(d&&1===s&&p(s,m),i=s,c=m;(t=i<2?e:c)||!d;){o||(i?i<3?(i>1&&(f.n=-1),p(i,c)):f.n=c:f.v=c);try{if(u=2,o){if(i||(a="next"),t=o[a]){if(!(t=t.call(o,c)))throw TypeError("iterator result is not an object");if(!t.done)return t;c=t.value,i<2&&(i=0)}else 1===i&&(t=o.return)&&t.call(o),i<2&&(c=TypeError("The iterator does not provide a '"+a+"' method"),i=1);o=e}else if((t=(d=f.n<0)?c:n.call(r,f))!==l)break}catch(t){o=e,i=1,c=t}finally{u=1}}return{value:t,done:d}}}(n,a,o),!0),u}var l={};function i(){}function c(){}function u(){}t=Object.getPrototypeOf;var s=[][r]?t(t([][r]())):(It(t={},r,function(){return this}),t),d=u.prototype=i.prototype=Object.create(s);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,It(e,a,"GeneratorFunction")),e.prototype=Object.create(d),e}return c.prototype=u,It(d,"constructor",u),It(u,"constructor",c),c.displayName="GeneratorFunction",It(u,a,"GeneratorFunction"),It(d),It(d,a,"Generator"),It(d,r,function(){return this}),It(d,"toString",function(){return"[object Generator]"}),(Ot=function(){return{w:o,m:f}})()}function It(e,t,n,r){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}It=function(e,t,n,r){function o(t,n){It(e,t,function(e){return this._invoke(t,n,e)})}t?a?a(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(o("next",0),o("throw",1),o("return",2))},It(e,t,n,r)}function Pt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function At(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Pt(Object(n),!0).forEach(function(t){xt(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Pt(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function xt(e,t,n){return(t=function(e){var t=function(e){if("object"!=St(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=St(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==St(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Tt(e,t,n,r,a,o,l){try{var i=e[o](l),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,a)}function jt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o,l,i=[],c=!0,u=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=o.call(n)).done)&&(i.push(r.value),i.length!==t);c=!0);}catch(e){u=!0,a=e}finally{try{if(!c&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(u)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Ct(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ct(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ct(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var Dt=wp.element.useState;const Nt=function(){var e,t,n,r,a,o,l,i,c=(0,u.jE)(),f=(0,d.I)(Pe({queryKey:["all-settings"],queryFn:(i=Oe(_e().m(function e(){var t;return _e().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,(0,k.m9)("".concat(I,"/all_settings/"),{headers:{"X-WP-Nonce":x}});case 1:if(!(t=e.v).success){e.n=2;break}return e.a(2,t);case 2:throw new Error(t.error||"Failed to fetch settings");case 3:return e.a(2)}},e)})),function(){return i.apply(this,arguments)})},xe)),m=f.data,y=f.isLoading,h=f.error,w=(null==m?void 0:m.data)||{},R=jt(Dt(!1),2),_=R[0],S=R[1],O=jt(Dt("basics"),2),P=O[0],T=O[1],j=y||_,C={basics:"Basics",keywords:"Keywords (Tags)",consolidate:"Consolidate with Lightroom",extensions:"Extensions & Debug"}[P]||"Settings",D=null==w?void 0:w.wplr_use_taken_date,N=null==w?void 0:w.wplr_upload_folder,F=null==w?void 0:w.wplr_filename_accents,M=null==w?void 0:w.wplr_enable_keywords,L=null==w?void 0:w.wplr_sync_keywords,G=null!==(e=null==w?void 0:w.sync_keywords_options)&&void 0!==e?e:[],U=null!==(t=null==w?void 0:w.troubles_issues)&&void 0!==t?t:[],z=null==w?void 0:w.wplr_library_show_hierarchy,B=null==w?void 0:w.wplr_public_api,W=null!==(n=null==w?void 0:w.wplr_auth_token)&&void 0!==n&&n,q=null==w?void 0:w.wplr_qr,H=null==w?void 0:w.wplr_debugging_enabled,Y=null==w?void 0:w.wplr_catch_errors,V=null==w?void 0:w.wplr_debuglogs,K=null==w?void 0:w.wplr_check_same_file,X=null!==(r=null==w?void 0:w.extensions)&&void 0!==r?r:[],Q=null!==(a=null==w?void 0:w.wplr_media_organizer)&&void 0!==a&&a,$=null!==(o=null==w?void 0:w.wplr_media_library)&&void 0!==o&&o,J=null!==(l=null==w?void 0:w.wplr_media_modals)&&void 0!==l&&l,Z=null==w?void 0:w.wr2x_big_image_size_threshold,ee=function(){var e,t=(e=Ot().m(function e(t,n){var r;return Ot().w(function(e){for(;;)switch(e.p=e.n){case 0:return console.log({value:t,name:n}),c.setQueryData(["all-settings"],function(e){return e?At(At({},e),{},{data:At(At({},e.data),{},xt({},n,t))}):e}),S(!0),e.p=1,e.n=2,(0,k.Tb)("".concat(I,"/update_option"),{json:{name:n,value:t},nonce:x});case 2:e.n=4;break;case 3:e.p=3,r=e.v,alert(r.message);case 4:return e.p=4,S(!1),c.invalidateQueries(["all-settings"]),e.f(4);case 5:return e.a(2)}},e,null,[[1,3,4,5]])}),function(){var t=this,n=arguments;return new Promise(function(r,a){var o=e.apply(t,n);function l(e){Tt(o,r,a,l,i,"next",e)}function i(e){Tt(o,r,a,l,i,"throw",e)}l(void 0)})});return function(e,n){return t.apply(this,arguments)}}();return React.createElement(s.A,null,React.createElement(g.z,{nekoErrors:h?[h.message]:[]},React.createElement(v.n,{title:"Photo Engine",section:C,subtitle:"By Jordy Meow",isPro:A}),React.createElement(b.N,null,React.createElement(b.Y,{fullWidth:!0},React.createElement(ye.L,null,React.createElement(p.s,{p:!0},"If you wish to link your Lightroom with Photo Engine, you will need the ",React.createElement("a",{target:"_blank",href:"https://meowapps.com/plugin/wplr-sync/"},"WP/LR Sync Plugin for Lightroom"),". You can also use Photo Engine without Lightroom, by organizing your photos through folders and collections in the Media Organizer. Then, those folders and collections can be used by other plugins (such as ",React.createElement("a",{target:"_blank",href:"https://meowapps.com/plugin/meow-gallery/"},"Meow Gallery"),"), your theme, mobile apps, etc. The possibilities are endless! :)")),React.createElement(E._,{keepTabOnReload:!0,onChange:function(e,t,n){null!=t&&t.key&&T(t.key)}},React.createElement(E.V,{title:"Basics",key:"basics"},React.createElement(he,{busy:j,use_taken_date:D,upload_folder:N,filename_accents:F,troubles_issues:U,library_show_hierarchy:z,public_api:B,big_image_size_threshold:Z,check_same_file:K,extensions:X,auth_token:W,qr:q,updateOption:ee,media_organizer:Q,media_library:$,media_modals:J})),React.createElement(E.V,{title:"Keywords (Tags)",key:"keywords"},React.createElement(ze,{busy:j,enable_keywords:M,sync_keywords:L,sync_keywords_options:G,updateOption:ee})),React.createElement(E.V,{title:"Consolidate with Lightroom",key:"consolidate"},React.createElement(yt,{busy:j})),React.createElement(E.V,{title:"Extensions & Debug",key:"extensions"},React.createElement(kt,{busy:j,troubles_issues:U,extensions:X,debugging_enabled:H,catch_errors:Y,debuglogs:V,updateOption:ee})))))))};var Ft=n(1594),Mt="tabIndex",Lt="folderIds",Gt="galleryId",Ut="source",zt=function(){return localStorage.getItem(Lt)?JSON.parse(localStorage.getItem(Lt)):[]},Bt=function(e){null===e?localStorage.removeItem(Lt):localStorage.setItem(Lt,JSON.stringify(e))},Wt=function(e){null===e?localStorage.removeItem(Gt):localStorage.setItem(Gt,e)},qt="wp",Ht="lr",Yt="photo",Vt="folder",Kt="collection",Xt="copy",Qt="move",$t="grid",Jt="list",Zt=[20,40,60,80,100],en="unassigned",tn="gallery";function nn(e){return nn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},nn(e)}function rn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o,l,i=[],c=!0,u=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=o.call(n)).done)&&(i.push(r.value),i.length!==t);c=!0);}catch(e){u=!0,a=e}finally{try{if(!c&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(u)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return an(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?an(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function an(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function on(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function ln(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?on(Object(n),!0).forEach(function(t){cn(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):on(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function cn(e,t,n){return(t=function(e){var t=function(e){if("object"!=nn(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=nn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==nn(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function un(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",a=n.toStringTag||"@@toStringTag";function o(n,r,a,o){var c=r&&r.prototype instanceof i?r:i,u=Object.create(c.prototype);return sn(u,"_invoke",function(n,r,a){var o,i,c,u=0,s=a||[],d=!1,f={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,n){return o=t,i=0,c=e,f.n=n,l}};function p(n,r){for(i=n,c=r,t=0;!d&&u&&!a&&t<s.length;t++){var a,o=s[t],p=f.p,m=o[2];n>3?(a=m===r)&&(c=o[(i=o[4])?5:(i=3,3)],o[4]=o[5]=e):o[0]<=p&&((a=n<2&&p<o[1])?(i=0,f.v=r,f.n=o[1]):p<m&&(a=n<3||o[0]>r||r>m)&&(o[4]=n,o[5]=r,f.n=m,i=0))}if(a||n>1)return l;throw d=!0,r}return function(a,s,m){if(u>1)throw TypeError("Generator is already running");for(d&&1===s&&p(s,m),i=s,c=m;(t=i<2?e:c)||!d;){o||(i?i<3?(i>1&&(f.n=-1),p(i,c)):f.n=c:f.v=c);try{if(u=2,o){if(i||(a="next"),t=o[a]){if(!(t=t.call(o,c)))throw TypeError("iterator result is not an object");if(!t.done)return t;c=t.value,i<2&&(i=0)}else 1===i&&(t=o.return)&&t.call(o),i<2&&(c=TypeError("The iterator does not provide a '"+a+"' method"),i=1);o=e}else if((t=(d=f.n<0)?c:n.call(r,f))!==l)break}catch(t){o=e,i=1,c=t}finally{u=1}}return{value:t,done:d}}}(n,a,o),!0),u}var l={};function i(){}function c(){}function u(){}t=Object.getPrototypeOf;var s=[][r]?t(t([][r]())):(sn(t={},r,function(){return this}),t),d=u.prototype=i.prototype=Object.create(s);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,sn(e,a,"GeneratorFunction")),e.prototype=Object.create(d),e}return c.prototype=u,sn(d,"constructor",u),sn(u,"constructor",c),c.displayName="GeneratorFunction",sn(u,a,"GeneratorFunction"),sn(d),sn(d,a,"Generator"),sn(d,r,function(){return this}),sn(d,"toString",function(){return"[object Generator]"}),(un=function(){return{w:o,m:f}})()}function sn(e,t,n,r){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}sn=function(e,t,n,r){function o(t,n){sn(e,t,function(e){return this._invoke(t,n,e)})}t?a?a(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(o("next",0),o("throw",1),o("return",2))},sn(e,t,n,r)}function dn(e,t,n,r,a,o,l){try{var i=e[o](l),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,a)}function fn(e){return function(){var t=this,n=arguments;return new Promise(function(r,a){var o=e.apply(t,n);function l(e){dn(o,r,a,l,i,"next",e)}function i(e){dn(o,r,a,l,i,"throw",e)}l(void 0)})}}var pn,mn,yn,hn,gn,vn=zt(),bn=localStorage.getItem(Gt),En=localStorage.getItem(Ut),wn={accessor:"size",by:"desc"},Rn={folderId:null,collectionId:null,source:null},_n=0,kn={sort:wn,page:1,limit:20,busy:!1,apiErrors:null,mediaSection:"all",wpFoldersAndGalleries:[],lrFoldersAndGalleries:[],allMedias:[],unassignedEntries:[],galleryContent:null,folderContent:null,total:0,totalAllMedias:0,totalUnassignedEntries:0,expandedFolderIds:vn,showAllMedias:!bn,showUnassignedEntries:!1,selected:{parentId:null,folderId:!bn&&vn.length?vn[vn.length-1]:null,galleryId:bn,source:En,expandedFolderIds:vn},dragging:{action:null,items:[],itemParent:null,itemType:null},pressShift:!1,pressCtrl:!1,modals:{deleteAll:!1,trashAll:!1,recoverAll:!1,createNewCollection:!1,updateCollection:!1,deleteCollection:!1,removePhoto:!1,removePhotos:!1,editPhoto:!1,createNewFolder:!1,updateFolder:!1,deleteFolder:!1},modalData:Rn,mutateWpFoldersAndGalleries:(gn=fn(un().m(function e(){return un().w(function(e){for(;;)if(0===e.n)return e.a(2)},e)})),function(){return gn.apply(this,arguments)}),mutateLrFoldersAndGalleries:(hn=fn(un().m(function e(){return un().w(function(e){for(;;)if(0===e.n)return e.a(2)},e)})),function(){return hn.apply(this,arguments)}),mutateAllMedias:(yn=fn(un().m(function e(){return un().w(function(e){for(;;)if(0===e.n)return e.a(2)},e)})),function(){return yn.apply(this,arguments)}),mutateUnassignedEntries:(mn=fn(un().m(function e(){return un().w(function(e){for(;;)if(0===e.n)return e.a(2)},e)})),function(){return mn.apply(this,arguments)}),mutateGalleryContent:(pn=fn(un().m(function e(){return un().w(function(e){for(;;)if(0===e.n)return e.a(2)},e)})),function(){return pn.apply(this,arguments)})},Sn="PAGE_UPDATED",On="LIMIT_UPDATED",In="SORT_UPDATED",Pn="TOTAL_UPDATED",An="MEDIA_SECTION_UPDATED",xn="TOTAL_ALL_MEDIAS_UPDATED",Tn="TOTAL_UNASSIGNED_ENTRIES_UPDATED",jn="TOGGLE_MODAL",Cn="RESET_MODAL",Dn="PUSH_BUSY",Nn="POP_BUSY",Fn="WP_FOLDERS_AND_GALLERIES_UPDATED",Mn="LR_FOLDERS_AND_GALLERIES_UPDATED",Ln="ALL_MEDIAS_UPDATED",Gn="UNASSIGNED_ENTRIES_UPDATED",Un="GALLERY_CONTENT_UPDATED",zn="ERROR_UPDATED",Bn="SET_WP_FOLDERS_AND_GALLERIES_MUTATE",Wn="SET_LR_FOLDERS_AND_GALLERIES_MUTATE",qn="SET_ALL_MEDIAS_MUTATE",Hn="SET_UNASSIGNED_ENTRIES_MUTATE",Yn="SET_GALLERY_CONTENT_MUTATE",Vn="SHOW_ALL_MEDIAS_UPDATED",Kn="SHOW_UNASSIGNED_ENTRIES_UPDATED",Xn="SELECTED_UPDATED",Qn="DRAGGING_UPDATED",$n="PRESS_SHIFT_UPDATED",Jn="PRESS_CTRL_UPDATED",Zn="FOLDER_CONTENT_UPDATED",er=function(e,t){switch(t.type){case Fn:var n=t.wpFoldersAndGalleries;return ln(ln({},e),{},{wpFoldersAndGalleries:n});case Bn:var r=t.mutateWpFoldersAndGalleries;return ln(ln({},e),{},{mutateWpFoldersAndGalleries:r});case Mn:var a=t.lrFoldersAndGalleries;return ln(ln({},e),{},{lrFoldersAndGalleries:a});case Wn:var o=t.mutateLrFoldersAndGalleries;return ln(ln({},e),{},{mutateLrFoldersAndGalleries:o});case Ln:var l=t.allMedias;return ln(ln({},e),{},{allMedias:l});case qn:var i=t.mutateAllMedias;return ln(ln({},e),{},{mutateAllMedias:i});case Gn:var c=t.unassignedEntries;return ln(ln({},e),{},{unassignedEntries:c});case Hn:var u=t.mutateUnassignedEntries;return ln(ln({},e),{},{mutateUnassignedEntries:u});case Un:var s=t.galleryContent;return ln(ln({},e),{},{galleryContent:s});case Yn:var d=t.mutateGalleryContent;return ln(ln({},e),{},{mutateGalleryContent:d});case zn:var f=t.apiErrors;return ln(ln({},e),{},{apiErrors:f});case Sn:var p=t.page;return ln(ln({},e),{},{page:p});case On:var m=t.limit;return ln(ln({},e),{},{limit:m});case In:var y=t.sort,h=void 0===y?wn:y;return ln(ln({},e),{},{sort:h});case Pn:var g=t.total;return ln(ln({},e),{},{total:g});case An:var v=t.mediaSection;return ln(ln({},e),{},{mediaSection:v});case xn:var b=t.totalAllMedias;return ln(ln({},e),{},{totalAllMedias:b});case Tn:var E=t.totalUnassignedEntries;return ln(ln({},e),{},{totalUnassignedEntries:E});case jn:var w=t.modal,R=t.enable,_=t.data;if(void 0===e.modals[w])return alert("The modal ".concat(w," doesn't exist.")),console.error("The modal ".concat(w," doesn't exist.")),e;void 0===R&&(R=!e.modals[w]);var k=ln({},e);return k.modals=ln({},k.modals),k.modals[w]=R,_&&(k.modalData=_),k;case Cn:var S=Object.fromEntries(Object.entries(e.modals).map(function(e){return[rn(e,1)[0],!1]}));return ln(ln({},e),{},{modals:S,modalData:Rn});case Dn:var O=t.status,I=void 0===O?"":O;return ln(ln({},e),{},{busy:++_n>0,status:I});case Nn:var P=t.status,A=void 0===P?"":P;return ln(ln({},e),{},{busy:--_n>0,status:A});case Vn:var x=t.showAllMedias;return ln(ln({},e),{},{showAllMedias:x});case Kn:var T=t.showUnassignedEntries;return ln(ln({},e),{},{showUnassignedEntries:T});case Xn:var j=t.selected;return ln(ln({},e),{},{selected:j});case Qn:var C=t.dragging;return ln(ln({},e),{},{dragging:C});case $n:var D=t.pressShift;return ln(ln({},e),{},{pressShift:D});case Jn:var N=t.pressCtrl;return ln(ln({},e),{},{pressCtrl:N});case Zn:var F=t.folderContent;return ln(ln({},e),{},{folderContent:F});default:return e}},tr=(0,Ft.createContext)(),nr=function(e){var t=e.children,n=rn((0,Ft.useReducer)(er,kn),2),r=n[0],a=n[1],o=(0,u.jE)(),l=r.sort,i=r.page,c=r.limit,s=r.mediaSection,f=function(e,t,n,r,a){var o,l=function(){switch(r){case"unassigned":return(0,k.mR)("".concat(I,"/unassigned_entries"),{limit:n,skip:(t-1)*n,orderBy:e.accessor,order:e.by});case"gallery":return(0,k.mR)("".concat(I,"/gallery_content"),{collectionId:a,limit:n,skip:(t-1)*n,orderBy:e.accessor,order:e.by});default:return(0,k.mR)("".concat(I,"/all_media/"),{limit:n,skip:(t-1)*n,orderBy:e.accessor,order:e.by})}};return(0,d.I)(Pe({queryKey:["media-section",r,e,t,n,a],queryFn:(o=Oe(_e().m(function e(){var t,n;return _e().w(function(e){for(;;)switch(e.n){case 0:return t=l(),e.n=1,(0,k.m9)(t,{headers:{"X-WP-Nonce":x}});case 1:if(!(n=e.v).success){e.n=2;break}return e.a(2,n);case 2:throw new Error(n.error||"Failed to fetch media section");case 3:return e.a(2)}},e)})),function(){return o.apply(this,arguments)})},xe))}(l,i,c,s,r.selected.galleryId),p=f.data,m=f.isLoading,y=f.error,h=(0,Ft.useMemo)(function(){return(null==p?void 0:p.data)||[]},[null==p?void 0:p.data]),g=(null==p?void 0:p.total)||0,v=(0,Ft.useCallback)(function(){o.invalidateQueries(["media-section",s])},[o,s]);(0,Ft.useEffect)(function(){switch(s){case en:a({type:Hn,mutateUnassignedEntries:v});break;case tn:a({type:Yn,mutateGalleryContent:v});break;default:a({type:qn,mutateAllMedias:v})}},[v,s]),(0,Ft.useEffect)(function(){switch(s){case en:a({type:Gn,unassignedEntries:h});break;case tn:a({type:Un,galleryContent:h});break;default:a({type:Ln,allMedias:h})}},[h,s]),(0,Ft.useEffect)(function(){switch(s){case en:a({type:Tn,totalUnassignedEntries:g});break;case tn:a({type:Pn,total:g});break;default:a({type:xn,totalAllMedias:g})}},[g,s]),(0,Ft.useEffect)(function(){a({type:m?Dn:Nn})},[m]),(0,Ft.useEffect)(function(){a({type:zn,apiError:y})},[y]);var b,E=(0,d.I)(Pe({queryKey:["wp-hierarchy"],queryFn:(b=Oe(_e().m(function e(){var t;return _e().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,(0,k.m9)("".concat(I,"/wp_hierarchy/"),{headers:{"X-WP-Nonce":x}});case 1:if(!(t=e.v).success){e.n=2;break}return e.a(2,t);case 2:throw new Error(t.error||"Failed to fetch WP hierarchy");case 3:return e.a(2)}},e)})),function(){return b.apply(this,arguments)})},xe)),w=E.data,R=E.isLoading,_=E.error,S=(0,Ft.useMemo)(function(){return(null==w?void 0:w.data)||[]},[null==w?void 0:w.data]),O=(0,Ft.useCallback)(function(){o.invalidateQueries(["wp-hierarchy"])},[o]);(0,Ft.useEffect)(function(){a({type:Bn,mutateWpFoldersAndGalleries:O})},[O]),(0,Ft.useEffect)(function(){a({type:R?Dn:Nn})},[R]),(0,Ft.useEffect)(function(){a({type:Fn,wpFoldersAndGalleries:S})},[S]),(0,Ft.useEffect)(function(){a({type:zn,apiError:_})},[_]);var P,A=(0,d.I)(Pe({queryKey:["lr-hierarchy"],queryFn:(P=Oe(_e().m(function e(){var t;return _e().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,(0,k.m9)("".concat(I,"/lr_hierarchy/"),{headers:{"X-WP-Nonce":x}});case 1:if(!(t=e.v).success){e.n=2;break}return e.a(2,t);case 2:throw new Error(t.error||"Failed to fetch LR hierarchy");case 3:return e.a(2)}},e)})),function(){return P.apply(this,arguments)})},xe)),T=A.data,j=A.isLoading,C=A.error,D=(0,Ft.useMemo)(function(){return(null==T?void 0:T.data)||[]},[null==T?void 0:T.data]),N=(0,Ft.useCallback)(function(){o.invalidateQueries(["lr-hierarchy"])},[o]);return(0,Ft.useEffect)(function(){a({type:Wn,mutateLrFoldersAndGalleries:N})},[N]),(0,Ft.useEffect)(function(){a({type:j?Dn:Nn})},[j]),(0,Ft.useEffect)(function(){a({type:Mn,lrFoldersAndGalleries:D})},[D]),(0,Ft.useEffect)(function(){a({type:zn,apiError:C})},[C]),(0,Ft.useEffect)(function(){var e;r.dragging.items.length||(Wt(r.selected.galleryId),null===(e=r.selected.source)?localStorage.removeItem(Ut):localStorage.setItem(Ut,e),r.selected.galleryId||a({type:Un,galleryContent:null}))},[r.selected.galleryId,r.selected.source,r.dragging.items.length]),React.createElement(tr.Provider,{value:[r,a]},t)};const rr=function(){var e={},t=rn((0,Ft.useContext)(tr),2),n=t[0],r=t[1];return e.setMediaSection=function(e){r({type:An,mediaSection:e})},e.setGalleryContent=function(e){r({type:Un,galleryContent:e})},e.setTotal=function(e){r({type:Pn,total:e})},e.setPage=function(e){r({type:Sn,page:e})},e.setLimit=function(e){r({type:On,limit:e})},e.setSort=function(e){r({type:In,sort:e})},e.setSelected=function(e){r({type:Xn,selected:e})},e.setDragging=function(e){r({type:Qn,dragging:e})},e.setPressShift=function(e){r({type:$n,pressShift:e})},e.setPressCtrl=function(e){r({type:Jn,pressCtrl:e})},e.setFolderContent=function(e){r({type:Zn,folderContent:e})},e.toggleModal=function(e){r({type:jn,modal:e,enable:!(arguments.length>1&&void 0!==arguments[1])||arguments[1],data:arguments.length>2?arguments[2]:void 0})},e.resetModal=function(){r({type:Cn})},e.pushBusy=function(){r({type:Dn})},e.popBusy=function(){r({type:Nn})},e.setShowAllMedias=function(e){r({type:Vn,showAllMedias:e})},e.setShowUnassignedEntries=function(e){r({type:Kn,showUnassignedEntries:e})},e.createNewFolder=function(){var e=fn(un().m(function e(t,a,o){var l,i;return un().w(function(e){for(;;)switch(e.p=e.n){case 0:return l=!1,r({type:Dn}),e.p=1,e.n=2,(0,k.Tb)("".concat(I,"/create_folder"),{json:{name:t,parent_folder_id:a,source:o},nonce:x});case 2:if(e.v.success){e.n=3;break}throw new Error("Failed to create a new folder.");case 3:o===Ht?n.mutateLrFoldersAndGalleries():o===qt&&n.mutateWpFoldersAndGalleries(),l=!0,e.n=5;break;case 4:e.p=4,i=e.v,alert(i.message);case 5:return e.p=5,r({type:Cn}),r({type:Nn}),e.f(5);case 6:return e.a(2,l)}},e,null,[[1,4,5,6]])}));return function(t,n,r){return e.apply(this,arguments)}}(),e.updateFolder=function(){var e=fn(un().m(function e(t,a,o){var l,i;return un().w(function(e){for(;;)switch(e.p=e.n){case 0:return l=!1,r({type:Dn}),e.p=1,e.n=2,(0,k.Tb)("".concat(I,"/update_folder"),{json:{id:t,name:a},nonce:x});case 2:if(e.v.success){e.n=3;break}throw new Error("Failed to update the folder.");case 3:o===Ht?n.mutateLrFoldersAndGalleries():o===qt&&n.mutateWpFoldersAndGalleries(),l=!0,e.n=5;break;case 4:e.p=4,i=e.v,alert(i.message);case 5:return e.p=5,r({type:Cn}),r({type:Nn}),e.f(5);case 6:return e.a(2,l)}},e,null,[[1,4,5,6]])}));return function(t,n,r){return e.apply(this,arguments)}}(),e.deleteFolder=function(){var e=fn(un().m(function e(t,a){var o,l;return un().w(function(e){for(;;)switch(e.p=e.n){case 0:return o=!1,r({type:Dn}),e.p=1,e.n=2,(0,k.Tb)("".concat(I,"/delete_folder"),{json:{id:t},nonce:x});case 2:if(e.v.success){e.n=3;break}throw new Error("Failed to delete the folder.");case 3:a===Ht?n.mutateLrFoldersAndGalleries():a===qt&&n.mutateWpFoldersAndGalleries(),r({type:Xn,selected:ln(ln({},n.selected),{},{folderId:n.selected.parentId})}),o=!0,e.n=5;break;case 4:e.p=4,l=e.v,alert(l.message);case 5:return e.p=5,r({type:Cn}),r({type:Nn}),e.f(5);case 6:return e.a(2,o)}},e,null,[[1,4,5,6]])}));return function(t,n){return e.apply(this,arguments)}}(),e.folderDrop=function(){var e=fn(un().m(function e(t){var a,o,l,i,c,u,s;return un().w(function(e){for(;;)switch(e.p=e.n){case 0:if(o=!1,l=ln({},n.selected),i=ln({},n.dragging),c=null===(a=i.items)||void 0===a?void 0:a.map(function(e){return e.id}),u=t?null:l.folderId,i.itemType!==Yt&&!c.includes(u)){e.n=1;break}return r({type:Xn,selected:ln(ln({},l),{},{galleryId:null})}),r({type:$n,pressShift:!1}),r({type:Jn,pressCtrl:!1}),e.a(2,o);case 1:return r({type:Dn}),e.p=2,e.n=3,(0,k.Tb)("".concat(I,"/move_collection"),{json:{ids:c,parent_id:u},nonce:x});case 3:if(e.v.success){e.n=4;break}throw new Error("Failed to move the folder / collection.");case 4:n.mutateWpFoldersAndGalleries(),i.itemType===Kt&&r({type:Xn,selected:ln(ln({},l),{},{folderId:null,galleryId:c[c.length-1]})}),o=!0,e.n=6;break;case 5:e.p=5,s=e.v,alert(s.message);case 6:return e.p=6,r({type:$n,pressShift:!1}),r({type:Jn,pressCtrl:!1}),r({type:Nn}),e.f(6);case 7:return e.a(2,o)}},e,null,[[2,5,6,7]])}));return function(t){return e.apply(this,arguments)}}(),e.createCollection=function(){var e=fn(un().m(function e(t,a,o){var l,i;return un().w(function(e){for(;;)switch(e.p=e.n){case 0:return l=!1,r({type:Dn}),e.p=1,e.n=2,(0,k.Tb)("".concat(I,"/create_gallery"),{json:{name:t,parent_folder_id:a,source:o},nonce:x});case 2:if(e.v.success){e.n=3;break}throw new Error("Failed to create a new collection.");case 3:o===Ht?n.mutateLrFoldersAndGalleries():o===qt&&n.mutateWpFoldersAndGalleries(),l=!0,e.n=5;break;case 4:e.p=4,i=e.v,alert(i.message);case 5:return e.p=5,r({type:Cn}),r({type:Nn}),e.f(5);case 6:return e.a(2,l)}},e,null,[[1,4,5,6]])}));return function(t,n,r){return e.apply(this,arguments)}}(),e.updateCollection=function(){var e=fn(un().m(function e(t,a,o){var l,i;return un().w(function(e){for(;;)switch(e.p=e.n){case 0:return l=!1,r({type:Dn}),e.p=1,e.n=2,(0,k.Tb)("".concat(I,"/update_gallery"),{json:{id:t,name:a},nonce:x});case 2:if(e.v.success){e.n=3;break}throw new Error("Failed to update the collection.");case 3:o===Ht?n.mutateLrFoldersAndGalleries():o===qt&&n.mutateWpFoldersAndGalleries(),l=!0,e.n=5;break;case 4:e.p=4,i=e.v,alert(i.message);case 5:return e.p=5,r({type:Cn}),r({type:Nn}),e.f(5);case 6:return e.a(2,l)}},e,null,[[1,4,5,6]])}));return function(t,n,r){return e.apply(this,arguments)}}(),e.deleteCollection=function(){var e=fn(un().m(function e(t,a){var o,l;return un().w(function(e){for(;;)switch(e.p=e.n){case 0:return o=!1,r({type:Dn}),e.p=1,e.n=2,(0,k.Tb)("".concat(I,"/delete_gallery"),{json:{id:t},nonce:x});case 2:if(e.v.success){e.n=3;break}throw new Error("Failed to delete the gallery.");case 3:a===Ht?n.mutateLrFoldersAndGalleries():a===qt&&n.mutateWpFoldersAndGalleries(),n.mutateUnassignedEntries(),r({type:Xn,selected:ln(ln({},n.selected),{},{galleryId:null})}),o=!0,e.n=5;break;case 4:e.p=4,l=e.v,alert(l.message);case 5:return e.p=5,r({type:Cn}),r({type:Nn}),e.f(5);case 6:return e.a(2,o)}},e,null,[[1,4,5,6]])}));return function(t,n){return e.apply(this,arguments)}}(),e.collectionDrop=fn(un().m(function e(){var t,a,o,l,i,c,u,s,d;return un().w(function(e){for(;;)switch(e.p=e.n){case 0:if(a=!1,o=ln({},n.selected),l=ln({},n.dragging),i=null===(t=l.items)||void 0===t?void 0:t.map(function(e){return e.ID}),c=l.itemParent,u=l.action,l.itemType===Yt&&o.galleryId!==c&&u){e.n=1;break}return r({type:Qn,dragging:{action:null,itemType:null,itemParent:null,items:[]}}),r({type:$n,pressShift:!1}),r({type:Jn,pressCtrl:!1}),e.a(2,a);case 1:if(r({type:Dn}),e.p=2,u!==Qt){e.n=4;break}return e.n=3,(0,k.Tb)("".concat(I,"/move_media"),{json:{ids:i,new_col_id:o.galleryId,current_col_id:c},nonce:x});case 3:s=e.v,e.n=6;break;case 4:return e.n=5,(0,k.Tb)("".concat(I,"/copy_media"),{json:{ids:i,new_col_id:o.galleryId},nonce:x});case 5:s=e.v;case 6:if(s.success){e.n=7;break}throw new Error("Failed to move the folder / collection.");case 7:n.mutateWpFoldersAndGalleries(),n.mutateUnassignedEntries(),r({type:Xn,selected:ln(ln({},o),{},{galleryId:l.itemParent})}),a=!0,e.n=9;break;case 8:e.p=8,d=e.v,alert(d.message);case 9:return e.p=9,r({type:Qn,dragging:{action:null,itemType:null,itemParent:null,items:[]}}),r({type:$n,pressShift:!1}),r({type:Jn,pressCtrl:!1}),r({type:Nn}),e.f(9);case 10:return e.a(2,a)}},e,null,[[2,8,9,10]])})),e.updatePhoto=function(){var e=fn(un().m(function e(t,a){var o,l;return un().w(function(e){for(;;)switch(e.p=e.n){case 0:return o=!1,r({type:Dn}),e.p=1,e.n=2,(0,k.Tb)("".concat(I,"/update_media"),{json:ln({id:t},a),nonce:x});case 2:if(e.v.success){e.n=3;break}throw new Error("Failed to update the photo.");case 3:if(n.mutateWpFoldersAndGalleries(),!n.selected.galleryId){e.n=5;break}return e.n=4,n.mutateGalleryContent();case 4:e.n=6;break;case 5:n.mutateAllMedias(),n.mutateUnassignedEntries();case 6:o=!0,e.n=8;break;case 7:e.p=7,l=e.v,alert(l.message);case 8:return e.p=8,r({type:Cn}),r({type:Nn}),e.f(8);case 9:return e.a(2,o)}},e,null,[[1,7,8,9]])}));return function(t,n){return e.apply(this,arguments)}}(),e.removePhoto=function(){var e=fn(un().m(function e(t,a){var o,l;return un().w(function(e){for(;;)switch(e.p=e.n){case 0:return o=!1,r({type:Dn}),e.p=1,e.n=2,(0,k.Tb)("".concat(I,"/remove_media"),{json:{ids:t,current_col_id:a},nonce:x});case 2:if(e.v.success){e.n=3;break}throw new Error("Failed to remove the photo.");case 3:n.mutateWpFoldersAndGalleries(),n.mutateUnassignedEntries(),n.mutateGalleryContent(),o=!0,e.n=5;break;case 4:e.p=4,l=e.v,alert(l.message);case 5:return e.p=5,r({type:Qn,dragging:{action:null,itemType:null,itemParent:null,items:[]}}),r({type:$n,pressShift:!1}),r({type:Jn,pressCtrl:!1}),r({type:Cn}),r({type:Nn}),e.f(5);case 6:return e.a(2,o)}},e,null,[[1,4,5,6]])}));return function(t,n){return e.apply(this,arguments)}}(),e.updateFeaturedImage=function(){var e=fn(un().m(function e(t,a){var o,l;return un().w(function(e){for(;;)switch(e.p=e.n){case 0:return o=!1,r({type:Dn}),e.p=1,e.n=2,(0,k.Tb)("".concat(I,"/update_featured_image"),{json:{collection_id:t,featured_image_id:a},nonce:x});case 2:if(e.v.success){e.n=3;break}throw new Error("Failed to update the featured image.");case 3:if(n.selected.source!==qt){e.n=5;break}return e.n=4,n.mutateWpFoldersAndGalleries();case 4:e.n=6;break;case 5:if(n.selected.source!==Ht){e.n=6;break}return e.n=6,n.mutateLrFoldersAndGalleries();case 6:o=!0,e.n=8;break;case 7:e.p=7,l=e.v,alert(l.message);case 8:return e.p=8,r({type:Nn}),e.f(8);case 9:return e.a(2,o)}},e,null,[[1,7,8,9]])}));return function(t,n){return e.apply(this,arguments)}}(),ln(ln({},n),e)};var ar,or,lr,ir,cr=n(3784),ur=n(9990),sr=n(5123),dr=n(3770),fr=wp.element,pr=(fr.useState,fr.useEffect,function(e,t){if(!e)return null;if(e.some(function(e){return e.id===t}))return e.find(function(e){return e.id===t});var n=!1;return e.some(function(e){if(e.children)return n=pr(e.children,t)}),n}),mr=function(e){return e?Xt:Qt};function yr(e){return yr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},yr(e)}function hr(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",a=n.toStringTag||"@@toStringTag";function o(n,r,a,o){var c=r&&r.prototype instanceof i?r:i,u=Object.create(c.prototype);return gr(u,"_invoke",function(n,r,a){var o,i,c,u=0,s=a||[],d=!1,f={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,n){return o=t,i=0,c=e,f.n=n,l}};function p(n,r){for(i=n,c=r,t=0;!d&&u&&!a&&t<s.length;t++){var a,o=s[t],p=f.p,m=o[2];n>3?(a=m===r)&&(c=o[(i=o[4])?5:(i=3,3)],o[4]=o[5]=e):o[0]<=p&&((a=n<2&&p<o[1])?(i=0,f.v=r,f.n=o[1]):p<m&&(a=n<3||o[0]>r||r>m)&&(o[4]=n,o[5]=r,f.n=m,i=0))}if(a||n>1)return l;throw d=!0,r}return function(a,s,m){if(u>1)throw TypeError("Generator is already running");for(d&&1===s&&p(s,m),i=s,c=m;(t=i<2?e:c)||!d;){o||(i?i<3?(i>1&&(f.n=-1),p(i,c)):f.n=c:f.v=c);try{if(u=2,o){if(i||(a="next"),t=o[a]){if(!(t=t.call(o,c)))throw TypeError("iterator result is not an object");if(!t.done)return t;c=t.value,i<2&&(i=0)}else 1===i&&(t=o.return)&&t.call(o),i<2&&(c=TypeError("The iterator does not provide a '"+a+"' method"),i=1);o=e}else if((t=(d=f.n<0)?c:n.call(r,f))!==l)break}catch(t){o=e,i=1,c=t}finally{u=1}}return{value:t,done:d}}}(n,a,o),!0),u}var l={};function i(){}function c(){}function u(){}t=Object.getPrototypeOf;var s=[][r]?t(t([][r]())):(gr(t={},r,function(){return this}),t),d=u.prototype=i.prototype=Object.create(s);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,gr(e,a,"GeneratorFunction")),e.prototype=Object.create(d),e}return c.prototype=u,gr(d,"constructor",u),gr(u,"constructor",c),c.displayName="GeneratorFunction",gr(u,a,"GeneratorFunction"),gr(d),gr(d,a,"Generator"),gr(d,r,function(){return this}),gr(d,"toString",function(){return"[object Generator]"}),(hr=function(){return{w:o,m:f}})()}function gr(e,t,n,r){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}gr=function(e,t,n,r){function o(t,n){gr(e,t,function(e){return this._invoke(t,n,e)})}t?a?a(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(o("next",0),o("throw",1),o("return",2))},gr(e,t,n,r)}function vr(e,t,n,r,a,o,l){try{var i=e[o](l),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,a)}function br(e){return function(){var t=this,n=arguments;return new Promise(function(r,a){var o=e.apply(t,n);function l(e){vr(o,r,a,l,i,"next",e)}function i(e){vr(o,r,a,l,i,"throw",e)}l(void 0)})}}function Er(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function wr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Er(Object(n),!0).forEach(function(t){Rr(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Er(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Rr(e,t,n){return(t=function(e){var t=function(e){if("object"!=yr(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=yr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==yr(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _r(e){return function(e){if(Array.isArray(e))return Or(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Sr(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function kr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o,l,i=[],c=!0,u=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=o.call(n)).done)&&(i.push(r.value),i.length!==t);c=!0);}catch(e){u=!0,a=e}finally{try{if(!c&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(u)throw a}}return i}}(e,t)||Sr(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Sr(e,t){if(e){if("string"==typeof e)return Or(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Or(e,t):void 0}}function Or(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function Ir(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var Pr=wp.element,Ar=Pr.useState,xr=Pr.useMemo,Tr=Pr.useEffect,jr=j.Ay.div(ar||(ar=Ir(["\n  \n"]))),Cr=j.Ay.p(or||(or=Ir(["\n  padding: 10px;\n  margin: -5px 0 0 0;\n  font-size: 12px;\n"]))),Dr=j.Ay.div(lr||(lr=Ir(["\n  background: var(--neko-main-color);\n  color: white;\n  cursor: pointer;\n  font-size: 13px;\n  line-height: 22px;\n  padding: 0 13px;\n"]))),Nr=j.Ay.div(ir||(ir=Ir(["\n  padding: 10px 10px 5px 5px;\n"])));const Fr=function(e){var t=e.activeTabIndex,n=e.onTabChange,r=e.isPurePhotoEngine,a=rr(),o=a.wpFoldersAndGalleries,l=a.lrFoldersAndGalleries,i=a.busy,c=a.showAllMedias,u=a.showUnassignedEntries,s=a.selected,d=a.dragging,f=a.pressShift,m=a.modals,y=a.modalData,h=rr(),g=h.setShowAllMedias,v=h.setSelected,b=h.setDragging,E=h.setPressShift,R=h.setPressCtrl,_=h.toggleModal,k=h.resetModal,S=h.setPage,O=h.setShowUnassignedEntries,I=h.setFolderContent,P=h.setGalleryContent,A=h.createNewFolder,x=h.updateFolder,T=h.deleteFolder,j=h.createCollection,C=h.updateCollection,D=h.deleteCollection,N=h.collectionDrop,F=h.folderDrop,M=h.setMediaSection,L=kr(Ar(""),2),G=L[0],U=L[1],z=kr(Ar(""),2),B=z[0],W=z[1];Tr(function(){r||(v(e.selected),g(e.showAllMedias))},[r,e.selected,e.showAllMedias]);var q=r,H=d.itemType===Yt,Y=d.itemType===Kt,V=d.itemType===Vt,K=y.source===Ht,X=y.folderId?pr(K?l:o,y.folderId):null,Q=y.collectionId?pr(K?l:o,y.collectionId):null,$=function(e,t){var n=s.expandedFolderIds?_r(s.expandedFolderIds):[];e.id===s.folderId&&(n=s.expandedFolderIds.includes(e.id)?s.expandedFolderIds.filter(function(t){return t!==e.id}):[].concat(_r(s.expandedFolderIds),[e.id])),v(wr(wr({},s),{},{folderId:e.id,source:e.source,parentId:t,expandedFolderIds:n}));var r=zt(),a=r.length?r[r.length-1]:null;e.id!==a&&Bt(a===t?[].concat(_r(r),[e.id]):[e.id])},J=function(e){_("createNewFolder",!0,wr(wr({},y),{},{folderId:e?e.id:null,source:qt})),v(wr(wr({},s),{},{folderId:e?e.id:null,source:qt}))},Z=function(){var e=br(hr().m(function e(){return hr().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,A(G,y.folderId,y.source);case 1:e.v&&U("");case 2:return e.a(2)}},e)}));return function(){return e.apply(this,arguments)}}(),ee=function(){var e=br(hr().m(function e(t){return hr().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,x(t,G,y.source);case 1:e.v&&U("");case 2:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}(),te=function(){var e=br(hr().m(function e(t){return hr().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,T(t,y.source);case 1:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}(),ne=function(t){v(wr(wr({},s),{},{folderId:null,galleryId:t.id,source:t.source})),b({action:null,itemType:null,itemParent:null,items:[]}),E(!1),R(!1),S(1),M(tn),e.onCollectionClick&&e.onCollectionClick(t)},re=function(e){_("createNewCollection",!0,wr(wr({},y),{},{folderId:e?e.id:null,source:qt})),v(wr(wr({},s),{},{folderId:e?e.id:null,source:qt}))},ae=function(){var e=br(hr().m(function e(){return hr().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,j(B,y.folderId,y.source);case 1:e.v&&W("");case 2:return e.a(2)}},e)}));return function(){return e.apply(this,arguments)}}(),oe=function(){var e=br(hr().m(function e(t){return hr().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,C(t,B,y.source);case 1:e.v&&W("");case 2:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}(),le=function(){var e=br(hr().m(function e(t){return hr().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,D(t,y.source);case 1:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}(),ie=function(e,t,n,r,a){b({action:mr(r),itemType:Kt,itemParent:n,items:t}),v(wr(wr({},a),{},{folderId:n}))},ce=function(e){b({action:null,itemType:null,itemParent:null,items:[]}),E(!1),R(!1)},ue=function(e,t,n){e.preventDefault(),n!==t&&e.target.click&&v(wr(wr({},s),{},{galleryId:t,source:qt}))},se=function(e,t,n){v(wr(wr({},t),{},H?{galleryId:n.itemParent}:{folderId:n.itemParent}))},de=function(){var e=br(hr().m(function e(t){return hr().w(function(e){for(;;)switch(e.n){case 0:return t.preventDefault(),e.n=1,N();case 1:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}(),fe=function(e,t,n,r,a){b({action:mr(r),itemType:Vt,itemParent:n,items:t}),v(wr(wr({},a),{},{folderId:n}))},pe=function(){b({action:null,itemType:null,itemParent:null,items:[]})},me=function(e,t,n){e.preventDefault(),n!==t&&e.target.click&&e.target.click()},ye=function(e,t,n){v(wr(wr({},t),{},{folderId:n.itemParent}))},he=function(){var e=br(hr().m(function e(t){var n,r=arguments;return hr().w(function(e){for(;;)switch(e.n){case 0:return n=r.length>1&&void 0!==r[1]&&r[1],t.preventDefault(),e.n=1,F(n);case 1:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}(),ge=function(){v({parentId:null,folderId:null,galleryId:null,source:null}),g(!0),M("all"),e.onAllMediaEntriesClick&&e.onAllMediaEntriesClick()},be=function(e,t){return r?React.createElement("div",{style:{display:"flex",alignItems:"center"}},React.createElement(cr.z,{icon:"folder-plus",onClick:function(){return J(e)},width:"20",height:"20",color:"var(--neko-gray-60)",hoverColor:"var(--neko-green)",disabled:t}),React.createElement(cr.z,{icon:"image-plus",onClick:function(){return re(e)},width:"20",height:"20",color:"var(--neko-gray-60)",hoverColor:"var(--neko-green)",disabled:t}),React.createElement(cr.z,{icon:"pencil",onClick:function(){return function(e){_("updateFolder",!0,wr(wr({},y),{},{folderId:e.id,source:qt})),v(wr(wr({},s),{},{folderId:e.id,source:qt}))}(e)},width:"20",height:"20",color:"var(--neko-gray-60)",hoverColor:"var(--neko-green)",disabled:t})):null},Ee=function(e,t){return r?React.createElement("div",{style:{display:"flex",alignItems:"center"}},React.createElement(cr.z,{icon:"pencil",onClick:function(){return function(e){_("updateCollection",!0,wr(wr({},y),{},{collectionId:e?e.id:null,source:qt})),v(wr(wr({},s),{},{galleryId:e.id,source:qt}))}(e)},width:"20",height:"20",color:"var(--neko-gray-60)",hoverColor:"var(--neko-green)",disabled:t})):null},we=function(e){var t;return React.createElement("div",{style:{display:"flex",alignItems:"center"}},React.createElement(p.s,{style:{color:"var(--neko-gray-60)",marginRight:"2px"}},null==e||null===(t=e.children)||void 0===t?void 0:t.length))},Re=function(e,t,n,r,a){return e.children.length?e.is_folder?e.children.map(function(o){var l,i,c=null===(l=n.items)||void 0===l?void 0:l.some(function(e){return e.id===o.id});if(o.is_collection){var u=t.galleryId===o.id&&!n.action,s=H&&t.galleryId===o.id||Y&&c;return React.createElement(ve.R,{key:o.id,title:o.name,icon:"gallery",dragging:s,draggable:q&&!a,onDragStart:function(n){return ie(0,[o],e.id,r,t)},onDragEnd:ce,onDragOver:function(e){return ue(e,o.id,t.galleryId)},onDrop:de,onDragLeave:function(e){return se(0,t,n)},onClick:function(){return ne(o)},selected:u,isExpanded:t.galleryId===o.id,rightAction:we(o),rightActionOnHover:Ee(o,a)})}var d=t.folderId===o.id&&!n.action,f=(Y||V)&&o.id===t.folderId||V&&c;return React.createElement(ve.R,{key:o.id,title:o.name,preventClose:Boolean(n.action),dragging:f,draggable:q&&!a,onDragStart:function(n){return fe(0,[o],e.id,r,t)},onDragEnd:pe,onDragOver:function(e){return me(e,o.id,t.folderId)},onDrop:he,onDragLeave:function(e){return ye(0,t,n)},onClick:function(){return $(o,e.id)},selected:d,isExpanded:null==t||null===(i=t.expandedFolderIds)||void 0===i?void 0:i.includes(o.id),rightActionOnHover:be(o,a)},Re(o,t,n,r,a))}):void 0:null},_e=xr(function(){return o.length?React.createElement(ve.M,null,o.map(function(e){var t,n,r=null,a=null===(t=d.items)||void 0===t?void 0:t.some(function(t){return t.id===e.id});if(e.is_collection){var o=s.galleryId===e.id&&!d.action,l=H&&s.galleryId===e.id||Y&&a;return React.createElement(ve.R,{key:e.id,title:React.createElement("span",{dangerouslySetInnerHTML:{__html:e.name}}),icon:"gallery",dragging:l,draggable:q&&!i,onDragStart:function(t){return ie(0,[e],r,f,s)},onDragEnd:ce,onDragOver:function(t){return ue(t,e.id,s.galleryId)},onDrop:de,onDragLeave:function(e){return se(0,s,d)},onClick:function(){return ne(e)},selected:o,isExpanded:s.galleryId===e.id,rightAction:we(e),rightActionOnHover:Ee(e,i)})}var c=s.folderId===e.id&&!d.action,u=(Y||V)&&e.id===s.folderId||V&&a;return React.createElement(ve.R,{key:e.id,title:React.createElement("span",{dangerouslySetInnerHTML:{__html:e.name}}),preventClose:Boolean(d.action),dragging:u,draggable:q&&!i,onDragStart:function(t){return fe(0,[e],r,f,s)},onDragEnd:pe,onDragOver:function(t){return me(t,e.id,s.folderId)},onDrop:he,onDragLeave:function(e){return ye(0,s,d)},onClick:function(){return $(e,r)},selected:c,isExpanded:null==s||null===(n=s.expandedFolderIds)||void 0===n?void 0:n.includes(e.id),rightActionOnHover:be(e,i)},Re(e,s,d,f,i))})):React.createElement(Cr,null,"You can organize your photos into folders and collections manually here. You'll then be able to do cool things, such as using your collections directly as galleries in your content.")},[o,s,d,f,i]),ke=function(e,t){var n;return null!=e&&null!==(n=e.children)&&void 0!==n&&n.length?e.is_folder?e.children.map(function(n){var r;return n.is_collection?React.createElement(ve.R,{title:n.name,icon:"gallery",onClick:function(){return ne(n)},selected:t.galleryId===n.id,rightAction:we(n)}):React.createElement(ve.R,{title:n.name,isExpanded:null==t||null===(r=t.expandedFolderIds)||void 0===r?void 0:r.includes(n.id),onClick:function(){return $(n,e.id)},selected:t.folderId===n.id},ke(n,t))}):void 0:null},Se=xr(function(){return l.length?React.createElement(ve.M,null,l.map(function(e){var t;return e.is_collection?React.createElement(ve.R,{key:e.id,title:e.name,icon:"gallery",onClick:function(){return ne(e)},selected:s.galleryId===e.id,rightAction:we(e)}):React.createElement(ve.R,{title:e.name,isExpanded:null==s||null===(t=s.expandedFolderIds)||void 0===t?void 0:t.includes(e.id),onClick:function(){return $(e,null)},selected:s.folderId===e.id},ke(e,s))})):React.createElement(Cr,null,"You will be able to sync your Lightroom to this section of Photo Engine with ",React.createElement("a",{href:"https://meowapps.com/plugin/wplr-sync/",target:"_blank"},"WP/LR Sync"),". Avoid making changes here directly. The sync only goes from Lightroom to WordPress.")},[l,s]);return React.createElement(jr,null,React.createElement(Dr,{style:{paddingTop:"3px",fontWeight:c?"bold":"normal"},onClick:ge},"All Media Entries"),r&&React.createElement(Dr,{style:{paddingBottom:"3px",fontWeight:u?"bold":"normal"},onClick:function(){v({parentId:null,folderId:null,galleryId:null,source:null}),S(1),Wt(null),O(!0),I(null),P(null),M(en)}},"Unassigned Entries"),React.createElement(ur.j,{onChange:function(e){null!==e?n&&n(e):ge()},activeTabIndex:t},React.createElement(ur.u,{title:"Photo Engine",onDragOver:me,onDrop:function(e){return he(e,!0)},rightActions:r&&React.createElement("div",{style:{display:"flex",height:"36px",marginRight:"12px"}},React.createElement(cr.z,{icon:"folder-plus",onClick:function(e){e.stopPropagation(),J()},width:"20",height:"20",color:"white",hoverColor:"var(--neko-green)",disabled:i}),React.createElement(cr.z,{icon:"image-plus",onClick:function(e){e.stopPropagation(),re()},width:"20",height:"20",color:"white",hoverColor:"var(--neko-green)",disabled:i}))},React.createElement(Nr,null,_e)),React.createElement(ur.u,{title:"Lightroom"},React.createElement(Nr,null,Se))),React.createElement(sr.n,{isOpen:m.createNewFolder,onRequestClose:k,title:"Create a new folder",content:React.createElement(Ye.A,{autoFocus:!0,name:"wplr_new_folder_name",placeholder:"folder name...",onInput:function(e){return U(e.target.value)}}),okOnEnter:!0,okButton:{label:"Create",onClick:Z},cancelButton:{label:"Cancel",onClick:k}}),React.createElement(sr.n,{isOpen:m.updateFolder,onRequestClose:k,title:"Modify or delete this folder",content:React.createElement(React.Fragment,null,React.createElement(Ye.A,{autoFocus:!0,name:"wplr_update_folder_name",placeholder:"folder name...",value:null==X?void 0:X.name,onInput:function(e){return U(e.target.value)}}),React.createElement("div",{style:{marginTop:5}},"Slug: ",React.createElement("b",null,null==X?void 0:X.slug)," (not modifiable yet)"),React.createElement(dr.H,{prefix:"gallery",params:{"wplr-folder":y.folderId}}),React.createElement("small",null,"All the collections inside this folder will be united in a single gallery."),React.createElement(dr.H,{prefix:"meow-collection",params:{"wplr-folder":y.folderId}}),React.createElement("small",null,"This folder will display as a collection and each collection inside will be a unique gallery.")),customButtons:React.createElement(w.M,{className:"danger",onClick:function(){return _("deleteFolder")},style:{marginRight:"auto"}},"Delete"),customButtonsPosition:"left",okOnEnter:!0,thumbnail:null!=X&&X.featured_image?React.createElement("img",{src:X.featured_image}):null,okButton:{label:"Update",onClick:function(){return ee(y.folderId)}},cancelButton:{label:"Cancel",onClick:k}}),React.createElement(sr.n,{isOpen:m.deleteFolder,onRequestClose:k,title:"Delete the folder",content:"Are you sure to delete this folder?",okOnEnter:!0,okButton:{label:"Delete",onClick:function(){return te(y.folderId)}},cancelButton:{label:"Cancel",onClick:k}}),React.createElement(sr.n,{isOpen:m.createNewCollection,onRequestClose:k,title:"Create a new collection",content:React.createElement(Ye.A,{autoFocus:!0,name:"wplr_new_gallery_name",placeholder:"Collection name...",onInput:function(e){return W(e.target.value)}}),okOnEnter:!0,okButton:{label:"Create",onClick:ae},cancelButton:{label:"Cancel",onClick:k}}),React.createElement(sr.n,{OkOnEnter:!0,isOpen:m.updateCollection,onRequestClose:k,title:"Modify or Delete this collection",content:React.createElement(React.Fragment,null,React.createElement(Ye.A,{autoFocus:!0,name:"wplr_update_gallery_name",placeholder:"Collection name...",onInput:function(e){return W(e.target.value)},value:null==Q?void 0:Q.name}),React.createElement("div",{style:{marginTop:5}},"Slug: ",React.createElement("b",null,null==Q?void 0:Q.slug)," (not modifiable yet)"),React.createElement(dr.H,{prefix:"gallery",params:{"wplr-collection":y.collectionId}})),customButtons:React.createElement(w.M,{className:"danger",onClick:function(){return _("deleteCollection")},style:{marginRight:"auto"}},"Delete"),customButtonsPosition:"left",okOnEnter:!0,thumbnail:null!=Q&&Q.featured_image?React.createElement("img",{src:Q.featured_image}):null,okButton:{label:"Update",onClick:function(){return oe(y.collectionId)}},cancelButton:{label:"Cancel",onClick:k}}),React.createElement(sr.n,{isOpen:m.deleteCollection,onRequestClose:k,title:"Delete the collection",content:"Are you sure to delete this collection?",okOnEnter:!0,okButton:{label:"Delete",onClick:function(){return le(y.collectionId)}},cancelButton:{label:"Cancel",onClick:k}}))};var Mr,Lr,Gr,Ur,zr,Br,Wr,qr,Hr,Yr,Vr,Kr,Xr=n(4437),Qr=n(3585),$r=n(965);function Jr(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}j.Ay.div(Mr||(Mr=Jr(["\n  padding: 10px 10px 5px 5px;\n"]))),j.Ay.div(Lr||(Lr=Jr(["\n  display: flex;\n  align-items: center;\n  cursor: pointer;\n\n  & > div {\n    margin-right: 8px;\n  }\n"])));var Zr=j.Ay.div(Gr||(Gr=Jr(["\n  box-sizing: border-box;\n  cursor: pointer;\n  width: 156px;\n  height: 104px;\n  margin-right: 8px;\n  margin-bottom: 8px;\n  position: relative;\n\n  .wplr-dashboard-edit-photo {\n    display: none;\n  }\n  .wplr-dashboard-featured-image {\n    display: none;\n\n    &.wplr-dashboard-is-featured {\n      cursor: default;\n      bottom: 3px;\n      left: 3px;\n      display: block;\n      position: absolute;\n    }\n  }\n\n  &:hover {\n    border: 3px solid var(--block-background);\n\n    .wplr-dashboard-edit-photo {\n      bottom: 3px;\n      display: block;\n      position: absolute;\n      right: 3px;\n    }\n\n    .wplr-dashboard-featured-image {\n      bottom: 3px;\n      display: block;\n      left: 3px;\n      position: absolute;\n    }\n  }\n\n  &.dragging {\n    border: 6px solid var(--neko-purple);\n    border-radius: 5px;\n  }\n"]))),ea=j.Ay.img(Ur||(Ur=Jr(["\n  object-fit: cover;\n  width: 100%;\n  height: 100%;\n"]))),ta=j.Ay.div(zr||(zr=Jr(["\n  background: var(--neko-main-color);\n  color: white;\n  box-sizing: border-box;\n  justify-content: space-between;\n  display: flex;\n  padding: 10px;\n  height: 50px;\n\n  h2 {\n    color: white;\n  }\n\n  &.dragging {\n    background: var(--neko-purple);\n  }\n\n  & > * {\n    margin-right: 4px;\n  }\n"]))),na=j.Ay.div(Br||(Br=Jr(["\n  align-self: center;\n  color: ",";\n"])),"white"),ra=j.Ay.div(Wr||(Wr=Jr(["\n  background-color: var(--neko-gray);\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n  min-height: 400px;\n  padding: 16px;\n"]))),aa=j.Ay.div(qr||(qr=Jr(["\n  display: flex;\n  flex-wrap: wrap;\n"]))),oa=j.Ay.div(Hr||(Hr=Jr(["\n  padding: 10px;\n  background: white;\n  display: flex;\n"]))),la=j.Ay.div(Yr||(Yr=Jr(["\n  display: flex;\n"]))),ia=j.Ay.span(Vr||(Vr=Jr(["\n  margin: 0px;\n  color: rgb(172 227 255);\n  background: #027faf;\n  padding: 3px 5px;\n  font-size: 11px;\n  border-radius: 5px;\n"]))),ca=j.Ay.div(Kr||(Kr=Jr(["\n  border-radius: 5px;\n  color: white\n  cursor: pointer;\n  font-family: Lato;\n  height: 156px;\n  margin-bottom: 12px;\n  margin-right: 12px;\n  padding: 0;\n  position: relative;\n  overflow: hidden;\n  width: 156px;\n\n  .wplr-dashboard-content-thumbnail {\n    align-items: center;\n    border-radius: 5px 5px 0 0;\n    background-color: var(--block-background);\n    background-position: center;\n    background-repeat: no-repeat;\n    background-size: cover;\n    display: flex;\n    justify-content: center;\n    height: 128px;\n    position: relative;\n    overflow: hidden;\n    width: 100%;\n\n    &.wplr-dashboard-content-no-featured-image {\n      &::before {\n        color: #00000030;\n        content: 'No featured image';\n        font-family: Lato;\n        text-transform: uppercase;\n        font-size: 11px;\n      }\n    }\n\n    img {\n      height: 100%;\n      object-fit: cover;\n      width: 100%;\n    }\n\n    .wplr-dashboard-featured-image {\n      display: none;\n\n      &.wplr-dashboard-is-featured {\n        cursor: default;\n        bottom: 3px;\n        left: 3px;\n        display: block;\n        position: absolute;\n      }\n    }\n\n    &:hover {\n      .wplr-dashboard-featured-image {\n        bottom: 3px;\n        display: block;\n        left: 3px;\n        position: absolute;\n      }\n    }\n  }\n\n  .wplr-dashboard-content-title-container {\n    align-items: center;\n    background-color: white;\n    border-radius: 0 0 5px 5px;\n    display: flex;\n    margin: 0;\n    overflow: hidden;\n    padding: 0 5px;\n\n    .wplr-dashboard-content-title {\n      color: black;\n      font-family: Lato;\n      font-style: normal;\n      font-weight: normal;\n      font-size: 11px;\n      line-height: 12px;\n      margin: 0 0 0 5px;\n      padding: 8px 0;\n    }\n  }\n"])));function ua(e){return ua="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ua(e)}function sa(e){return function(e){if(Array.isArray(e))return Ea(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||ba(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function da(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",a=n.toStringTag||"@@toStringTag";function o(n,r,a,o){var c=r&&r.prototype instanceof i?r:i,u=Object.create(c.prototype);return fa(u,"_invoke",function(n,r,a){var o,i,c,u=0,s=a||[],d=!1,f={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,n){return o=t,i=0,c=e,f.n=n,l}};function p(n,r){for(i=n,c=r,t=0;!d&&u&&!a&&t<s.length;t++){var a,o=s[t],p=f.p,m=o[2];n>3?(a=m===r)&&(c=o[(i=o[4])?5:(i=3,3)],o[4]=o[5]=e):o[0]<=p&&((a=n<2&&p<o[1])?(i=0,f.v=r,f.n=o[1]):p<m&&(a=n<3||o[0]>r||r>m)&&(o[4]=n,o[5]=r,f.n=m,i=0))}if(a||n>1)return l;throw d=!0,r}return function(a,s,m){if(u>1)throw TypeError("Generator is already running");for(d&&1===s&&p(s,m),i=s,c=m;(t=i<2?e:c)||!d;){o||(i?i<3?(i>1&&(f.n=-1),p(i,c)):f.n=c:f.v=c);try{if(u=2,o){if(i||(a="next"),t=o[a]){if(!(t=t.call(o,c)))throw TypeError("iterator result is not an object");if(!t.done)return t;c=t.value,i<2&&(i=0)}else 1===i&&(t=o.return)&&t.call(o),i<2&&(c=TypeError("The iterator does not provide a '"+a+"' method"),i=1);o=e}else if((t=(d=f.n<0)?c:n.call(r,f))!==l)break}catch(t){o=e,i=1,c=t}finally{u=1}}return{value:t,done:d}}}(n,a,o),!0),u}var l={};function i(){}function c(){}function u(){}t=Object.getPrototypeOf;var s=[][r]?t(t([][r]())):(fa(t={},r,function(){return this}),t),d=u.prototype=i.prototype=Object.create(s);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,fa(e,a,"GeneratorFunction")),e.prototype=Object.create(d),e}return c.prototype=u,fa(d,"constructor",u),fa(u,"constructor",c),c.displayName="GeneratorFunction",fa(u,a,"GeneratorFunction"),fa(d),fa(d,a,"Generator"),fa(d,r,function(){return this}),fa(d,"toString",function(){return"[object Generator]"}),(da=function(){return{w:o,m:f}})()}function fa(e,t,n,r){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}fa=function(e,t,n,r){function o(t,n){fa(e,t,function(e){return this._invoke(t,n,e)})}t?a?a(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(o("next",0),o("throw",1),o("return",2))},fa(e,t,n,r)}function pa(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function ma(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pa(Object(n),!0).forEach(function(t){ya(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pa(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function ya(e,t,n){return(t=function(e){var t=function(e){if("object"!=ua(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=ua(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==ua(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ha(e,t,n,r,a,o,l){try{var i=e[o](l),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,a)}function ga(e){return function(){var t=this,n=arguments;return new Promise(function(r,a){var o=e.apply(t,n);function l(e){ha(o,r,a,l,i,"next",e)}function i(e){ha(o,r,a,l,i,"throw",e)}l(void 0)})}}function va(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o,l,i=[],c=!0,u=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=o.call(n)).done)&&(i.push(r.value),i.length!==t);c=!0);}catch(e){u=!0,a=e}finally{try{if(!c&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(u)throw a}}return i}}(e,t)||ba(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ba(e,t){if(e){if("string"==typeof e)return Ea(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ea(e,t):void 0}}function Ea(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var wa=wp.element,Ra=wa.useState,_a=wa.useMemo,ka=wa.useCallback,Sa=[{accessor:"thumbnail_url",title:"Thumb",width:"80px"},{accessor:"type",title:"Origin",sortable:!0,width:"80px"},{accessor:"path",title:"Title & Path"}],Oa={marginTop:"6px",marginLeft:"2px"};const Ia=function(e){var t=e.folderContent,n=rr(),r=n.allMedias,a=n.unassignedEntries,o=n.lrFoldersAndGalleries,l=n.wpFoldersAndGalleries,i=n.totalUnassignedEntries,c=n.totalAllMedias,u=n.limit,s=n.page,d=n.sort,f=n.busy,m=n.showUnassignedEntries,y=n.selected,h=n.dragging,g=n.pressShift,v=n.modals,b=n.modalData,E=n.galleryContent,R=n.total,_=n.setTotal,k=rr(),S=k.setSelected,O=k.toggleModal,I=k.resetModal,P=k.setShowAllMedias,A=k.setShowUnassignedEntries,x=k.setLimit,T=k.setPage,j=k.setSort,C=k.setDragging,D=k.setPressShift,N=k.setPressCtrl,F=k.pressCtrl,M=k.deleteCollection,L=k.deleteFolder,G=k.updatePhoto,U=k.removePhoto,z=k.updateFeaturedImage,B=va(Ra(null),2),W=B[0],q=B[1],H=va(Ra({title:null,description:null,caption:null,alt:null}),2),Y=H[0],V=H[1],K=va(Ra($t),2),X=K[0],Q=K[1],$=b.source===Ht,J=h.itemType===Yt,Z=h.itemType===Kt,ee=function(e,t,n){n.stopPropagation(),j({accessor:e,by:t})};(0,Ft.useEffect)(function(){E&&q(null)},[E]),(0,Ft.useEffect)(function(){V({title:null==W?void 0:W.title,description:null==W?void 0:W.description,caption:null==W?void 0:W.caption,alt:null==W?void 0:W.alt})},[W]);var te=ka(function(){var e=ga(da().m(function e(t){return da().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,G(t,Y);case 1:e.v&&(V({title:null,description:null,caption:null,alt:null}),q(ma(ma({},W),Y)));case 2:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}(),[W,Y,G]),ne=function(e,t,n,r,a,o){if(e.stopPropagation(),r){q(null);var l=a.some(function(e){return e.ID===t.ID})?a.filter(function(e){return e.ID!==t.ID}):[].concat(sa(a),[t]);C(ma(ma({},h),{},{items:l,itemType:Yt,itemParent:y.galleryId}))}else if(n){if(q(null),!a.length)return void C(ma(ma({},h),{},{items:[t],itemType:Yt,itemParent:y.galleryId}));var i=a[0];if(i.ID===t.ID)return void C(ma(ma({},h),{},{items:[t],itemType:Yt,itemParent:y.galleryId}));for(var c=o.findIndex(function(e){return e.ID===i.ID}),u=o.findIndex(function(e){return e.ID===t.ID}),s=u>c,d=s?u:c,f=[],p=(s?c:u)+1;p<d;p++)f.push(o[p]);var m=s?[i].concat(f,[t]):[t].concat(f,[i]);C(ma(ma({},h),{},{items:m,itemType:Yt,itemParent:y.galleryId}))}else q(t),C(ma(ma({},h),{},{items:[],itemType:null}))},re=function(e,t,n,r){e.stopPropagation(),q(null);var a=n.filter(function(e){return t.includes(e.ID)});C(ma(ma({},h),{},{items:[].concat(sa(r),sa(a)),itemType:Yt,itemParent:y.galleryId}))},ae=function(e,t,n){e.stopPropagation(),q(null);var r=n.filter(function(e){return!t.includes(e.ID)});C(ma(ma({},h),{},{items:r,itemType:Yt,itemParent:y.galleryId}))},oe=function(t,n){t.stopPropagation(),q(n),O("editPhoto"),e.onEditPhotoClick&&e.onEditPhotoClick(t,n)},le=function(){var e=ga(da().m(function e(t,n){return da().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,U(t,n);case 1:return e.a(2)}},e)}));return function(t,n){return e.apply(this,arguments)}}(),ie=function(){var e=ga(da().m(function e(t,n,r){return da().w(function(e){for(;;)switch(e.n){case 0:return t.stopPropagation(),e.n=1,z(n,r);case 1:return e.a(2)}},e)}));return function(t,n,r){return e.apply(this,arguments)}}(),ce=function(e,t,n){C({action:mr(n),itemType:Yt,itemParent:y.galleryId,items:t})},ue=ka(function(){J&&S(ma(ma({},y),{},{galleryId:h.itemParent})),C({action:null,itemType:null,itemParent:null,items:[]}),D(!1),N(!1)},[h.itemType,h.itemParent]),se=function(){var e=ga(da().m(function e(t){return da().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,L(t,b.source);case 1:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}(),de=function(){var e=ga(da().m(function e(t){return da().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,M(t,b.source);case 1:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}(),fe=function(e){return e.map(function(e){return{id:e.ID,thumbnail_url:React.createElement("img",{src:e.thumbnail_url,style:{width:40,height:40,objectFit:"cover"}}),type:React.createElement("a",{onClick:function(t){return oe(t,e)},style:{cursor:"pointer"}},"ID ",e.ID),path:React.createElement(React.Fragment,null,React.createElement(p.s,{p:!0,style:{margin:0}},e.title),React.createElement(p.s,{p:!0,style:{margin:0}},e.path))}})},pe=_a(function(){if(!E&&!r.length)return React.createElement(p.s,{p:!0,style:{marginTop:0}},"Welcome to Photo Engine! Please select a folder or a collection in the sidebar.");var e=!h.items.length&&W?[W]:[],n=J?h.items.map(function(e){return e.ID}):[],u=W?W.ID:null,s=sa(W?new Set([].concat(sa(h.items),[W])):h.items);if(E){var v=pr([].concat(sa(o),sa(l)),y.galleryId);P(!1),A(!1);var b=!$;return X===Jt?React.createElement(qe.o,{variant:"raw",busy:f,data:fe(E),columns:Sa,sort:d,onSortChange:ee,onSelect:function(e,t){return re(t,e,E,s)},onUnselect:function(e,t){return ae(t,e,s)},selectedItems:s.map(function(e){return e.ID})}):React.createElement(aa,null,E.map(function(t){var r=v.featured_image_id===t.ID,a=n.includes(t.ID)||!n.length&&u===t.ID;return React.createElement(Zr,{key:"wplr-image-".concat(t.ID),className:a?"dragging":""},React.createElement(ea,{draggable:b,onDragStart:function(e){return ce(0,sa(new Set([].concat(sa(h.items),[t]))),g)},onDragEnd:ue,onDoubleClick:function(e){return oe(e,t)},onClick:function(n){return ne(n,t,g,F,[].concat(e,sa(h.items)),E)},src:t.thumbnail_url}),React.createElement("div",{className:"wplr-dashboard-edit-photo",onClick:function(e){return oe(e,t)}},React.createElement(cr.z,{icon:"pencil",color:"white",width:"20",height:"20"})),r?React.createElement("div",{className:"wplr-dashboard-featured-image wplr-dashboard-is-featured"},React.createElement(cr.z,{icon:"star",color:"var(--neko-yellow)",width:"20",height:"20",hoverColor:"var(--neko-yellow)"})):React.createElement("div",{className:"wplr-dashboard-featured-image",onClick:function(e){return ie(e,v.id,t.ID)}},React.createElement(cr.z,{icon:"star",color:"white",width:"20",height:"20"})))}))}if(t){var w=pr([].concat(sa(o),sa(l)),y.folderId);return P(!1),A(!1),React.createElement(aa,null,t.children.map(function(e){var t=w.featured_image_id===e.featured_image_id,n=e.featured_image,r=n?"wplr-dashboard-content-thumbnail":"wplr-dashboard-content-thumbnail wplr-dashboard-content-no-featured-image",a=e.is_folder?function(){return function(e,t){var n=y.expandedFolderIds?sa(y.expandedFolderIds):[];e.id===y.folderId&&(n=y.expandedFolderIds.includes(e.id)?y.expandedFolderIds.filter(function(t){return t!==e.id}):[].concat(sa(y.expandedFolderIds),[e.id])),S(ma(ma({},y),{},{folderId:e.id,source:e.source,parentId:t,expandedFolderIds:n}));var r=zt(),a=r.length?r[r.length-1]:null;e.id!==a&&Bt(a===t?[].concat(sa(r),[e.id]):[e.id])}(e)}:function(){return t=e,C({action:null,itemType:null,itemParent:null,items:[]}),D(!1),N(!1),S(ma(ma({},y),{},{folderId:null,galleryId:t.id,source:t.source})),void T(1);var t},o=e.is_folder?"folder":"image-multiple-outline";return React.createElement(ca,{key:e.id,onClick:a},React.createElement("div",{className:r},n?React.createElement("img",{src:n}):null,n?t?React.createElement("div",{className:"wplr-dashboard-featured-image wplr-dashboard-is-featured"},React.createElement(cr.z,{icon:"star",color:"var(--neko-yellow)",width:"20",height:"20",hoverColor:"var(--neko-yellow)"})):React.createElement("div",{className:"wplr-dashboard-featured-image",onClick:function(t){return ie(t,w.id,e.featured_image_id)}},React.createElement(cr.z,{icon:"star",color:"white",width:"20",height:"20"})):null),React.createElement("div",{className:"wplr-dashboard-content-title-container"},React.createElement(cr.z,{icon:o,width:20,height:20,color:"var(--neko-blue)"}),React.createElement("p",{className:"wplr-dashboard-content-title"},e.name)))}))}return m?(P(!1),_(i),X===Jt?React.createElement(qe.o,{variant:"raw",busy:f,data:fe(a),columns:Sa,sort:d,onSortChange:ee,onSelect:function(e,t){return re(t,e,a,s)},onUnselect:function(e,t){return ae(t,e,s)},selectedItems:s.map(function(e){return e.ID})}):React.createElement(aa,null,a.map(function(t){return React.createElement(Zr,{className:n.includes(t.ID)||!n.length&&u===t.ID?"dragging":""},React.createElement(ea,{draggable:!0,onDragStart:function(e){return ce(0,sa(new Set([].concat(sa(h.items),[t]))),!0)},onDragEnd:ue,onClick:function(n){return ne(n,t,g,F,[].concat(e,sa(h.items)),a)},src:t.thumbnail_url}),React.createElement("div",{className:"wplr-dashboard-edit-photo",onClick:function(e){return oe(e,t)}},React.createElement(cr.z,{icon:"pencil",color:"white"})))}))):(P(!0),_(c),X===Jt?React.createElement(qe.o,{variant:"raw",busy:f,data:fe(r),columns:Sa,sort:d,onSortChange:ee,onSelect:function(e,t){return re(t,e,r,s)},onUnselect:function(e,t){return ae(t,e,s)},selectedItems:s.map(function(e){return e.ID})}):React.createElement(aa,null,r.map(function(t){return React.createElement(Zr,{className:n.includes(t.ID)||!n.length&&u===t.ID?"dragging":""},React.createElement(ea,{draggable:!0,onDragStart:function(e){return ce(0,sa(new Set([].concat(sa(h.items),[t]))),!0)},onDragEnd:ue,onClick:function(n){return ne(n,t,g,F,[].concat(e,sa(h.items)),r)},src:t.thumbnail_url}),React.createElement("div",{className:"wplr-dashboard-edit-photo",onClick:function(e){return oe(e,t)}},React.createElement(cr.z,{icon:"pencil",color:"white"})))})))},[E,t,r,a,m,l,o,g,F,W,h.items,X,f]),me=_a(function(){var e="";if(W||h.items.length){var n="";if(h.action===Qt?n="Moving":h.action===Xt&&(n="Copying"),n){var r=h.itemType;h.items.length>1&&(r=Z?"galleries":r+"s");var a=pr(l,J?y.galleryId:y.folderId),i=a&&a.id!==h.itemParent&&!h.items.some(function(e){return e.id===a.id})?" to ".concat(a.name):" to ...";e=React.createElement(p.s,null,"".concat(n," ").concat(h.items.length," ").concat(r).concat(i))}else h.items.length>0?e=React.createElement(p.s,null,"".concat(h.items.length," photos selected")):W&&(e=React.createElement(p.s,null,W.title||"(No Title)"))}var c=h.action?"dragging":"";if(E){var u=pr([].concat(sa(o),sa(l)),y.galleryId);if(W)return React.createElement(ta,{className:c},React.createElement(la,null,!h.action&&React.createElement(la,{style:{marginRight:"6px"}},React.createElement(cr.z,{icon:"view-grid",onClick:function(){return Q($t)},width:"20",height:"20",color:"white"}),React.createElement(cr.z,{icon:"format-list-bulleted",onClick:function(){return Q(Jt)},width:"20",height:"20",color:"white"})),React.createElement(na,null,!h.action&&React.createElement(p.s,{h2:!0,style:{margin:0,color:"white"}},u.name),e)),React.createElement(w.M,{className:"danger",onClick:function(){return O("removePhoto",!0,{photoIds:[W.ID],collectionId:y.galleryId})},disabled:f},"Remove Photo"));var s=null!==E&&!h.items.length,d=!h.items.length&&!h.action;return React.createElement(ta,{className:c},React.createElement(la,null,!h.action&&React.createElement(la,{style:{marginRight:"6px"}},React.createElement(cr.z,{icon:"view-grid",onClick:function(){return Q($t)},width:"20",height:"20",color:"white"}),React.createElement(cr.z,{icon:"format-list-bulleted",onClick:function(){return Q(Jt)},width:"20",height:"20",color:"white"})),React.createElement(na,null,!h.action&&React.createElement(p.s,{h2:!0,style:{margin:0,color:"white"}},u.name),e,d&&React.createElement(React.Fragment,null,React.createElement(ia,null,'[gallery wplr-collection="'.concat(y.galleryId,'"]')),y.folderId&&React.createElement(ia,{style:{marginLeft:5}},'[meow-collection wplr-folder="'.concat(y.folderId,'"]'))))),s&&React.createElement(w.M,{className:"danger",onClick:function(){return O("deleteCollection",!0,{collectionId:y.galleryId,source:y.source})},disabled:f},"Delete Collection"),!!h.items.length&&React.createElement(w.M,{className:"danger",onClick:function(){return O("removePhotos",!0,{photoIds:h.items.map(function(e){return e.ID}),collectionId:h.itemParent})},disabled:f},"Remove Photos"))}return h.action?React.createElement(ta,{className:c},React.createElement(la,null,React.createElement(na,null,e))):t?React.createElement(ta,{className:c},React.createElement(la,null,React.createElement(na,null,React.createElement(p.s,{h2:!0,style:{margin:0,color:"white"}},t.name),React.createElement(ia,null,'[gallery wplr-folder="'.concat(y.folderId,'"]')))),React.createElement(w.M,{className:"danger",onClick:function(){return O("deleteFolder",!0,{folderId:y.folderId,source:y.source})},disabled:f},"Delete Folder")):React.createElement(ta,{className:c},React.createElement(la,null,React.createElement(la,{style:{marginRight:"6px"}},React.createElement(cr.z,{icon:"view-grid",onClick:function(){return Q($t)},width:"20",height:"20",color:"white"}),React.createElement(cr.z,{icon:"format-list-bulleted",onClick:function(){return Q(Jt)},width:"20",height:"20",color:"white"})),React.createElement(na,null,React.createElement(p.s,{h2:!0,style:{margin:0,color:"white"}},m?"Unassigned Entries":"All Media Entries"),e)))},[E,t,r,W,m,o,l,h.items,h.action,f,y.galleryId,y.folderId]);return React.createElement(React.Fragment,null,me,React.createElement(He.A,{busy:f},React.createElement(ra,{onClick:function(){q(null),C({action:null,itemType:null,itemParent:null,items:[]}),D(!1),N(!1)},style:{padding:X===Jt?"2px 0 0 2px":16}},pe),React.createElement(oa,null,React.createElement(ge.u,{name:"wplr_sync-limit",scrolldown:!0,value:u,onChange:function(e){x(e),T(1)},style:{marginRight:"10px"}},Zt.map(function(e){return React.createElement(ge.j,{value:e,label:"".concat(e," items per page")})})),React.createElement(Xr.Q,{currentPage:s,limit:u,total:R,onClick:function(e){return T(e)}}))),React.createElement(sr.n,{isOpen:v.deleteCollection,onRequestClose:I,title:"Delete the collection",content:"Are you sure to delete this collection?",okOnEnter:!0,okButton:{label:"Delete",onClick:function(){return de(y.galleryId)}},cancelButton:{label:"Cancel",onClick:I}}),React.createElement(sr.n,{isOpen:v.deleteFolder,onRequestClose:I,title:"Delete the folder",content:"Are you sure to delete this folder?",okOnEnter:!0,okButton:{label:"Delete",onClick:function(){return se(b.folderId)}},cancelButton:{label:"Cancel",onClick:I}}),React.createElement(sr.n,{isOpen:v.removePhoto,onRequestClose:I,title:"Remove this photo",content:"Are you sure to remove this photo?",okOnEnter:!0,okButton:{label:"Remove",onClick:function(){return le(b.photoIds,b.collectionId,"removePhoto")}},cancelButton:{label:"Cancel",onClick:I}}),React.createElement(sr.n,{isOpen:v.removePhotos,onRequestClose:I,title:"Remove the selected photos",content:"Are you sure to remove these selected photos?",okOnEnter:!0,okButton:{label:"Remove",onClick:function(){return le(b.photoIds,b.collectionId,"removePhotos")}},cancelButton:{label:"Cancel",onClick:I}}),React.createElement(sr.n,{isOpen:v.editPhoto,onRequestClose:I,title:"Edit the photo",thumbnail:null!=W&&W.thumbnail_url?React.createElement("img",{src:W.thumbnail_url}):null,content:React.createElement(Qr.s,null,React.createElement(p.s,{label:!0,style:Oa},"Title"),React.createElement(Ye.A,{autoFocus:!0,name:"wplr_edit_photo_title",placeholder:"title",value:null==W?void 0:W.title,onInput:function(e){return V(ma(ma({},Y),{},{title:e.target.value}))}}),React.createElement(p.s,{label:!0,style:Oa},"Description"),React.createElement($r.m,{name:"wplr_edit_photo_description",placeholder:"description",value:null==W?void 0:W.description,onInput:function(e){return V(ma(ma({},Y),{},{description:e.target.value}))},textAreaStyle:{height:"72px"}}),React.createElement(p.s,{label:!0,style:Oa},"Caption"),React.createElement($r.m,{name:"wplr_edit_photo_caption",placeholder:"caption",value:null==W?void 0:W.caption,onInput:function(e){return V(ma(ma({},Y),{},{caption:e.target.value}))},textAreaStyle:{height:"72px"}}),React.createElement(p.s,{label:!0,style:Oa},"Alt"),React.createElement(Ye.A,{name:"wplr_edit_photo_alt",placeholder:"alt",value:null==W?void 0:W.alt,onInput:function(e){return V(ma(ma({},Y),{},{alt:e.target.value}))}})),okOnEnter:!0,okButton:{label:"Update",onClick:function(){return te(null==W?void 0:W.ID)}},cancelButton:{label:"Cancel",onClick:I}}))};function Pa(e){return Pa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Pa(e)}function Aa(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function xa(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Aa(Object(n),!0).forEach(function(t){Ta(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Aa(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Ta(e,t,n){return(t=function(e){var t=function(e){if("object"!=Pa(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=Pa(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Pa(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}wp.element.useCallback;const ja=function(){var e,t=rr(),n=t.wpFoldersAndGalleries,r=t.lrFoldersAndGalleries,a=t.apiError,o=t.selected,l=t.folderContent,i=rr(),c=i.setGalleryContent,u=i.setPage,d=i.setShowUnassignedEntries,f=(i.setSelected,i.setPressShift),p=i.setPressCtrl,m=i.setFolderContent,y=(0,Ve.v_)(),h=y.pressShift,E=y.pressControl;return(0,Ft.useEffect)(function(){f(h),p(E)},[h,E]),(0,Ft.useEffect)(function(){var e;if(o.folderId&&n.length&&r.length){var t=o.source===qt?n:r,a=pr(t,o.folderId),l=null!==(e=a.children)&&void 0!==e?e:[];m(xa(xa({},a),{},{children:l})),c(null),Wt(null)}},[o.folderId,o.source,n,r]),React.createElement(s.A,null,React.createElement(g.z,{nekoErrors:[a]},React.createElement(v.n,{title:"Photo Engine",section:"Media Organizer",subtitle:"By Jordy Meow",isPro:A},React.createElement("div",{style:{display:"flex",justifyContent:"flex-end"}},React.createElement(w.M,{icon:"cog",className:"header",onClick:function(){return location.href="admin.php?page=wplr_sync_settings"}},"Settings"))),React.createElement(b.N,null,React.createElement(b.Y,{style:{maxWidth:"20%",minWidth:280,padding:0,margin:"20px 0 0 20px",background:"#d0d0d0"}},React.createElement(Fr,{activeTabIndex:(e=Number(localStorage.getItem(Mt)),isNaN(e)?null:e),onAllMediaEntriesClick:function(){u(1),Wt(null),d(!1),m(null),c(null)},onTabChange:function(e){var t;null===(t=e)?localStorage.removeItem(Mt):localStorage.setItem(Mt,t)},isPurePhotoEngine:!0})),React.createElement(b.Y,{style:{padding:0,margin:"20px 20px 0 0"}},React.createElement(Ia,{folderContent:l,isPurePhotoEngine:!0})))))};function Ca(e){return Ca="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ca(e)}function Da(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function Na(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Fa(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Na(Object(n),!0).forEach(function(t){Ma(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Na(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Ma(e,t,n){return(t=function(e){var t=function(e){if("object"!=Ca(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=Ca(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Ca(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var La=wp.element.render,Ga=new c.E({defaultOptions:{queries:{refetchOnWindowFocus:!1,refetchOnMount:!1,retry:!1,placeholderData:function(e){return e}}}}),Ua=null,za=[],Ba=function(e){var t,n,r=e.style,a=void 0===r?{width:"100%",height:"100%",overflow:"auto"}:r,o=e.colIdSelector;if(!o)return React.createElement("span",null,"Could not hook to ID Selector.");var l=parseInt(o.value)||-1,i=null,c=[],u=!0,s=null;if(l>-1){i=za.find(function(e){return e.wp_col_id===l}),u=!1,s=Ma(Ma({},qt,0),Ht,1)[i.source];for(var d=i.level,f=Fa({},i);d;){var p=za.filter(function(e){return e.level===f.level-1}).find(function(e){return e.wp_col_id===f.wp_folder_id});d=(f=Fa({},p)).level,c.push(String(p.wp_col_id))}}var m={parentId:null,folderId:null,galleryId:String(null===(t=i)||void 0===t?void 0:t.wp_col_id)||null,source:(null===(n=i)||void 0===n?void 0:n.source)||null,expandedFolderIds:c},y=(0,Ft.useCallback)(function(e){var t,n=e.id;o?(o.value=n||"all",o.dispatchEvent(new Event("change")),Ua&&(null===(t=document.querySelector("#post-query-submit"))||void 0===t||t.click())):console.log("[Photo Engine | onSelectFilter] Cannot find filter selector.")},[o]);return React.createElement("div",{style:a},React.createElement(Fr,{onCollectionClick:y,onAllMediaEntriesClick:function(){return y(-1)},isPurePhotoEngine:!1,activeTabIndex:s,selected:m,showAllMedias:u}))},Wa=function(e,t){var n=document.getElementsByClassName("supports-drag-drop"),r=document.getElementsByClassName("media-modal"),a=document.getElementsByClassName("media-frame-content"),o=Array.from(r).filter(function(e){return 0===e.getElementsByClassName("hide-router").length});if(n.length){if(Ua&&a.length)return t.disconnect(),void Ha(a[0]);if(!Ua&&o.length){var l,i=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Da(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Da(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,l=!0,i=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return l=e.done,e},e:function(e){i=!0,o=e},f:function(){try{l||null==n.return||n.return()}finally{if(i)throw o}}}}(o);try{for(i.s();!(l=i.n()).done;){var c=l.value,u=c.querySelector(".media-toolbar");if(u.style.height="fit-content",u.style.paddingBottom="10px",c.querySelector(".attachments-wrapper").style.marginTop=u.offsetHeight/2+"px",!c.parentElement.classList.contains("supports-drag-drop"))return;qa(c)}}catch(e){i.e(e)}finally{i.f()}}}},qa=function(e){if(pEngine.media_modals){var t=e.closest(".supports-drag-drop");if("none"!==window.getComputedStyle(t).display){var n=t.querySelector(".media-frame");n.classList.remove("hide-menu");var r=n.querySelector(".media-menu");if(!r.classList.contains("wplr-hooked")){r.classList.add("wplr-hooked"),r.style.display="flex",r.style.flexDirection="column";var a=document.createElement("div");a.classList.add("wplr-dyn-ui-elem"),a.style.overflow="overlay",r.appendChild(a);var o=e.querySelector(".wplr_col_id_selector");return La(React.createElement(u.Ht,{client:Ga},React.createElement(nr,null,React.createElement(s.A,null,React.createElement(Ba,{colIdSelector:o})))),a),a}}}},Ha=function(e){if(pEngine.media_library){Ya();var t=document.createElement("div");t.style.display="flex",t.style.width="100%";var n=document.createElement("div");n.style.width="260px",n.style.marginRight="10px";var r=document.querySelector(".wp-list-table.media"),a=document.querySelector(".tablenav.bottom"),o=r.parentElement;t.appendChild(n),t.appendChild(r),o.insertBefore(t,a);var l=e.querySelector("#wplr_col_id_selector");return console.log("[addBrowserToUI]",{mediaLibraryListModeElement:e,colIdSelector:l}),La(React.createElement(u.Ht,{client:Ga},React.createElement(nr,null,React.createElement(Ba,{colIdSelector:l}))),n),n}};function Ya(){if(wp.media&&wp.media.view&&wp.media.view.AttachmentFilters){var e=wp.media.view.AttachmentFilters.extend({id:"wplr_col_id_selector",className:"attachment-filters wplr_col_id_selector",createFilters:function(){var e={all:{text:"All Media (WP/LR)",props:{col_id:-1},priority:10}};_.each(za||{},function(t,n){var r=t.is_folder?"ðŸ“":"ðŸ–¼ï¸";e[t.wp_col_id]={text:r+" "+t.name,props:{col_id:t.wp_col_id}}}),this.filters=e},render:function(){return wp.media.view.AttachmentFilters.prototype.render.apply(this,arguments),this.el.style.border="2px solid #2271b1",this.el.style.borderRadius="4px",this.el.style.backgroundColor="#f0f6fc",this}}),t=wp.media.view.AttachmentsBrowser;wp.media.view.AttachmentsBrowser=wp.media.view.AttachmentsBrowser.extend({createToolbar:function(){var n;t.prototype.createToolbar.call(this),(null===(n=this.toolbar)||void 0===n?void 0:n.secondary)&&(window.what=this),this.toolbar.set("MediaLibraryTaxonomyFilter",new e({controller:this.controller,model:this.collection.props,priority:-75}).render())}})}}document.addEventListener("DOMContentLoaded",function(e){var t=document.getElementsByClassName("wp-core-ui")[0],n=document.getElementById("posts-filter");Ua=document.getElementsByClassName("upload-php")[0],za=pEngine.hierarchy.map(function(e){return{name:e.name,level:parseInt(e.level),is_folder:"1"===e.is_folder,wp_col_id:parseInt(e.wp_col_id),wp_folder_id:e.wp_folder_id?parseInt(e.wp_folder_id):null,source:e.source}});var r,a,o=document.getElementById("meow-common-dashboard");(o&&La(React.createElement(u.Ht,{client:Ga},React.createElement(s.A,null,React.createElement(pe,null))),o),(a=document.getElementById("wplr-sync-admin-settings"))&&(La(React.createElement(u.Ht,{client:Ga},React.createElement(Nt,null)),a),1)||(r=document.getElementById("wplr-sync-dashboard"),r&&(La(React.createElement(u.Ht,{client:Ga},React.createElement(nr,null,React.createElement(s.A,null,React.createElement(ja,null)))),r),1)))||(Ua&&Array.from(document.getElementsByClassName("wplr-sync-field")).forEach(function(e){var t=e.getAttribute("data-wp-id"),n=e.getAttribute("data-lastsync"),r=e.getAttribute("data-lr-id"),a=e.getAttribute("data-is-server-side");La(React.createElement(rt,{show:null,wpId:t,lrId:r,lastSync:n,showInMedia:!0,isServerSide:a}),e)}),Ua&&n?(Ya(),Ha(n),n.style.display="block"):(Ya(),new MutationObserver(Wa).observe(t,{childList:!0,subtree:!0})))})},1594:e=>{e.exports=React},5206:e=>{e.exports=ReactDOM}},n={};function r(e){var a=n[e];if(void 0!==a)return a.exports;var o=n[e]={exports:{}};return t[e](o,o.exports,r),o.exports}r.m=t,r.amdO={},e=[],r.O=(t,n,a,o)=>{if(!n){var l=1/0;for(s=0;s<e.length;s++){for(var[n,a,o]=e[s],i=!0,c=0;c<n.length;c++)(!1&o||l>=o)&&Object.keys(r.O).every(e=>r.O[e](n[c]))?n.splice(c--,1):(i=!1,o<l&&(l=o));if(i){e.splice(s--,1);var u=a();void 0!==u&&(t=u)}}return t}o=o||0;for(var s=e.length;s>0&&e[s-1][2]>o;s--)e[s]=e[s-1];e[s]=[n,a,o]},r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e={57:0};r.O.j=t=>0===e[t];var t=(t,n)=>{var a,o,[l,i,c]=n,u=0;if(l.some(t=>0!==e[t])){for(a in i)r.o(i,a)&&(r.m[a]=i[a]);if(c)var s=c(r)}for(t&&t(n);u<l.length;u++)o=l[u],r.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return r.O(s)},n=self.wpJsonWplr=self.wpJsonWplr||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})(),r.nc=void 0;var a=r.O(void 0,[121],()=>r(79));a=r.O(a)})();
//# sourceMappingURL=index.js.map