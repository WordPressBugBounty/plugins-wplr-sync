/*! For license information please see index.js.LICENSE.txt */
(()=>{"use strict";var e,t={8233:(e,t,r)=>{var n,o,a,i,l,c=r(5072),u=r(7665),s=r(2564),f=r(9270),d=r(7097),p=r(4977),h=r(7039),m=r(4536),y=r(5263),g=r(6913),v=r(8615),b=r(4547),w=r(3676),E=r(9296),R=r(4461),x=r(7518),k=pEngine.prefix,S=(pEngine.domain,pEngine.rest_url.replace(/\/+$/,"")),O=pEngine.api_url.replace(/\/+$/,""),I=pEngine.plugin_url.replace(/\/+$/,""),L=("1"===pEngine.is_pro&&pEngine.is_registered,pEngine.rest_nonce),P=r(197),A=r(9616);function j(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var T=A.Ay.div(n||(n=j(["\n  color: white;\n  padding: 15px;\n  margin-bottom: -15px;\n\n  a {\n    color: #7dedff;\n    text-decoration: none;\n  }\n\n  p {\n    font-size: 15px;\n  }\n"]))),C=(0,A.Ay)(R.z)(o||(o=j(["\n\n  .neko-block-title {\n    display: none;\n  }\n\n  .plugin-desc {\n    display: flex;\n    flex-direction: column;\n    margin-left: 15px;\n  }\n\n  .neko-block-content {\n    display: flex;\n    padding: 15px;\n\n    h2 {\n      font-size: 18px;\n      margin: 0;\n\n      a {\n        text-decoration: none;\n      }\n    }\n\n    p {\n      margin: 0px;\n      margin-top: 10px;\n      font-size: 13px;\n      line-height: 1.5;\n    }\n\n    .plugin-actual-desc {\n      font-size: 13px;\n      font-weight: 500;\n    }\n  }\n"]))),N=A.Ay.img(a||(a=j(["\n  height: 125px;\n  width: auto;\n  border-radius: 10px;\n  background: lightgray;\n"]))),D=A.Ay.div(i||(i=j(["\n\n  margin: 15px;\n\n  .center {\n    background: white;\n    color: black;\n    border-radius: 10px;\n    padding: 10px;\n    max-width: 100%\n    overflow: none;\n\n    h2 {\n      font-size: 26px;\n    }\n\n    table {\n      width: 100%;\n\n      tr td:first-child {\n        width: 220px;\n        font-weight: bold;\n        color: #1e7cba;\n      }\n\n      * {\n        overflow-wrap: anywhere;\n      }\n    }\n  }\n\n  hr {\n    border-color: #1e7cba;\n  }\n"]))),F=A.Ay.ul(l||(l=j(["\n  margin-top: 10px;\n  background: rgb(0, 72, 88);\n  padding: 10px;\n  color: rgb(58, 212, 58);\n  max-height: 600px;\n  min-height: 200px;\n  display: block;\n  font-family: monospace;\n  font-size: 12px;\n  white-space: pre;\n  overflow-x: auto;\n  width: calc(100vw - 276px);\n  color: white;\n\n  .log-date {\n    color: var(--neko-yellow);\n    margin-left: 8px;\n  }\n\n  .log-type {\n    background: #0000004d;\n    padding: 2px 5px;\n    border-radius: 8px;\n    text-transform: uppercase;\n  }\n\n  .log-content {\n    display: block;\n  }\n\n  .log-warning .log-type {\n    background: var(--neko-yellow);\n    color: white;\n  }\n\n  .log-fatal .log-type {\n    background: var(--neko-red);\n    color: white;\n  }\n"])));function M(e){return M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},M(e)}function G(){G=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",l=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var a=t&&t.prototype instanceof g?t:g,i=Object.create(a.prototype),l=new P(n||[]);return o(i,"_invoke",{value:S(e,r,l)}),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var d="suspendedStart",p="suspendedYield",h="executing",m="completed",y={};function g(){}function v(){}function b(){}var w={};u(w,i,(function(){return this}));var E=Object.getPrototypeOf,R=E&&E(E(A([])));R&&R!==r&&n.call(R,i)&&(w=R);var x=b.prototype=g.prototype=Object.create(w);function _(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){function r(o,a,i,l){var c=f(e[o],e,a);if("throw"!==c.type){var u=c.arg,s=u.value;return s&&"object"==M(s)&&n.call(s,"__await")?t.resolve(s.__await).then((function(e){r("next",e,i,l)}),(function(e){r("throw",e,i,l)})):t.resolve(s).then((function(e){u.value=e,i(u)}),(function(e){return r("throw",e,i,l)}))}l(c.arg)}var a;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}})}function S(t,r,n){var o=d;return function(a,i){if(o===h)throw Error("Generator is already running");if(o===m){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var l=n.delegate;if(l){var c=O(l,n);if(c){if(c===y)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===d)throw o=m,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=h;var u=f(t,r,n);if("normal"===u.type){if(o=n.done?m:p,u.arg===y)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=m,n.method="throw",n.arg=u.arg)}}}function O(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,O(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var a=f(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,y;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,y):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function I(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function L(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(I,this),this.reset(!0)}function A(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(M(t)+" is not iterable")}return v.prototype=b,o(x,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:v,configurable:!0}),v.displayName=u(b,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,u(e,c,"GeneratorFunction")),e.prototype=Object.create(x),e},t.awrap=function(e){return{__await:e}},_(k.prototype),u(k.prototype,l,(function(){return this})),t.AsyncIterator=k,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new k(s(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},_(x),u(x,c,"Generator"),u(x,i,(function(){return this})),u(x,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=A,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(L),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return l.type="throw",l.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],l=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,y):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),L(r),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;L(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:A(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),y}},t}function U(e,t,r,n,o,a,i){try{var l=e[a](i),c=l.value}catch(e){return void r(e)}l.done?t(c):Promise.resolve(c).then(n,o)}function z(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){U(a,n,o,i,l,"next",e)}function l(e){U(a,n,o,i,l,"throw",e)}i(void 0)}))}}function B(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,l=[],c=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return l}}(e,t)||W(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function W(e,t){if(e){if("string"==typeof e)return Y(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Y(e,t):void 0}}function Y(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var q=wp.element,H=q.useState,V=q.useEffect,K="".concat(S,"/meow-common/v1"),X=function(e){var t=e.request,r=e.title,n=e.max,o=B(H(!1),2),a=o[0],i=o[1],l=B(H([]),2),c=l[0],u=l[1],s=c.length>0?c.reduce((function(e,t){return e+t})):0,f=c.length>0?Math.ceil(s/c.length):0,d=!c.length&&a;return V((function(){a&&setTimeout(z(G().mark((function e(){var r,n,o;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=(new Date).getTime(),e.next=3,(0,x.IU)("".concat(K,"/").concat(t),{method:"POST",nonce:L});case 3:n=(new Date).getTime(),o=n-r,u((function(e){return[].concat(function(e){if(Array.isArray(e))return Y(e)}(t=e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||W(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),[o]);var t}));case 6:case"end":return e.stop()}}),e)}))),1e3)}),[c]),React.createElement(T,{style:{width:200,textAlign:"center"}},React.createElement(p.s,{h2:!0,style:{color:"white"}},r),React.createElement(P.X,{size:200,value:d?n:f,max:n},React.createElement("span",{style:{fontSize:20}},d?"START":f+" ms"),React.createElement("span",{style:{fontSize:12}},d?"YOUR ENGINE":c.length+" requests")),React.createElement(E.M,{style:{width:"100%",marginTop:10},color:a?"#cc3627":"#ccb027",onClick:function(){a||u([]),i(!a)}},a?"Stop":"Start"))};function $(e){return $="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$(e)}function J(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,l=[],c=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Q(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Q(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Q(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function Z(){Z=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",l=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var a=t&&t.prototype instanceof g?t:g,i=Object.create(a.prototype),l=new P(n||[]);return o(i,"_invoke",{value:S(e,r,l)}),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var d="suspendedStart",p="suspendedYield",h="executing",m="completed",y={};function g(){}function v(){}function b(){}var w={};u(w,i,(function(){return this}));var E=Object.getPrototypeOf,R=E&&E(E(A([])));R&&R!==r&&n.call(R,i)&&(w=R);var x=b.prototype=g.prototype=Object.create(w);function _(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){function r(o,a,i,l){var c=f(e[o],e,a);if("throw"!==c.type){var u=c.arg,s=u.value;return s&&"object"==$(s)&&n.call(s,"__await")?t.resolve(s.__await).then((function(e){r("next",e,i,l)}),(function(e){r("throw",e,i,l)})):t.resolve(s).then((function(e){u.value=e,i(u)}),(function(e){return r("throw",e,i,l)}))}l(c.arg)}var a;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}})}function S(t,r,n){var o=d;return function(a,i){if(o===h)throw Error("Generator is already running");if(o===m){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var l=n.delegate;if(l){var c=O(l,n);if(c){if(c===y)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===d)throw o=m,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=h;var u=f(t,r,n);if("normal"===u.type){if(o=n.done?m:p,u.arg===y)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=m,n.method="throw",n.arg=u.arg)}}}function O(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,O(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var a=f(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,y;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,y):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function I(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function L(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(I,this),this.reset(!0)}function A(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError($(t)+" is not iterable")}return v.prototype=b,o(x,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:v,configurable:!0}),v.displayName=u(b,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,u(e,c,"GeneratorFunction")),e.prototype=Object.create(x),e},t.awrap=function(e){return{__await:e}},_(k.prototype),u(k.prototype,l,(function(){return this})),t.AsyncIterator=k,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new k(s(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},_(x),u(x,c,"Generator"),u(x,i,(function(){return this})),u(x,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=A,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(L),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return l.type="throw",l.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],l=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,y):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),L(r),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;L(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:A(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),y}},t}function ee(e,t,r,n,o,a,i){try{var l=e[a](i),c=l.value}catch(e){return void r(e)}l.done?t(c):Promise.resolve(c).then(n,o)}function te(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){ee(a,n,o,i,l,"next",e)}function l(e){ee(a,n,o,i,l,"throw",e)}i(void 0)}))}}var re=wp.element,ne=re.useState,oe=re.useEffect;O&&S&&I||console.error("[@common/dashboard] apiUrl, restUrl and pluginUrl are mandatory.");var ae="".concat(S,"/meow-common/v1"),ie=React.createElement(T,null,React.createElement(p.s,{p:!0,style:{lineHeight:"1.5",margin:"0 0 15px 0"}},"Hi! ☀️ Meow Apps isn't your typical plugin suite—it's a passion project led by me, ",React.createElement("a",{target:"_blank",rel:"noreferrer",href:"https://jordymeow.com"},"Jordy Meow"),", and a stellar team! 💕 Based in ",React.createElement("a",{target:"_blank",rel:"noreferrer",href:"https://offbeatjapan.org"},"Japan"),", we're all about making your WordPress experience smoother and speedier. Our plugins are all about boosting your site's performance and user-friendliness. Ready to level up your WordPress game? Check out ",React.createElement("a",{href:"http://meowapps.com",rel:"noreferrer",target:"_blank"},"Meow Apps")," and let's make magic happen! 🌴🙀")),le=React.createElement(T,null,React.createElement(p.s,{p:!0},"The ",React.createElement("b",null,"Empty Request Time")," measures your installation's basic performance by showing the average time needed to process an empty request on your server. To see how disabling plugins affects the results, turn some off and run the test again. Aim for a time under 2,000 ms, but ideally, keep it below 500 ms. The ",React.createElement("b",null,"File Operation Time")," creates a temporary 10MB file each time it runs. ",React.createElement("b",null,"The SQL Request Time")," calculates the total number of posts. This process should be quick and have a similar duration to the Empty Request Time.")),ce=React.createElement(T,null,React.createElement(p.s,{p:!0},"Maintain a streamlined WordPress setup by using essential plugins and a dependable hosting provider. Refrain from self-hosting unless you're an expert. Go further by reading our tutorials:",React.createElement("ul",null,React.createElement("li",null,"⭐️ ",React.createElement("a",{href:"https://meowapps.com/tutorial-improve-seo-wordpress/",rel:"noreferrer",target:"_blank"},"SEO Checklist & Optimization")),React.createElement("li",null,"⭐️ ",React.createElement("a",{href:"https://meowapps.com/tutorial-faster-wordpress-optimize/",rel:"noreferrer",target:"_blank"},"Optimize your WordPress Speed")),React.createElement("li",null,"⭐️ ",React.createElement("a",{href:"https://meowapps.com/tutorial-optimize-images-wordpress/",rel:"noreferrer",target:"_blank"},"Optimize Images (CDN, and so on)")),React.createElement("li",null,"⭐️ ",React.createElement("a",{href:"https://meowapps.com/tutorial-hosting-service-wordpress/",rel:"noreferrer",target:"_blank"},"The Best Hosting Services for WordPress"))))),ue=function(){var e=te(Z().mark((function e(){var t;return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,x.IU)("".concat(ae,"/all_settings/"),{method:"POST",nonce:L});case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),se=function(){var e=te(Z().mark((function e(t){var r,n,o;return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.value,n=t.id,e.next=3,(0,x.IU)("".concat(ae,"/update_option"),{method:"POST",nonce:L,json:{name:n,value:r}});case 3:return o=e.sent,e.abrupt("return",o);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),fe=function(){var e=te(Z().mark((function e(){var t;return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,x.IU)("".concat(ae,"/error_logs"),{method:"POST",nonce:L});case 2:return t=e.sent,e.abrupt("return",t.data.reverse());case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),de=function(){var e=(0,u.jE)(),t=J(ne(!1),2),r=t[0],n=t[1],o=J(ne(""),2),a=o[0],i=o[1],l=(0,f.I)({queryKey:["all_settings"],queryFn:ue}),c=l.data,s=l.error,x=(0,d.n)({mutationFn:se,onSuccess:function(){e.invalidateQueries(["all_settings"])}}),_=(0,d.n)({mutationFn:fe}),k=null==c?void 0:c.meowapps_hide_meowapps,S=null==c?void 0:c.force_sslverify;oe((function(){s&&!r&&(n(!0),console.error("Error from useQuery",s.message))}),[s]),oe((function(){var e=document.getElementById("meow-common-phpinfo");e&&i(e.innerHTML)}),[]);var O=function(e,t){x.mutate({value:e,id:t})},I=React.createElement(h.d,{title:"Main Menu"},React.createElement(m.E,{max:"1"},React.createElement(y.R,{name:"meowapps_hide_meowapps",label:"Hide (Not Recommended)",description:React.createElement(p.s,{p:!0},"This will hide the Meow Apps Menu (on the left side) and everything it contains. You can re-enable it through though an option that will be added in Settings → General."),value:"1",disabled:x.isPending,checked:k,onChange:O}))),L=React.createElement(h.d,{title:"SSL Verify"},React.createElement(m.E,{max:"1"},React.createElement(y.R,{name:"force_sslverify",label:"Force (Not Recommended)",description:React.createElement(p.s,{p:!0},"This will enforce the usage of SSL when checking the license or updating the plugin."),value:"1",disabled:x.isPending,checked:S,onChange:O})));return React.createElement(g.z,{showRestError:r},React.createElement(v.n,{title:"The Dashboard"}),React.createElement(b.N,null,React.createElement(b.Y,{full:!0},React.createElement(w._,{keepTabOnReload:!0},React.createElement(w.V,{title:"Meow Apps"},ie,React.createElement(b.N,null,React.createElement(b.Y,{minimal:!0},React.createElement(C,{title:"AI Engine",className:"primary"},React.createElement(N,{src:"https://ps.w.org/ai-engine/assets/icon-256x256.png"}),React.createElement("div",{className:"plugin-desc"},React.createElement("h2",null,React.createElement("a",{target:"_blank",href:"https://wordpress.org/plugins/ai-engine/",rel:"noreferrer"},"AI Engine")),React.createElement("p",{className:"plugin-actual-desc"},"This is the ultimate AI plugin for WordPress. From a chatbot adapted to your needs to an AI that can write your content for you, API, REST, and more."),React.createElement("p",null,React.createElement("div",null,"Free Version: ",React.createElement("a",{target:"_blank",href:"https://wordpress.org/plugins/ai-engine/",rel:"noreferrer"},"WordPress.org")),React.createElement("div",null,"Pro Version: ",React.createElement("a",{target:"_blank",href:"https://meowapps.com/ai-engine/",rel:"noreferrer"},"Meow Apps"))))),React.createElement(C,{title:"Media Cleaner",className:"primary"},React.createElement(N,{src:"https://ps.w.org/media-cleaner/assets/icon-256x256.png"}),React.createElement("div",{className:"plugin-desc"},React.createElement("h2",null,React.createElement("a",{target:"_blank",href:"https://wordpress.org/plugins/media-cleaner/",rel:"noreferrer"},"Media Cleaner")),React.createElement("p",{className:"plugin-actual-desc"},"Is your Media Library bloated, your database heavy, and your website running slow? Media Cleaner will clean your Media Library from the media entries (and files) which aren't used in your website, as well as broken entries."),React.createElement("p",null,React.createElement("div",null,"Free Version: ",React.createElement("a",{target:"_blank",href:"https://wordpress.org/plugins/media-cleaner/",rel:"noreferrer"},"WordPress.org")),React.createElement("div",null,"Pro Version: ",React.createElement("a",{target:"_blank",href:"https://meowapps.com/media-cleaner/",rel:"noreferrer"},"Meow Apps"))))),React.createElement(C,{title:"Database Cleaner",className:"primary"},React.createElement(N,{src:"https://ps.w.org/database-cleaner/assets/icon-256x256.png"}),React.createElement("div",{className:"plugin-desc"},React.createElement("h2",null,React.createElement("a",{target:"_blank",href:"https://wordpress.org/plugins/database-cleaner/",rel:"noreferrer"},"Database Cleaner")),React.createElement("p",{className:"plugin-actual-desc"},"Not only does Database Cleaner have a user-friendly UI, but it's also equipped to handle large DBs, giving it an edge over other plugins. It's a must-have for any WordPress site."),React.createElement("p",null,React.createElement("div",null,"Free Version: ",React.createElement("a",{target:"_blank",href:"https://wordpress.org/plugins/database-cleaner/",rel:"noreferrer"},"WordPress.org")),React.createElement("div",null,"Pro Version: ",React.createElement("a",{target:"_blank",href:"https://meowapps.com/database-cleaner/",rel:"noreferrer"},"Meow Apps"))))),React.createElement(C,{title:"Media File Renamer",className:"primary"},React.createElement(N,{src:"https://ps.w.org/media-file-renamer/assets/icon-256x256.png"}),React.createElement("div",{className:"plugin-desc"},React.createElement("h2",null,React.createElement("a",{target:"_blank",href:"https://wordpress.org/plugins/media-file-renamer/",rel:"noreferrer"},"Media File Renamer")),React.createElement("p",{className:"plugin-actual-desc"},"Rename and move files directly from the dashboard, manually, automatically or via AI, either individually or in bulk. It's the best way to rename your files."),React.createElement("p",null,React.createElement("div",null,"Free Version: ",React.createElement("a",{target:"_blank",href:"https://wordpress.org/plugins/media-file-renamer/",rel:"noreferrer"},"WordPress.org")),React.createElement("div",null,"Pro Version: ",React.createElement("a",{target:"_blank",href:"https://meowapps.com/media-file-renamer/",rel:"noreferrer"},"Meow Apps"))))),React.createElement(C,{title:"Social Engine",className:"primary"},React.createElement(N,{src:"https://ps.w.org/social-engine/assets/icon-256x256.png"}),React.createElement("div",{className:"plugin-desc"},React.createElement("h2",null,React.createElement("a",{target:"_blank",href:"https://wordpress.org/plugins/social-engine/",rel:"noreferrer"},"Social Engine")),React.createElement("p",{className:"plugin-actual-desc"},'Effortlessly schedule and automate the perfect posts for all your networks. Unlimited capabilities and infinite className="plugin-actual-desc" extensibility, for free!'),React.createElement("p",null,React.createElement("div",null,"Free Version: ",React.createElement("a",{target:"_blank",href:"https://wordpress.org/plugins/social-engine/",rel:"noreferrer"},"WordPress.org")),React.createElement("div",null,"Pro Version: ",React.createElement("a",{target:"_blank",href:"https://meowapps.com/social-engine/",rel:"noreferrer"},"Meow Apps"))))),React.createElement(C,{title:"Meow Analytics",className:"primary"},React.createElement(N,{src:"https://ps.w.org/meow-analytics/assets/icon-256x256.png"}),React.createElement("div",{className:"plugin-desc"},React.createElement("h2",null,React.createElement("a",{rel:"noreferrer",target:"_blank",href:"https://wordpress.org/plugins/meow-analytics/"},"Meow Analytics")),React.createElement("p",{className:"plugin-actual-desc"},"Google Analytics for your website. Simple and fast."),React.createElement("p",null,React.createElement("div",null,"Free Version: ",React.createElement("a",{rel:"noreferrer",target:"_blank",href:"https://wordpress.org/plugins/meow-analytics/"},"WordPress.org")),React.createElement("div",null,"Pro Version: ",React.createElement("a",{rel:"noreferrer",target:"_blank",href:"https://meowapps.com/meow-analytics/"},"Meow Apps")))))),React.createElement(b.Y,{minimal:!0},React.createElement(C,{title:"Contact Form Block",className:"primary"},React.createElement(N,{src:"https://ps.w.org/seo-engine/assets/icon-256x256.png"}),React.createElement("div",{className:"plugin-desc"},React.createElement("h2",null,React.createElement("a",{target:"_blank",href:"https://wordpress.org/plugins/seo-engine/",rel:"noreferrer"},"SEO Engine")),React.createElement("p",{className:"plugin-actual-desc"},"Optimize your content for SEO and for the AI world, with AI assistants... while keeping everything simple and fast, as it should be! ✌️"),React.createElement("p",null,React.createElement("div",null,"Free Version: ",React.createElement("a",{rel:"noreferrer",target:"_blank",href:"https://wordpress.org/plugins/seo-engine/"},"WordPress.org")),React.createElement("div",null,"Pro Version: ",React.createElement("a",{rel:"noreferrer",target:"_blank",href:"https://meowapps.com/seo-engine/"},"Meow Apps"))))),React.createElement(C,{title:"Meow Gallery",className:"primary"},React.createElement(N,{src:"https://ps.w.org/meow-gallery/assets/icon-256x256.png"}),React.createElement("div",{className:"plugin-desc"},React.createElement("h2",null,React.createElement("a",{rel:"noreferrer",target:"_blank",href:"https://wordpress.org/plugins/meow-gallery/"},"Meow Gallery")),React.createElement("p",{className:"plugin-actual-desc"},"Fast and beautiful galleries with many layouts. Forget the heavy and slow plugins, use the Meow Gallery for a better experience! 💕"),React.createElement("p",null,React.createElement("div",null,"Free Version: ",React.createElement("a",{rel:"noreferrer",target:"_blank",href:"https://wordpress.org/plugins/meow-gallery/"},"WordPress.org")),React.createElement("div",null,"Pro Version: ",React.createElement("a",{rel:"noreferrer",target:"_blank",href:"https://meowapps.com/meow-gallery/"},"Meow Apps"))))),React.createElement(C,{title:"Meow Lightbox",className:"primary"},React.createElement(N,{src:"https://ps.w.org/meow-lightbox/assets/icon-256x256.gif"}),React.createElement("div",{className:"plugin-desc"},React.createElement("h2",null,React.createElement("a",{rel:"noreferrer",target:"_blank",href:"https://wordpress.org/plugins/meow-lightbox/"},"Meow Lightbox")),React.createElement("p",{className:"plugin-actual-desc"},"Sleek and performant lightbox with EXIF support."),React.createElement("p",null,React.createElement("div",null,"Free Version: ",React.createElement("a",{rel:"noreferrer",target:"_blank",href:"https://wordpress.org/plugins/meow-lightbox/"},"WordPress.org")),React.createElement("div",null,"Pro Version: ",React.createElement("a",{rel:"noreferrer",target:"_blank",href:"https://meowapps.com/meow-lightbox/"},"Meow Apps"))))),React.createElement(C,{title:"Perfect Images (Retina)",className:"primary"},React.createElement(N,{src:"https://ps.w.org/wp-retina-2x/assets/icon-256x256.png"}),React.createElement("div",{className:"plugin-desc"},React.createElement("h2",null,React.createElement("a",{rel:"noreferrer",target:"_blank",href:"https://wordpress.org/plugins/wp-retina-2x/"},"Perfect Images")),React.createElement("p",{className:"plugin-actual-desc"},"Manage, Optimize, Replace your images with Perfect Images."),React.createElement("p",null,React.createElement("div",null,"Free Version: ",React.createElement("a",{rel:"noreferrer",target:"_blank",href:"https://wordpress.org/plugins/wp-retina-2x/"},"WordPress.org")),React.createElement("div",null,"Pro Version: ",React.createElement("a",{rel:"noreferrer",target:"_blank",href:"https://meowapps.com/wp-retina-2x/"},"Meow Apps"))))),React.createElement(C,{title:"Photo Engine",className:"primary"},React.createElement(N,{src:"https://ps.w.org/wplr-sync/assets/icon-256x256.png"}),React.createElement("div",{className:"plugin-desc"},React.createElement("h2",null,React.createElement("a",{rel:"noreferrer",target:"_blank",href:"https://wordpress.org/plugins/wplr-sync/"},"Photo Engine")),React.createElement("p",{className:"plugin-actual-desc"},"Organize your photos in folders and collections. Synchronize with Lightroom. Simplify and speed up your workflow."),React.createElement("p",null,React.createElement("div",null,"Free Version: ",React.createElement("a",{rel:"noreferrer",target:"_blank",href:"https://wordpress.org/plugins/wplr-sync/"},"WordPress.org")),React.createElement("div",null,"Pro Version: ",React.createElement("a",{rel:"noreferrer",target:"_blank",href:"https://meowapps.com/wplr-sync/"},"Meow Apps"))))),React.createElement(C,{title:"Contact Form Block",className:"primary"},React.createElement(N,{src:"https://ps.w.org/contact-form-block/assets/icon-256x256.png"}),React.createElement("div",{className:"plugin-desc"},React.createElement("h2",null,React.createElement("a",{rel:"noreferrer",target:"_blank",href:"https://wordpress.org/plugins/contact-form-block/"},"Contact Form Block")),React.createElement("p",{className:"plugin-actual-desc"},"Need a very simple but straightforward contact form? This is the one you need. It's fast, simple, and efficient."),React.createElement("p",null,React.createElement("div",null,"Free Version: ",React.createElement("a",{rel:"noreferrer",target:"_blank",href:"https://wordpress.org/plugins/contact-form-block/"},"WordPress.org")),React.createElement("div",null,"Pro Version: ",React.createElement("a",{rel:"noreferrer",target:"_blank",href:"https://meowapps.com/contact-form-block/"},"Meow Apps")))))))),React.createElement(w.V,{title:"Performance"},le,React.createElement("div",{style:{display:"flex",justifyContent:"space-around",marginBottom:25}},React.createElement(X,{title:"Empty Request Time",request:"empty_request",max:2500}),React.createElement(X,{title:"File Operation Time",request:"file_operation",max:2600}),React.createElement(X,{title:"SQL Request Time",request:"sql_request",max:2800})),ce),React.createElement(w.V,{title:"PHP Info"},React.createElement(D,{dangerouslySetInnerHTML:{__html:a}})),React.createElement(w.V,{title:"PHP Error Logs"},React.createElement(T,null,React.createElement(E.M,{style:{marginBottom:10},color:"#ccb027",onClick:function(){_.mutate()},disabled:_.isPending,isBusy:_.isPending},"Load PHP Error Logs"),React.createElement(F,null,(_.data||[]).map((function(e){return React.createElement("li",{className:"log-".concat(e.type),key:e.id},React.createElement("span",{className:"log-type"},e.type),React.createElement("span",{className:"log-date"},e.date),React.createElement("span",{className:"log-content"},e.content))}))),React.createElement(p.s,{p:!0},"If you don't see any errors, your host might not allow remote access to PHP error logs. Contact them for assistance, or look in your hosting control panel."))),React.createElement(w.V,{title:"Settings"},React.createElement(R.z,{title:"Settings",className:"primary"},I,L))))))},pe=wp.element,he=(pe.useState,pe.useEffect,"".concat(S,"/meow-licenser/").concat(k,"/v1"),r(5592)),me=r(1543);const ye=function(e){var t=e.busy,r=e.use_taken_date,n=e.upload_folder,o=e.filename_accents,a=e.public_api,i=e.auth_token,l=e.qr,c=e.check_same_file,u=e.updateOption,s=e.media_organizer,f=e.media_library,d=e.media_modals,g=e.big_image_size_threshold,v=React.createElement(h.d,{title:"Meta Date"},React.createElement(m.E,{max:"1"},React.createElement(y.R,{name:"wplr_use_taken_date",label:"Use Capture Date",value:"1",checked:r,onChange:u,description:"By default, WordPress use the Upload Date. This will force the Capture Date to be used instead."}))),w=React.createElement(h.d,{title:"Upload Folder"},React.createElement(m.E,{max:"1"},React.createElement(y.R,{name:"wplr_upload_folder",label:"Use Upload Date (instead of Capture Date)",value:"1",checked:"upload_date"===n,onChange:function(e,t){u(!0===e?"upload_date":"taken_date",t)},description:"Since you enabled the Capture Date above as the Meta Date, the folder will used that information. You can however choose to use the Upload Date instead with this option."}))),E=React.createElement(h.d,{title:"Sanitization"},React.createElement(m.E,{max:"1"},React.createElement(y.R,{name:"wplr_filename_accents",label:"Disable",value:"1",checked:o,onChange:u,description:"WordPress sanitizes filenames by default. This option will turn it off."}))),x=React.createElement(h.d,{title:"Media Organizer"},React.createElement(m.E,{max:"1"},React.createElement(y.R,{name:"wplr_media_organizer",label:"Enable (Recommended)",description:"Adds a Organizer in your Media menu. You will then able to organize your images in folders and collections.",value:"1",checked:s,onChange:u}))),_=React.createElement(h.d,{title:"Media Library"},React.createElement(m.E,{max:"1"},React.createElement(y.R,{name:"wplr_media_library",label:"Enable Media Browser (Not Recommended)",description:"Adds the Photo Engine Media Browser to the modals used for adding images (single image or gallery block).",value:"1",checked:f,onChange:u}))),k=React.createElement(h.d,{title:"Media Modals"},React.createElement(m.E,{max:"1"},React.createElement(y.R,{name:"wplr_media_modals",label:"Enable Media Browser (Beta)",description:"Adds the Photo Engine Media Browser to the Media Library.",value:"1",checked:d,onChange:u}))),S=React.createElement(h.d,{title:"Image Threshold"},React.createElement(y.R,{name:"wr2x_big_image_size_threshold",disabled:t,label:"Disable",value:"1",checked:g,onChange:u})),O=React.createElement(h.d,{title:"Public API"},React.createElement("div",{style:{display:"flex"}},React.createElement(m.E,{max:"1"},React.createElement(y.R,{name:"wplr_public_api",label:"Enable",value:"1",checked:a,onChange:u,description:React.createElement(p.s,{p:!0},"Read-only features will be available through the WordPress API for external apps. A QR Code will be displayed for auth.",a&&React.createElement("small",null,React.createElement("br",null),React.createElement("br",null),"Quick test: ",React.createElement("a",{href:"/wp-json/wplr/v1/hierarchy?wplr_auth_token=".concat(i)},"Hierarchy"),"."))})),a&&React.createElement("img",{style:{width:80,height:80,marginLeft:20},src:"https://api.qrserver.com/v1/create-qr-code/?size=200x200&data=".concat(encodeURIComponent(l))}))),I=React.createElement(h.d,{title:"Double Processing"},React.createElement(m.E,{max:"1"},React.createElement(y.R,{name:"wplr_check_same_file",label:"Avoid",value:"1",checked:c,onChange:u,description:"Avoid processing if the new file is the same as the old one. That will avoid thumbnails to be generated again, as well as optimization processes and so on."})));return React.createElement(React.Fragment,null,React.createElement(b.N,null,React.createElement(b.Y,{minimal:!0},React.createElement(R.z,{busy:t,title:"Features",className:"primary"},x,k,_,React.createElement(p.s,{p:!0},"The Media Organizer is recommended in order to look through your photos. Feel free to try the ",React.createElement("i",null,"Browser")," for the ",React.createElement("i",null,"Media Modals")," (for when you edit posts), but support isn't perfect yet. Your folders and collections will be always available through the filters."),React.createElement(p.s,{p:!0},React.createElement("i",null,"Browser")," for ",React.createElement("i",null,"Media Library")," is not recommended as you should use the Media Organizer instead in this case."))),React.createElement(b.Y,{minimal:!0},React.createElement(R.z,{busy:t,title:"Upload & Sync",className:"primary"},v,r&&w,E,I),React.createElement(R.z,{busy:t,title:"Advanced",className:"primary"},S,O))))};var ge=r(5075),ve=r(4876),be=wp.i18n.__,we={};we.PENDING=be("Pending","wplr-sync"),we.RENAME=be("Rename","wplr-sync"),we.TITLE=be("Title","wplr-sync"),we.MEDIA=be("Media","wplr-sync"),we.ACTION=be("Action","wplr-sync"),we.THUMB=be("Thumb","wplr-sync"),we.LR_ID=be("LR ID","wplr-sync"),we.FILENAME=be("Filename","wplr-sync"),we.UNLINKED_PHOTOS=be("Unlinked Photos","wplr-sync"),we.DUPLICATED_LINKS=be("Duplicated Links","wplr-sync"),we.IGNORED_PHOTOS=be("Ignored Photos","wplr-sync"),we.UNKNOWN=be("Unknown","wplr-sync"),we.ENABLED=be("Enabled","wplr-sync"),we.NOT_LINKED=be("Not linked","wplr-sync"),we.NEVER_SYNCED=be("Never synced","wplr-sync"),we.SYNCED_AT=be("Last Sync: ","wplr-sync"),we.IGNORED=be("Ignored","wplr-sync"),we.DELETE=be("Delete","wplr-sync"),we.RESYNC_WITH_EXTENSIONS=be("Resync with Extensions","wplr-sync"),we.RESET_WITH_EXTENSIONS=be("Reset with Extensions","wplr-sync"),we.CLEAN_DB=be("Clean DB","wplr-sync"),we.REPAIR_DB=be("Repair DB","wplr-sync");const Ee=we;var Re="wp",xe="lr",_e="photo",ke="folder",Se="collection",Oe="copy",Ie="move",Le="grid",Pe="list",Ae=[20,40,60,80,100],je="unassigned",Te="gallery";function Ce(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,l=[],c=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Ne(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ne(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ne(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var De=wp.element,Fe=De.useState,Me=De.useEffect,Ge=function e(t,r){if(!t)return null;if(t.some((function(e){return e.id===r})))return t.find((function(e){return e.id===r}));var n=!1;return t.some((function(t){if(t.children)return n=e(t.children,r)})),n},Ue=function(e){return e?Oe:Ie},ze=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,t=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=Ce(Fe(arguments.length>1&&void 0!==arguments[1]?arguments[1]:null),2),n=r[0],o=r[1],a=Ce(Fe(null),2),i=a[0],l=a[1],c=Ce(Fe(t),2),u=c[0],s=c[1],f=Ce(Fe(0),2),d=f[0],p=f[1];return Me((function(){void 0!==e&&(e.success?(l(null),o(e.data),p(e.total?e.total:0)):l(e.error)),s(void 0===e)}),[e]),{busy:u,data:n,total:d,error:i}};function Be(e){return Be="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Be(e)}function We(){We=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",l=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var a=t&&t.prototype instanceof g?t:g,i=Object.create(a.prototype),l=new P(n||[]);return o(i,"_invoke",{value:S(e,r,l)}),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var d="suspendedStart",p="suspendedYield",h="executing",m="completed",y={};function g(){}function v(){}function b(){}var w={};u(w,i,(function(){return this}));var E=Object.getPrototypeOf,R=E&&E(E(A([])));R&&R!==r&&n.call(R,i)&&(w=R);var x=b.prototype=g.prototype=Object.create(w);function _(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){function r(o,a,i,l){var c=f(e[o],e,a);if("throw"!==c.type){var u=c.arg,s=u.value;return s&&"object"==Be(s)&&n.call(s,"__await")?t.resolve(s.__await).then((function(e){r("next",e,i,l)}),(function(e){r("throw",e,i,l)})):t.resolve(s).then((function(e){u.value=e,i(u)}),(function(e){return r("throw",e,i,l)}))}l(c.arg)}var a;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}})}function S(t,r,n){var o=d;return function(a,i){if(o===h)throw Error("Generator is already running");if(o===m){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var l=n.delegate;if(l){var c=O(l,n);if(c){if(c===y)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===d)throw o=m,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=h;var u=f(t,r,n);if("normal"===u.type){if(o=n.done?m:p,u.arg===y)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=m,n.method="throw",n.arg=u.arg)}}}function O(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,O(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var a=f(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,y;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,y):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function I(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function L(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(I,this),this.reset(!0)}function A(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(Be(t)+" is not iterable")}return v.prototype=b,o(x,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:v,configurable:!0}),v.displayName=u(b,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,u(e,c,"GeneratorFunction")),e.prototype=Object.create(x),e},t.awrap=function(e){return{__await:e}},_(k.prototype),u(k.prototype,l,(function(){return this})),t.AsyncIterator=k,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new k(s(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},_(x),u(x,c,"Generator"),u(x,i,(function(){return this})),u(x,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=A,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(L),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return l.type="throw",l.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],l=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,y):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),L(r),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;L(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:A(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),y}},t}function Ye(e,t,r,n,o,a,i){try{var l=e[a](i),c=l.value}catch(e){return void r(e)}l.done?t(c):Promise.resolve(c).then(n,o)}function qe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,l=[],c=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return l}}(e,t)||He(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function He(e,t){if(e){if("string"==typeof e)return Ve(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ve(e,t):void 0}}function Ve(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var Ke=wp.element,Xe=Ke.useState,$e=Ke.useMemo,Je={fontSize:"x-small",marginLeft:3},Qe={revalidateOnFocus:!1,shouldRetryOnError:!1};const Ze=function(e){var t=e.busy,r=e.enable_keywords,n=e.sync_keywords,o=e.sync_keywords_options,a=e.updateOption,i=qe(Xe(!1),2),l=i[0],c=i[1],u=qe(Xe(null),2),s=u[0],f=u[1],d=qe(Xe(null),2),g=d[0],v=d[1],w=qe(Xe(!1),2),_=w[0],k=w[1],S=$e((function(){return["".concat(O,"/keywords_hierarchy/"),{headers:{"X-WP-Nonce":L}}]}),[O,L]),I=(0,he.Ay)(S,x.m9,Qe),P=I.data,A=I.mutate,j=ze(P,[],!0),T=j.busy,C=j.data,N=(j.error,t||T),D=React.createElement(h.d,{title:"Enable Keywords"},React.createElement(m.E,{max:"1"},React.createElement(y.R,{name:"wplr_enable_keywords",label:"Create the Keywords Taxonomy",value:"1",checked:r,onChange:a,description:React.createElement(p.s,null,"The Keywords taxonomy (",React.createElement("b",null,"attachment_keyword"),") will be added to your Media Library. It works the same way as the tags already available for your posts.")}))),F=React.createElement(h.d,{title:"Sync Keywords"},React.createElement(ge.u,{name:"wplr_sync_keywords",scrolldown:!0,onChange:a,description:"Synchronize your LR keywords with a taxonomy available in your Media Library."},Object.keys(o).map((function(e){var t=o[e];return React.createElement(ge.j,{id:t,value:t,label:t||"none",checked:n===t||!n&&!t})})))),M=function(){var e,t=(e=We().mark((function e(t){return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return k(!0),e.next=3,(0,x.Tb)("".concat(O,"/delete_keywords_hierarchy"),{nonce:L,json:{delete_keyword:t.id}});case 3:A(),k(!1);case 5:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){Ye(a,n,o,i,l,"next",e)}function l(e){Ye(a,n,o,i,l,"throw",e)}i(void 0)}))});return function(e){return t.apply(this,arguments)}}(),G=function e(t,r){return React.createElement(ve.R,{title:React.createElement(React.Fragment,null,t.name,React.createElement(p.s,{style:Je},"(ID: ",t.id,", Photos: ",t.count,")")),icon:"tag",onMouseEnter:function(){return f((e=t).id),void v(e.name);var e},rightElement:React.createElement(E.M,{small:!0,className:"danger",onClick:function(){return M(t)}},Ee.DELETE),showRightElement:r},t.children.length?t.children.map((function(t){return e(t,r)})):null)},U=$e((function(){return C.length?React.createElement(ve.M,null,C.map((function(e){return G(e,l)}))):null}),[C,l]),z=React.createElement(React.Fragment,null,React.createElement(h.d,null,React.createElement(p.s,{p:!0},"This is the hierarchy of tags stored by Photo Engine internally. If you wish this hierarchy to be synchronized with your theme directly, please learn about the ",React.createElement("a",{href:"https://meowapps.com/wplr-sync-extensions/"},"Photo Engine Extensions"),". You can also try the ",React.createElement("a",{href:"https://wordpress.org/plugins/meow-gallery/"},"Meow Gallery")," plugin that makes use of all this natively."),U),React.createElement(h.d,null,React.createElement(m.E,{max:"1"},React.createElement(y.R,{name:"unlockKeywordsHierarchy",label:React.createElement(p.s,null,"Unlock ",React.createElement("b",null,Ee.DELETE)),value:"1",checked:l,onChange:function(){c(!l)}})))),B=$e((function(){if(!s)return null;var e=function e(t){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=[],o=r;return t.forEach((function(t){var a;r=t.id===s,(o||t.id===s)&&n.push(t.id),t.children.length&&n.push.apply(n,function(e){if(Array.isArray(e))return Ve(e)}(a=e(t.children,r))||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(a)||He(a)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())})),n}(C);return e.join(",")}),[s]),W=React.createElement(React.Fragment,null,React.createElement(p.s,{p:!0},"You can add the ",React.createElement("i",null,"wplr")," attributes to the native WP Gallery shortcode. Hover the collections, folders and tags and copy/paste this shortcode to your pages."),(g||B)&&React.createElement("div",{style:{backgroundColor:"var(--neko-blue)",color:"white",borderRadius:10,padding:10}},React.createElement(p.s,{p:!0},"Here are my photos about ",React.createElement("i",null,g),":",React.createElement("br",null),'[gallery wplr-keyword="',B,'"]')),React.createElement(p.s,{p:!0},"We recommend you to use the ",React.createElement("a",{href:"https://wordpress.org/plugins/meow-gallery/"},"Meow Gallery"),". Not only it features beautiful layouts but it has a Gutenberg block to do all this automatically."));return React.createElement(b.N,null,React.createElement(b.Y,{minimal:!0},React.createElement(R.z,{busy:N||_,title:"Keywords (Tags)",className:"primary"},z)),React.createElement(b.Y,{minimal:!0},React.createElement(R.z,{busy:N||_,title:"Shortcodes",className:"primary"},W),React.createElement(R.z,{busy:N,title:"Keywords / Tags",className:"primary"},D,F)))};var et=r(1843),tt=r(4190),rt=r(2557),nt=r(8696),ot=r(6897);function at(e){return at="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},at(e)}function it(){it=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",l=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var a=t&&t.prototype instanceof g?t:g,i=Object.create(a.prototype),l=new P(n||[]);return o(i,"_invoke",{value:S(e,r,l)}),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var d="suspendedStart",p="suspendedYield",h="executing",m="completed",y={};function g(){}function v(){}function b(){}var w={};u(w,i,(function(){return this}));var E=Object.getPrototypeOf,R=E&&E(E(A([])));R&&R!==r&&n.call(R,i)&&(w=R);var x=b.prototype=g.prototype=Object.create(w);function _(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){function r(o,a,i,l){var c=f(e[o],e,a);if("throw"!==c.type){var u=c.arg,s=u.value;return s&&"object"==at(s)&&n.call(s,"__await")?t.resolve(s.__await).then((function(e){r("next",e,i,l)}),(function(e){r("throw",e,i,l)})):t.resolve(s).then((function(e){u.value=e,i(u)}),(function(e){return r("throw",e,i,l)}))}l(c.arg)}var a;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}})}function S(t,r,n){var o=d;return function(a,i){if(o===h)throw Error("Generator is already running");if(o===m){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var l=n.delegate;if(l){var c=O(l,n);if(c){if(c===y)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===d)throw o=m,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=h;var u=f(t,r,n);if("normal"===u.type){if(o=n.done?m:p,u.arg===y)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=m,n.method="throw",n.arg=u.arg)}}}function O(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,O(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var a=f(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,y;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,y):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function I(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function L(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(I,this),this.reset(!0)}function A(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(at(t)+" is not iterable")}return v.prototype=b,o(x,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:v,configurable:!0}),v.displayName=u(b,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,u(e,c,"GeneratorFunction")),e.prototype=Object.create(x),e},t.awrap=function(e){return{__await:e}},_(k.prototype),u(k.prototype,l,(function(){return this})),t.AsyncIterator=k,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new k(s(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},_(x),u(x,c,"Generator"),u(x,i,(function(){return this})),u(x,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=A,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(L),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return l.type="throw",l.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],l=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,y):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),L(r),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;L(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:A(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),y}},t}function lt(e,t,r,n,o,a,i){try{var l=e[a](i),c=l.value}catch(e){return void r(e)}l.done?t(c):Promise.resolve(c).then(n,o)}function ct(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){lt(a,n,o,i,l,"next",e)}function l(e){lt(a,n,o,i,l,"throw",e)}i(void 0)}))}}function ut(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,l=[],c=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return st(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?st(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function st(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var ft=wp.element,dt=ft.useState,pt=ft.useEffect;const ht=function(e){var t=e.mutate,r=e.isServerSide,n=ut(dt(null),2),o=n[0],a=n[1],i=ut(dt(!1),2),l=i[0],c=i[1],u=ut(dt(e.wpId||null),2),f=u[0],d=u[1],h=ut(dt(e.lrId||null),2),m=h[0],y=h[1],g=ut(dt(e.lrId||null),2),v=g[0],b=g[1],w=ut(dt(e.lastSync||null),2),R=w[0],_=w[1],k=(0,ot.b_)({concurrency:2}).runTask;pt((function(){r||(e.show?a(e.show):S(f))}),[e.show]),pt((function(){e.show||a(m>0?"linked":0==m?"ignored":"unlinked")}),[f,m,R]);var S=function(){var e=ct(it().mark((function e(t){var r,n;return it().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c((function(e){return e+1})),e.next=3,k(ct(it().mark((function e(){return it().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,x.Tb)("".concat(O,"/sync_info"),{nonce:L,json:{wpId:t}}));case 1:case"end":return e.stop()}}),e)}))));case 3:r=e.sent,n=r.data,d((null==n?void 0:n.wp_id)||t),y((null==n?void 0:n.lr_id)||null),_((null==n?void 0:n.lastsync)||null),c((function(e){return e-1}));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),I=function(){var e=ct(it().mark((function e(t){return it().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:b(t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),P=function(){var e=ct(it().mark((function e(){return it().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t?t():S(f);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),A=function(){var e=ct(it().mark((function e(){return it().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c((function(e){return e+1})),e.next=3,(0,x.Tb)("".concat(O,"/link"),{nonce:L,json:{lrId:v,wpId:f}});case 3:e.sent,P(),c((function(e){return e-1}));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),j=function(){var e=ct(it().mark((function e(){return it().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c((function(e){return e+1})),e.next=3,(0,x.Tb)("".concat(O,"/unlink"),{nonce:L,json:{lrId:m,wpId:f}});case 3:P(),c((function(e){return e-1}));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),T=function(){var e=ct(it().mark((function e(){return it().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c((function(e){return e+1})),e.next=3,(0,x.Tb)("".concat(O,"/link"),{nonce:L,json:{lrId:0,wpId:f}});case 3:P(),c((function(e){return e-1}));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),C=function(){var e=ct(it().mark((function e(){return it().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c((function(e){return e+1})),e.next=3,(0,x.Tb)("".concat(O,"/unlink"),{nonce:L,json:{lrId:m,wpId:f,afterDelete:!0}});case 3:P(),c((function(e){return e-1}));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),N="linked"===o,D="ignored"===o,F="duplicates"===o,M="unlinked"===o;return React.createElement(s.A,null,React.createElement(rt.A,{style:{display:"flex",alignItems:"center"}},React.createElement("div",{style:{display:"flex",flexDirection:"column"}},React.createElement("div",{style:{display:"flex",alignItems:"center"}},!l&&!N&&!D&&React.createElement(nt.A,{name:"wplr_sync-lr-id",placeholder:"Type the LR ID",style:{marginRight:5},inputStyle:N?{backgroundColor:"#007cb9",color:"#ffffff4f"}:{},readOnly:l||N,value:m,onChange:I}),!l&&M&&React.createElement(E.M,{disabled:!v,onClick:A},"Link"),!l&&F&&React.createElement(E.M,{className:"danger",onClick:C},Ee.DELETE)),!l&&M&&React.createElement("small",null,"You can also ",React.createElement("a",{style:{cursor:"pointer"},onClick:T},"ignore")," this."),function(e,t,r){return l?React.createElement(p.s,{div:!0},"Loading..."):"unlinked"===e?null:"ignored"===e?React.createElement(p.s,{div:!0},Ee.IGNORED," "):t>0?(n=r)&&new Date(n).getTime()&&"0000-00-00 00:00:00"!==r?React.createElement(p.s,{div:!0},Ee.SYNCED_AT," ",function(e){var t=new Date(e),r=t.getFullYear(),n=t.getMonth()+1,o=t.getDate(),a=ut((new Date).toLocaleDateString().split("/"),3),i=a[0],l=a[1],c=a[2];if("".concat(r).concat(n).concat(o)==="".concat(i).concat(l).concat(c)){var u=t.getHours(),s=u>12,f=s?"pm":"am";u=s?u-12:u;var d=t.getMinutes();return"".concat(u,":").concat(d," ").concat(f)}return"".concat(r,"/").concat(n,"/").concat(o)}(r)," "):React.createElement(p.s,{div:!0},Ee.NEVER_SYNCED):React.createElement(p.s,{div:!0},Ee.UNKNOWN);var n}(o,m,R),!l&&N&&React.createElement("a",{style:{cursor:"pointer"},onClick:j},"(unlink)"),!l&&D&&React.createElement("a",{style:{cursor:"pointer"},onClick:j}," (undo)"))))};function mt(e){return mt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},mt(e)}function yt(e){return function(e){if(Array.isArray(e))return Rt(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Et(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function gt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function vt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?gt(Object(r),!0).forEach((function(t){bt(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):gt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function bt(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=mt(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=mt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==mt(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function wt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,l=[],c=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return l}}(e,t)||Et(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Et(e,t){if(e){if("string"==typeof e)return Rt(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Rt(e,t):void 0}}function Rt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var xt=wp.element,_t=xt.useState,kt=xt.useMemo,St={revalidateOnFocus:!1,shouldRetryOnError:!1};const Ot=function(e){var t=e.busy,r=wt(_t("unlinked"),2),n=r[0],o=r[1],a=wt(_t([]),2),i=a[0],l=a[1],c=kt((function(){return[(0,x.mR)("".concat(O,"/entries"),{show:n}),{headers:{"X-WP-Nonce":L}}]}),[O,L,x.mR,n]),u=(0,he.Ay)(c,x.m9,St),s=u.data,f=u.mutate,d=ze(s,[],!0),m=d.busy,y=d.data,g=(d.error,t||m),v={width:120,height:120,objectFit:"cover"},w=kt((function(){return"duplicates"===n?[{accessor:"lr_id",title:Ee.LR_ID},{accessor:"filename",title:Ee.FILENAME},{accessor:"media",title:Ee.MEDIA,style:{width:500}}]:[{accessor:"thumbnail_url",title:Ee.THUMB,style:{width:40}},{accessor:"media",title:Ee.MEDIA},{accessor:"action",title:Ee.ACTION}]}),[n]),E=kt((function(){return"duplicates"===n?y.map((function(e){var t;return{id:e.ID,lr_id:e.lr_id,filename:e.lr_file||"Unknown",media:React.createElement("div",{style:{display:"flex",flexDirection:"column"}},null==e||null===(t=e.details)||void 0===t?void 0:t.map((function(t,r){var o=e.details.length>r+1?vt(vt({},v),{},{marginBottom:"5px"}):v;return React.createElement("div",{style:{display:"flex",alignItems:"center"}},React.createElement("img",{src:t.thumbnail_url,style:o}),React.createElement(ht,{show:n,wpId:t.ID,lrId:e.lr_id,mutate:function(){return f()}}))})))}})):y.map((function(e){return{id:e.ID,thumbnail_url:React.createElement("img",{src:e.thumbnail_url,style:v}),media:React.createElement("a",{href:"/wp-admin/post.php?post=".concat(e.ID,"&action=edit")},"# ",e.ID),action:React.createElement(ht,{show:n,wpId:e.ID,lrId:e.lr_id||null,mutate:function(){return f()}})}}))}),[y,n]),_=React.createElement(React.Fragment,null,React.createElement(h.d,null,React.createElement(p.s,{p:!0},"This screen will help you to link your unlinked photos between WordPress and Lightroom. ",React.createElement("b",null,"Don't forget that if you link a photo from here you also need to also add it manually to the WP/LR Service in Lightroom.")," Last but not least, be careful with the in 'Duplicated Links', they are ",React.createElement("b",null,"immediate")," and the 'Delete' is ",React.createElement("b",null,"unrecoverable"),".")),React.createElement(et.o,{name:"wplr_sync-consolidate",value:n,onChange:function(e){o(e)}},React.createElement(et.K,{title:"Unlinked Photos",value:"unlinked"}),React.createElement(et.K,{title:"Duplicated Links",value:"duplicates"}),React.createElement(et.K,{title:"Ignored Photos",value:"ignored"})),React.createElement("div",{style:{marginTop:10}}),React.createElement(tt.o,{busy:g,data:E,columns:w,onSelect:function(e){l([].concat(yt(i),yt(e)))},onUnselect:function(e){l(yt(i.filter((function(t){return!e.includes(t)}))))},selectedItems:i}));return React.createElement(b.N,null,React.createElement(b.Y,{minimal:!0},React.createElement(R.z,{busy:t,className:"primary"},_)))};var It=r(851);function Lt(e){return Lt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Lt(e)}function Pt(){Pt=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",l=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var a=t&&t.prototype instanceof g?t:g,i=Object.create(a.prototype),l=new P(n||[]);return o(i,"_invoke",{value:S(e,r,l)}),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var d="suspendedStart",p="suspendedYield",h="executing",m="completed",y={};function g(){}function v(){}function b(){}var w={};u(w,i,(function(){return this}));var E=Object.getPrototypeOf,R=E&&E(E(A([])));R&&R!==r&&n.call(R,i)&&(w=R);var x=b.prototype=g.prototype=Object.create(w);function _(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){function r(o,a,i,l){var c=f(e[o],e,a);if("throw"!==c.type){var u=c.arg,s=u.value;return s&&"object"==Lt(s)&&n.call(s,"__await")?t.resolve(s.__await).then((function(e){r("next",e,i,l)}),(function(e){r("throw",e,i,l)})):t.resolve(s).then((function(e){u.value=e,i(u)}),(function(e){return r("throw",e,i,l)}))}l(c.arg)}var a;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}})}function S(t,r,n){var o=d;return function(a,i){if(o===h)throw Error("Generator is already running");if(o===m){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var l=n.delegate;if(l){var c=O(l,n);if(c){if(c===y)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===d)throw o=m,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=h;var u=f(t,r,n);if("normal"===u.type){if(o=n.done?m:p,u.arg===y)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=m,n.method="throw",n.arg=u.arg)}}}function O(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,O(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var a=f(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,y;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,y):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function I(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function L(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(I,this),this.reset(!0)}function A(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(Lt(t)+" is not iterable")}return v.prototype=b,o(x,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:v,configurable:!0}),v.displayName=u(b,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,u(e,c,"GeneratorFunction")),e.prototype=Object.create(x),e},t.awrap=function(e){return{__await:e}},_(k.prototype),u(k.prototype,l,(function(){return this})),t.AsyncIterator=k,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new k(s(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},_(x),u(x,c,"Generator"),u(x,i,(function(){return this})),u(x,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=A,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(L),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return l.type="throw",l.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],l=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,y):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),L(r),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;L(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:A(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),y}},t}function At(e,t,r,n,o,a,i){try{var l=e[a](i),c=l.value}catch(e){return void r(e)}l.done?t(c):Promise.resolve(c).then(n,o)}function jt(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){At(a,n,o,i,l,"next",e)}function l(e){At(a,n,o,i,l,"throw",e)}i(void 0)}))}}function Tt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,l=[],c=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Ct(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ct(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ct(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var Nt=wp.element.useState;const Dt=function(e){var t=e.busy,r=e.extensions,n=e.troubles_issues,o=e.debugging_enabled,a=e.catch_errors,i=e.debuglogs,l=e.updateOption,c=(0,ot.XS)(),u=Tt(Nt(!1),2),s=u[0],f=u[1],d=Tt(Nt("Ready."),2),g=d[0],v=d[1],w=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;(e=null!==e?e:c.getErrorCount())>0?(alert("The process has finished, but ".concat(e," error(s) occurred.")),v("Error occured!")):v("Done!"),c.reset()},_=function(e){if("add_collection"==e.action){var t="1"==e.is_folder?"folder":"collection";return"Create ".concat(t," '").concat(e.name,"'...")}if("remove_collection"==e.action){var r="1"==e.is_folder?"folder":"collection";return"Remove ".concat(r," '").concat(e.name,"'...")}return"add_media"==e.action?"Add media ".concat(e.wp_id," to collection ").concat(e.wp_col_id,"..."):"remove_media"==e.action?"Remove media ".concat(e.wp_id," from collection ").concat(e.wp_col_id,"..."):"add_tag"==e.action?"Add tag ".concat(e.name,"..."):"update_tag"==e.action?"Add parent ".concat(e.parent," for tag ").concat(e.name,"..."):"add_media_tag"==e.action?"Add tag ".concat(e.id," to media ").concat(e.wp_id,"..."):"remove_media_tag"==e.action?"Remove tag ".concat(e.id," from media ").concat(e.wp_id,"..."):"remove_tag"==e.action?"Remove tag ".concat(e.name,"..."):"Running unknown tasks..."},k=function(){var e=jt(Pt().mark((function e(){var t,r;return Pt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return f(!0),v("Initiating sync..."),e.next=4,(0,x.Tb)("".concat(O,"/extensions_init"),{nonce:L,json:{is_removal:!1}});case 4:if((t=e.sent).success){e.next=9;break}return alert(t.message),f(!1),e.abrupt("return");case 9:return r=t.data.map((function(e){return function(){var t=jt(Pt().mark((function t(r){return Pt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return v(_(e)),t.next=3,(0,x.Tb)("".concat(O,"/extensions_query"),{nonce:L,json:{task:e},signal:r});case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()})),e.next=12,c.start(r);case 12:w(),f(!1);case 14:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),S=function(){var e=jt(Pt().mark((function e(){var t,r;return Pt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return f(!0),v("Initiating reset..."),e.next=4,(0,x.Tb)("".concat(O,"/extensions_init"),{nonce:L,json:{is_removal:!0}});case 4:if((t=e.sent).success){e.next=9;break}return alert(t.message),f(!1),e.abrupt("return");case 9:return r=t.data.map((function(e){return function(){var t=jt(Pt().mark((function t(r){return Pt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return v(_(e)),t.next=3,(0,x.Tb)("".concat(O,"/extensions_query"),{nonce:L,json:{task:e},signal:r});case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()})),e.next=12,c.start(r);case 12:if(!c.getErrorCount()){e.next=16;break}return w(),f(!1),e.abrupt("return");case 16:return v("Final reset..."),e.next=19,(0,x.Tb)("".concat(O,"/extensions_reset"),{nonce:L});case 19:if((t=e.sent).success){e.next=24;break}return alert(t.message),f(!1),e.abrupt("return");case 24:w(),f(!1);case 26:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),I=function(){var e=jt(Pt().mark((function e(){var t;return Pt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return f(!0),v("Cleaning..."),e.next=4,(0,x.Tb)("".concat(O,"/clean"),{nonce:L});case 4:if((t=e.sent).success){e.next=8;break}return alert(t.message),e.abrupt("return");case 8:w(),f(!1);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),P=function(){var e=jt(Pt().mark((function e(){var t;return Pt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return f(!0),v("Repairing..."),e.next=4,(0,x.Tb)("".concat(O,"/repair"),{nonce:L});case 4:if((t=e.sent).success){e.next=8;break}return alert(t.message),e.abrupt("return");case 8:alert(t.data),w(),f(!1);case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),A=n.length?React.createElement("ul",null,n.map((function(e){return React.createElement("li",null,e)}))):React.createElement(p.s,{p:!0},"Everything is fine. "),j=React.createElement(h.d,{title:"Debugging"},React.createElement(m.E,{max:"1"},React.createElement(y.R,{name:"wplr_debugging_enabled",label:"Enable",value:"1",checked:o,onChange:l,description:"Add a Debugging menu in Photo Engine. For advanced users only."}))),T=React.createElement(h.d,{title:"Catch Errors"},React.createElement(m.E,{max:"1"},React.createElement(y.R,{name:"wplr_catch_errors",label:"Enable",value:"1",checked:a,onChange:l,description:"Errors (from other plugins, themes, etc) happening during the Photo Engine process will be caught to avoid operations to fail."}))),C=React.createElement(h.d,{title:"Advanced Logs"},React.createElement(m.E,{max:"1"},React.createElement(y.R,{name:"wplr_debuglogs",label:"Enable",value:"1",checked:i,onChange:l,description:"Create an internal log file. For advanced users only."}))),N=React.createElement(React.Fragment,null,React.createElement(h.d,null,React.createElement(p.s,{p:!0},"Photo Engine synchronizes data about your photos, collections, and folders between your Lightroom and your WordPress. To use this data beyond the Media Library, you need to install and use extensions. You can learn more about it here: ",React.createElement("a",{href:"http://meowapps.com/wplr-sync-extensions/"},"WP/LR Extensions"),". You can also jump to ",React.createElement("a",{href:"https://wordpress.org/plugins/search/wplr-extension/"},"the list of the available extensions for Photo Engine"),"."),React.createElement("div",{style:{marginBottom:16}},React.createElement(E.M,{onClick:k},Ee.RESYNC_WITH_EXTENSIONS),React.createElement(E.M,{className:"secondary",onClick:S},Ee.RESET_WITH_EXTENSIONS),React.createElement(E.M,{className:"secondary",onClick:I},Ee.CLEAN_DB),React.createElement(E.M,{className:"secondary",onClick:P},Ee.REPAIR_DB)),React.createElement(It.j,{value:100,busy:s,status:g}),React.createElement(p.s,{p:!0,style:{marginBottom:3}},React.createElement("i",null,React.createElement("b",null,Ee.RESYNC_WITH_EXTENSIONS)," will request the extensions to (re)create the folders/collections/keywords structure.")),React.createElement(p.s,{p:!0,style:{marginTop:3,marginBottom:3}},React.createElement("i",null,React.createElement("b",null,Ee.RESET_WITH_EXTENSIONS)," will request the extensions to undo their usage of the folders/collections/keywords structure.")),React.createElement(p.s,{p:!0,style:{marginTop:3}},React.createElement("i",null,React.createElement("b",null,Ee.CLEAN_DB)," will remove from its own database the entries related to deleted Media.")),React.createElement(p.s,{p:!0},React.createElement("i",null,React.createElement("b",null,Ee.REPAIR_DB)," will repair if any table is missing or corrupted."))));return React.createElement(b.N,null,React.createElement(b.Y,{minimal:!0},React.createElement(R.z,{busy:t||s,title:"Actions",className:"primary"},N)),React.createElement(b.Y,{minimal:!0},React.createElement(R.z,{busy:t,title:"Extensions",className:"primary"},function(e){return 0===e.length?React.createElement(p.s,{p:!0},"No extensions have been loaded."):1===e.length?React.createElement(p.s,{p:!0},"The extension for ",React.createElement("b",null,e[0])," is loaded."):React.createElement(p.s,{p:!0},"The extensions for ",React.createElement("b",null,e.join(", "))," are loaded.")}(r)),React.createElement(R.z,{busy:t,title:"Potential issues",className:"primary"},A),React.createElement(R.z,{busy:t,title:"Debugging",className:"primary"},j,T,C)))};function Ft(e){return Ft="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ft(e)}function Mt(){Mt=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",l=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var a=t&&t.prototype instanceof g?t:g,i=Object.create(a.prototype),l=new P(n||[]);return o(i,"_invoke",{value:S(e,r,l)}),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var d="suspendedStart",p="suspendedYield",h="executing",m="completed",y={};function g(){}function v(){}function b(){}var w={};u(w,i,(function(){return this}));var E=Object.getPrototypeOf,R=E&&E(E(A([])));R&&R!==r&&n.call(R,i)&&(w=R);var x=b.prototype=g.prototype=Object.create(w);function _(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){function r(o,a,i,l){var c=f(e[o],e,a);if("throw"!==c.type){var u=c.arg,s=u.value;return s&&"object"==Ft(s)&&n.call(s,"__await")?t.resolve(s.__await).then((function(e){r("next",e,i,l)}),(function(e){r("throw",e,i,l)})):t.resolve(s).then((function(e){u.value=e,i(u)}),(function(e){return r("throw",e,i,l)}))}l(c.arg)}var a;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}})}function S(t,r,n){var o=d;return function(a,i){if(o===h)throw Error("Generator is already running");if(o===m){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var l=n.delegate;if(l){var c=O(l,n);if(c){if(c===y)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===d)throw o=m,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=h;var u=f(t,r,n);if("normal"===u.type){if(o=n.done?m:p,u.arg===y)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=m,n.method="throw",n.arg=u.arg)}}}function O(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,O(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var a=f(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,y;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,y):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function I(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function L(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(I,this),this.reset(!0)}function A(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(Ft(t)+" is not iterable")}return v.prototype=b,o(x,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:v,configurable:!0}),v.displayName=u(b,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,u(e,c,"GeneratorFunction")),e.prototype=Object.create(x),e},t.awrap=function(e){return{__await:e}},_(k.prototype),u(k.prototype,l,(function(){return this})),t.AsyncIterator=k,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new k(s(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},_(x),u(x,c,"Generator"),u(x,i,(function(){return this})),u(x,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=A,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(L),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return l.type="throw",l.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],l=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,y):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),L(r),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;L(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:A(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),y}},t}function Gt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ut(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Gt(Object(r),!0).forEach((function(t){zt(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Gt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function zt(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=Ft(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=Ft(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Ft(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Bt(e,t,r,n,o,a,i){try{var l=e[a](i),c=l.value}catch(e){return void r(e)}l.done?t(c):Promise.resolve(c).then(n,o)}function Wt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var Yt=wp.element,qt=Yt.useState,Ht=Yt.useMemo,Vt={revalidateOnFocus:!1,shouldRetryOnError:!1};const Kt=function(){var e,t,r,n,o,a,i,l,c,u=Ht((function(){return["".concat(O,"/all_settings/"),{headers:{"X-WP-Nonce":L}}]}),[O,L]),f=(0,he.Ay)(u,x.m9,Vt),d=f.data,h=f.mutate,m=ze(d,{},!0),y=m.busy,E=m.data,R=m.error,_=(l=qt(!1),c=2,function(e){if(Array.isArray(e))return e}(l)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,l=[],c=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return l}}(l,c)||function(e,t){if(e){if("string"==typeof e)return Wt(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Wt(e,t):void 0}}(l,c)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),k=_[0],S=_[1],I=y||k,P=null==E?void 0:E.wplr_use_taken_date,A=null==E?void 0:E.wplr_upload_folder,j=null==E?void 0:E.wplr_filename_accents,T=null==E?void 0:E.wplr_enable_keywords,C=null==E?void 0:E.wplr_sync_keywords,N=null!==(e=null==E?void 0:E.sync_keywords_options)&&void 0!==e?e:[],D=null!==(t=null==E?void 0:E.troubles_issues)&&void 0!==t?t:[],F=null==E?void 0:E.wplr_library_show_hierarchy,M=null==E?void 0:E.wplr_public_api,G=null!==(r=null==E?void 0:E.wplr_auth_token)&&void 0!==r&&r,U=null==E?void 0:E.wplr_qr,z=null==E?void 0:E.wplr_debugging_enabled,B=null==E?void 0:E.wplr_catch_errors,W=null==E?void 0:E.wplr_debuglogs,Y=null==E?void 0:E.wplr_check_same_file,q=null!==(n=null==E?void 0:E.extensions)&&void 0!==n?n:[],H=null!==(o=null==E?void 0:E.wplr_media_organizer)&&void 0!==o&&o,V=null!==(a=null==E?void 0:E.wplr_media_library)&&void 0!==a&&a,K=null!==(i=null==E?void 0:E.wplr_media_modals)&&void 0!==i&&i,X=null==E?void 0:E.wr2x_big_image_size_threshold,$=function(){var e,t=(e=Mt().mark((function e(t,r){var n;return Mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log({value:t,name:r}),(n=Ut({},d.data))[r]=t,h(Ut(Ut({},d),{},{data:n}),!1),S(!0),e.prev=5,e.next=8,(0,x.Tb)("".concat(O,"/update_option"),{json:{name:r,value:t},nonce:L});case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(5),alert(e.t0.message);case 13:return e.prev=13,S(!1),h(),e.finish(13);case 17:case"end":return e.stop()}}),e,null,[[5,10,13,17]])})),function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){Bt(a,n,o,i,l,"next",e)}function l(e){Bt(a,n,o,i,l,"throw",e)}i(void 0)}))});return function(e,r){return t.apply(this,arguments)}}();return React.createElement(s.A,null,React.createElement(g.z,{nekoErrors:[R]},React.createElement(v.n,{title:"Photo Engine | Settings",subtitle:"By Jordy Meow"}),React.createElement(b.N,null,React.createElement(b.Y,{fullWidth:!0},React.createElement(me.L,null,React.createElement(p.s,{p:!0},"If you wish to link your Lightroom with Photo Engine, you will need the ",React.createElement("a",{target:"_blank",href:"https://meowapps.com/plugin/wplr-sync/"},"WP/LR Sync Plugin for Lightroom"),". You can also use Photo Engine without Lightroom, by organizing your photos through folders and collections in the Media Organizer. Then, those folders and collections can be used by other plugins (such as ",React.createElement("a",{target:"_blank",href:"https://meowapps.com/plugin/meow-gallery/"},"Meow Gallery"),"), your theme, mobile apps, etc. The possibilities are endless! :)")),React.createElement(w._,{keepTabOnReload:!0},React.createElement(w.V,{title:"Basics"},React.createElement(ye,{busy:I,use_taken_date:P,upload_folder:A,filename_accents:j,troubles_issues:D,library_show_hierarchy:F,public_api:M,big_image_size_threshold:X,check_same_file:Y,extensions:q,auth_token:G,qr:U,updateOption:$,media_organizer:H,media_library:V,media_modals:K})),React.createElement(w.V,{title:"Keywords (Tags)"},React.createElement(Ze,{busy:I,enable_keywords:T,sync_keywords:C,sync_keywords_options:N,updateOption:$})),React.createElement(w.V,{title:"Consolidate with Lightroom"},React.createElement(Ot,{busy:I})),React.createElement(w.V,{title:"Extensions & Debug"},React.createElement(Dt,{busy:I,troubles_issues:D,extensions:q,debugging_enabled:z,catch_errors:B,debuglogs:W,updateOption:$})))))))};var Xt=r(1594),$t="tabIndex",Jt="folderIds",Qt="galleryId",Zt="source",er=function(){return localStorage.getItem(Jt)?JSON.parse(localStorage.getItem(Jt)):[]},tr=function(e){null===e?localStorage.removeItem(Jt):localStorage.setItem(Jt,JSON.stringify(e))},rr=function(e){null===e?localStorage.removeItem(Qt):localStorage.setItem(Qt,e)};function nr(e){return nr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},nr(e)}function or(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,l=[],c=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ar(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ar(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ar(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function ir(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function lr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ir(Object(r),!0).forEach((function(t){cr(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ir(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function cr(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=nr(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=nr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==nr(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ur(){ur=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",l=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var a=t&&t.prototype instanceof g?t:g,i=Object.create(a.prototype),l=new P(n||[]);return o(i,"_invoke",{value:S(e,r,l)}),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var d="suspendedStart",p="suspendedYield",h="executing",m="completed",y={};function g(){}function v(){}function b(){}var w={};u(w,i,(function(){return this}));var E=Object.getPrototypeOf,R=E&&E(E(A([])));R&&R!==r&&n.call(R,i)&&(w=R);var x=b.prototype=g.prototype=Object.create(w);function _(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){function r(o,a,i,l){var c=f(e[o],e,a);if("throw"!==c.type){var u=c.arg,s=u.value;return s&&"object"==nr(s)&&n.call(s,"__await")?t.resolve(s.__await).then((function(e){r("next",e,i,l)}),(function(e){r("throw",e,i,l)})):t.resolve(s).then((function(e){u.value=e,i(u)}),(function(e){return r("throw",e,i,l)}))}l(c.arg)}var a;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}})}function S(t,r,n){var o=d;return function(a,i){if(o===h)throw Error("Generator is already running");if(o===m){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var l=n.delegate;if(l){var c=O(l,n);if(c){if(c===y)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===d)throw o=m,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=h;var u=f(t,r,n);if("normal"===u.type){if(o=n.done?m:p,u.arg===y)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=m,n.method="throw",n.arg=u.arg)}}}function O(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,O(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var a=f(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,y;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,y):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function I(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function L(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(I,this),this.reset(!0)}function A(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(nr(t)+" is not iterable")}return v.prototype=b,o(x,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:v,configurable:!0}),v.displayName=u(b,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,u(e,c,"GeneratorFunction")),e.prototype=Object.create(x),e},t.awrap=function(e){return{__await:e}},_(k.prototype),u(k.prototype,l,(function(){return this})),t.AsyncIterator=k,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new k(s(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},_(x),u(x,c,"Generator"),u(x,i,(function(){return this})),u(x,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=A,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(L),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return l.type="throw",l.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],l=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,y):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),L(r),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;L(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:A(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),y}},t}function sr(e,t,r,n,o,a,i){try{var l=e[a](i),c=l.value}catch(e){return void r(e)}l.done?t(c):Promise.resolve(c).then(n,o)}function fr(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){sr(a,n,o,i,l,"next",e)}function l(e){sr(a,n,o,i,l,"throw",e)}i(void 0)}))}}var dr,pr,hr,mr,yr,gr=er(),vr=localStorage.getItem(Qt),br=localStorage.getItem(Zt),wr={accessor:"size",by:"desc"},Er={folderId:null,collectionId:null,source:null},Rr={revalidateOnFocus:!1,shouldRetryOnError:!1},xr=0,_r={sort:wr,page:1,limit:20,busy:!1,apiErrors:null,mediaSection:"all",wpFoldersAndGalleries:[],lrFoldersAndGalleries:[],allMedias:[],unassignedEntries:[],galleryContent:null,folderContent:null,total:0,totalAllMedias:0,totalUnassignedEntries:0,expandedFolderIds:gr,showAllMedias:!vr,showUnassignedEntries:!1,selected:{parentId:null,folderId:!vr&&gr.length?gr[gr.length-1]:null,galleryId:vr,source:br,expandedFolderIds:gr},dragging:{action:null,items:[],itemParent:null,itemType:null},pressShift:!1,pressCtrl:!1,modals:{deleteAll:!1,trashAll:!1,recoverAll:!1,createNewCollection:!1,updateCollection:!1,deleteCollection:!1,removePhoto:!1,removePhotos:!1,editPhoto:!1,createNewFolder:!1,updateFolder:!1,deleteFolder:!1},modalData:Er,mutateWpFoldersAndGalleries:(yr=fr(ur().mark((function e(){return ur().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))),function(){return yr.apply(this,arguments)}),mutateLrFoldersAndGalleries:(mr=fr(ur().mark((function e(){return ur().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))),function(){return mr.apply(this,arguments)}),mutateAllMedias:(hr=fr(ur().mark((function e(){return ur().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))),function(){return hr.apply(this,arguments)}),mutateUnassignedEntries:(pr=fr(ur().mark((function e(){return ur().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))),function(){return pr.apply(this,arguments)}),mutateGalleryContent:(dr=fr(ur().mark((function e(){return ur().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))),function(){return dr.apply(this,arguments)})},kr="PAGE_UPDATED",Sr="LIMIT_UPDATED",Or="SORT_UPDATED",Ir="TOTAL_UPDATED",Lr="MEDIA_SECTION_UPDATED",Pr="TOTAL_ALL_MEDIAS_UPDATED",Ar="TOTAL_UNASSIGNED_ENTRIES_UPDATED",jr="TOGGLE_MODAL",Tr="RESET_MODAL",Cr="PUSH_BUSY",Nr="POP_BUSY",Dr="WP_FOLDERS_AND_GALLERIES_UPDATED",Fr="LR_FOLDERS_AND_GALLERIES_UPDATED",Mr="ALL_MEDIAS_UPDATED",Gr="UNASSIGNED_ENTRIES_UPDATED",Ur="GALLERY_CONTENT_UPDATED",zr="ERROR_UPDATED",Br="SET_WP_FOLDERS_AND_GALLERIES_MUTATE",Wr="SET_LR_FOLDERS_AND_GALLERIES_MUTATE",Yr="SET_ALL_MEDIAS_MUTATE",qr="SET_UNASSIGNED_ENTRIES_MUTATE",Hr="SET_GALLERY_CONTENT_MUTATE",Vr="SHOW_ALL_MEDIAS_UPDATED",Kr="SHOW_UNASSIGNED_ENTRIES_UPDATED",Xr="SELECTED_UPDATED",$r="DRAGGING_UPDATED",Jr="PRESS_SHIFT_UPDATED",Qr="PRESS_CTRL_UPDATED",Zr="FOLDER_CONTENT_UPDATED",en=function(e,t){switch(t.type){case Dr:var r=t.wpFoldersAndGalleries;return lr(lr({},e),{},{wpFoldersAndGalleries:r});case Br:var n=t.mutateWpFoldersAndGalleries;return lr(lr({},e),{},{mutateWpFoldersAndGalleries:n});case Fr:var o=t.lrFoldersAndGalleries;return lr(lr({},e),{},{lrFoldersAndGalleries:o});case Wr:var a=t.mutateLrFoldersAndGalleries;return lr(lr({},e),{},{mutateLrFoldersAndGalleries:a});case Mr:var i=t.allMedias;return lr(lr({},e),{},{allMedias:i});case Yr:var l=t.mutateAllMedias;return lr(lr({},e),{},{mutateAllMedias:l});case Gr:var c=t.unassignedEntries;return lr(lr({},e),{},{unassignedEntries:c});case qr:var u=t.mutateUnassignedEntries;return lr(lr({},e),{},{mutateUnassignedEntries:u});case Ur:var s=t.galleryContent;return lr(lr({},e),{},{galleryContent:s});case Hr:var f=t.mutateGalleryContent;return lr(lr({},e),{},{mutateGalleryContent:f});case zr:var d=t.apiErrors;return lr(lr({},e),{},{apiErrors:d});case kr:var p=t.page;return lr(lr({},e),{},{page:p});case Sr:var h=t.limit;return lr(lr({},e),{},{limit:h});case Or:var m=t.sort,y=void 0===m?wr:m;return lr(lr({},e),{},{sort:y});case Ir:var g=t.total;return lr(lr({},e),{},{total:g});case Lr:var v=t.mediaSection;return lr(lr({},e),{},{mediaSection:v});case Pr:var b=t.totalAllMedias;return lr(lr({},e),{},{totalAllMedias:b});case Ar:var w=t.totalUnassignedEntries;return lr(lr({},e),{},{totalUnassignedEntries:w});case jr:var E=t.modal,R=t.enable,x=t.data;if(void 0===e.modals[E])return alert("The modal ".concat(E," doesn't exist.")),console.error("The modal ".concat(E," doesn't exist.")),e;void 0===R&&(R=!e.modals[E]);var _=lr({},e);return _.modals=lr({},_.modals),_.modals[E]=R,x&&(_.modalData=x),_;case Tr:var k=Object.fromEntries(Object.entries(e.modals).map((function(e){return[or(e,1)[0],!1]})));return lr(lr({},e),{},{modals:k,modalData:Er});case Cr:var S=t.status,O=void 0===S?"":S;return lr(lr({},e),{},{busy:++xr>0,status:O});case Nr:var I=t.status,L=void 0===I?"":I;return lr(lr({},e),{},{busy:--xr>0,status:L});case Vr:var P=t.showAllMedias;return lr(lr({},e),{},{showAllMedias:P});case Kr:var A=t.showUnassignedEntries;return lr(lr({},e),{},{showUnassignedEntries:A});case Xr:var j=t.selected;return lr(lr({},e),{},{selected:j});case $r:var T=t.dragging;return lr(lr({},e),{},{dragging:T});case Jr:var C=t.pressShift;return lr(lr({},e),{},{pressShift:C});case Qr:var N=t.pressCtrl;return lr(lr({},e),{},{pressCtrl:N});case Zr:var D=t.folderContent;return lr(lr({},e),{},{folderContent:D});default:return e}},tn=(0,Xt.createContext)(),rn=function(e){var t=e.children,r=or((0,Xt.useReducer)(en,_r),2),n=r[0],o=r[1],a=n.sort,i=n.page,l=n.limit,c=n.mediaSection,u=(0,Xt.useMemo)((function(){switch(c){case je:return[(0,x.mR)("".concat(O,"/unassigned_entries"),{limit:l,skip:(i-1)*l,orderBy:a.accessor,order:a.by}),{headers:{"X-WP-Nonce":L}}];case Te:return[(0,x.mR)("".concat(O,"/gallery_content"),{collectionId:n.selected.galleryId,limit:l,skip:(i-1)*l,orderBy:a.accessor,order:a.by}),{headers:{"X-WP-Nonce":L}}];default:return[(0,x.mR)("".concat(O,"/all_media/"),{limit:l,skip:(i-1)*l,orderBy:a.accessor,order:a.by}),{headers:{"X-WP-Nonce":L}}]}}),[a,i,l,c,n.selected.galleryId]),s=(0,he.Ay)(u,x.m9,Rr),f=s.data,d=s.mutate,p=ze(f,[],!0),h=p.busy,m=p.data,y=p.total,g=p.error;(0,Xt.useEffect)((function(){switch(c){case je:o({type:qr,mutateUnassignedEntries:d});case Te:o({type:Hr,mutateGalleryContent:d});default:o({type:Yr,mutateAllMedias:d})}}),[d,c]),(0,Xt.useEffect)((function(){switch(c){case je:o({type:Gr,unassignedEntries:m});case Te:o({type:Ur,galleryContent:m});default:o({type:Mr,allMedias:m})}}),[m,c]),(0,Xt.useEffect)((function(){switch(c){case je:o({type:Ar,totalUnassignedEntries:y});case Te:o({type:Ir,total:y});default:o({type:Pr,totalAllMedias:y})}}),[y,c]),(0,Xt.useEffect)((function(){o({type:h?Cr:Nr})}),[h]),(0,Xt.useEffect)((function(){o({type:zr,apiError:g})}),[g]);var v=(0,Xt.useMemo)((function(){return["".concat(O,"/wp_hierarchy/"),{headers:{"X-WP-Nonce":L}}]}),[O,L]),b=(0,he.Ay)(v,x.m9,Rr),w=b.data,E=b.mutate,R=ze(w,[],!0),_=R.busy,k=R.data,S=R.error;(0,Xt.useEffect)((function(){o({type:Br,mutateWpFoldersAndGalleries:E})}),[E]),(0,Xt.useEffect)((function(){o({type:_?Cr:Nr})}),[_]),(0,Xt.useEffect)((function(){o({type:Dr,wpFoldersAndGalleries:k})}),[k]),(0,Xt.useEffect)((function(){o({type:zr,apiError:S})}),[S]);var I=(0,Xt.useMemo)((function(){return["".concat(O,"/lr_hierarchy/"),{headers:{"X-WP-Nonce":L}}]}),[O,L]),P=(0,he.Ay)(I,x.m9,Rr),A=P.data,j=P.mutate,T=ze(A,[],!0),C=T.busy,N=T.data,D=T.error;return(0,Xt.useEffect)((function(){o({type:Wr,mutateLrFoldersAndGalleries:j})}),[j]),(0,Xt.useEffect)((function(){o({type:C?Cr:Nr})}),[C]),(0,Xt.useEffect)((function(){o({type:Fr,lrFoldersAndGalleries:N})}),[N]),(0,Xt.useEffect)((function(){o({type:zr,apiError:D})}),[D]),(0,Xt.useEffect)((function(){var e,t=n.dragging,r=n.selected;t.items.length||(rr(r.galleryId),null===(e=r.source)?localStorage.removeItem(Zt):localStorage.setItem(Zt,e),r.galleryId||o({type:Ur,galleryContent:null}))}),[n.selected.galleryId]),React.createElement(tn.Provider,{value:[n,o]},t)};const nn=function(){var e={},t=or((0,Xt.useContext)(tn),2),r=t[0],n=t[1];return e.setMediaSection=function(e){n({type:Lr,mediaSection:e})},e.setGalleryContent=function(e){n({type:Ur,galleryContent:e})},e.setTotal=function(e){n({type:Ir,total:e})},e.setPage=function(e){n({type:kr,page:e})},e.setLimit=function(e){n({type:Sr,limit:e})},e.setSort=function(e){n({type:Or,sort:e})},e.setSelected=function(e){n({type:Xr,selected:e})},e.setDragging=function(e){n({type:$r,dragging:e})},e.setPressShift=function(e){n({type:Jr,pressShift:e})},e.setPressCtrl=function(e){n({type:Qr,pressCtrl:e})},e.setFolderContent=function(e){n({type:Zr,folderContent:e})},e.toggleModal=function(e){n({type:jr,modal:e,enable:!(arguments.length>1&&void 0!==arguments[1])||arguments[1],data:arguments.length>2?arguments[2]:void 0})},e.resetModal=function(){n({type:Tr})},e.pushBusy=function(){n({type:Cr})},e.popBusy=function(){n({type:Nr})},e.setShowAllMedias=function(e){n({type:Vr,showAllMedias:e})},e.setShowUnassignedEntries=function(e){n({type:Kr,showUnassignedEntries:e})},e.createNewFolder=function(){var e=fr(ur().mark((function e(t,o,a){var i;return ur().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=!1,n({type:Cr}),e.prev=2,e.next=5,(0,x.Tb)("".concat(O,"/create_folder"),{json:{name:t,parent_folder_id:o,source:a},nonce:L});case 5:if(e.sent.success){e.next=8;break}throw new Error("Failed to create a new folder.");case 8:a===xe?r.mutateLrFoldersAndGalleries():a===Re&&r.mutateWpFoldersAndGalleries(),i=!0,e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),alert(e.t0.message);case 15:return e.prev=15,n({type:Tr}),n({type:Nr}),e.finish(15);case 19:return e.abrupt("return",i);case 20:case"end":return e.stop()}}),e,null,[[2,12,15,19]])})));return function(t,r,n){return e.apply(this,arguments)}}(),e.updateFolder=function(){var e=fr(ur().mark((function e(t,o,a){var i;return ur().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=!1,n({type:Cr}),e.prev=2,e.next=5,(0,x.Tb)("".concat(O,"/update_folder"),{json:{id:t,name:o},nonce:L});case 5:if(e.sent.success){e.next=8;break}throw new Error("Failed to update the folder.");case 8:a===xe?r.mutateLrFoldersAndGalleries():a===Re&&r.mutateWpFoldersAndGalleries(),i=!0,e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),alert(e.t0.message);case 15:return e.prev=15,n({type:Tr}),n({type:Nr}),e.finish(15);case 19:return e.abrupt("return",i);case 20:case"end":return e.stop()}}),e,null,[[2,12,15,19]])})));return function(t,r,n){return e.apply(this,arguments)}}(),e.deleteFolder=function(){var e=fr(ur().mark((function e(t,o){var a;return ur().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=!1,n({type:Cr}),e.prev=2,e.next=5,(0,x.Tb)("".concat(O,"/delete_folder"),{json:{id:t},nonce:L});case 5:if(e.sent.success){e.next=8;break}throw new Error("Failed to delete the folder.");case 8:o===xe?r.mutateLrFoldersAndGalleries():o===Re&&r.mutateWpFoldersAndGalleries(),n({type:Xr,selected:lr(lr({},r.selected),{},{folderId:r.selected.parentId})}),a=!0,e.next=16;break;case 13:e.prev=13,e.t0=e.catch(2),alert(e.t0.message);case 16:return e.prev=16,n({type:Tr}),n({type:Nr}),e.finish(16);case 20:return e.abrupt("return",a);case 21:case"end":return e.stop()}}),e,null,[[2,13,16,20]])})));return function(t,r){return e.apply(this,arguments)}}(),e.folderDrop=function(){var e=fr(ur().mark((function e(t){var o,a,i,l,c,u;return ur().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=!1,i=lr({},r.selected),l=lr({},r.dragging),c=null===(o=l.items)||void 0===o?void 0:o.map((function(e){return e.id})),u=t?null:i.folderId,l.itemType!==_e&&!c.includes(u)){e.next=10;break}return n({type:Xr,selected:lr(lr({},i),{},{galleryId:null})}),n({type:Jr,pressShift:!1}),n({type:Qr,pressCtrl:!1}),e.abrupt("return",a);case 10:return n({type:Cr}),e.prev=11,e.next=14,(0,x.Tb)("".concat(O,"/move_collection"),{json:{ids:c,parent_id:u},nonce:L});case 14:if(e.sent.success){e.next=17;break}throw new Error("Failed to move the folder / collection.");case 17:r.mutateWpFoldersAndGalleries(),l.itemType===Se&&n({type:Xr,selected:lr(lr({},i),{},{folderId:null,galleryId:c[c.length-1]})}),a=!0,e.next=25;break;case 22:e.prev=22,e.t0=e.catch(11),alert(e.t0.message);case 25:return e.prev=25,n({type:Jr,pressShift:!1}),n({type:Qr,pressCtrl:!1}),n({type:Nr}),e.finish(25);case 30:return e.abrupt("return",a);case 31:case"end":return e.stop()}}),e,null,[[11,22,25,30]])})));return function(t){return e.apply(this,arguments)}}(),e.createCollection=function(){var e=fr(ur().mark((function e(t,o,a){var i;return ur().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=!1,n({type:Cr}),e.prev=2,e.next=5,(0,x.Tb)("".concat(O,"/create_gallery"),{json:{name:t,parent_folder_id:o,source:a},nonce:L});case 5:if(e.sent.success){e.next=8;break}throw new Error("Failed to create a new collection.");case 8:a===xe?r.mutateLrFoldersAndGalleries():a===Re&&r.mutateWpFoldersAndGalleries(),i=!0,e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),alert(e.t0.message);case 15:return e.prev=15,n({type:Tr}),n({type:Nr}),e.finish(15);case 19:return e.abrupt("return",i);case 20:case"end":return e.stop()}}),e,null,[[2,12,15,19]])})));return function(t,r,n){return e.apply(this,arguments)}}(),e.updateCollection=function(){var e=fr(ur().mark((function e(t,o,a){var i;return ur().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=!1,n({type:Cr}),e.prev=2,e.next=5,(0,x.Tb)("".concat(O,"/update_gallery"),{json:{id:t,name:o},nonce:L});case 5:if(e.sent.success){e.next=8;break}throw new Error("Failed to update the collection.");case 8:a===xe?r.mutateLrFoldersAndGalleries():a===Re&&r.mutateWpFoldersAndGalleries(),i=!0,e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),alert(e.t0.message);case 15:return e.prev=15,n({type:Tr}),n({type:Nr}),e.finish(15);case 19:return e.abrupt("return",i);case 20:case"end":return e.stop()}}),e,null,[[2,12,15,19]])})));return function(t,r,n){return e.apply(this,arguments)}}(),e.deleteCollection=function(){var e=fr(ur().mark((function e(t,o){var a;return ur().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=!1,n({type:Cr}),e.prev=2,e.next=5,(0,x.Tb)("".concat(O,"/delete_gallery"),{json:{id:t},nonce:L});case 5:if(e.sent.success){e.next=8;break}throw new Error("Failed to delete the gallery.");case 8:o===xe?r.mutateLrFoldersAndGalleries():o===Re&&r.mutateWpFoldersAndGalleries(),r.mutateUnassignedEntries(),n({type:Xr,selected:lr(lr({},r.selected),{},{galleryId:null})}),a=!0,e.next=17;break;case 14:e.prev=14,e.t0=e.catch(2),alert(e.t0.message);case 17:return e.prev=17,n({type:Tr}),n({type:Nr}),e.finish(17);case 21:return e.abrupt("return",a);case 22:case"end":return e.stop()}}),e,null,[[2,14,17,21]])})));return function(t,r){return e.apply(this,arguments)}}(),e.collectionDrop=fr(ur().mark((function e(){var t,o,a,i,l,c,u;return ur().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=!1,a=lr({},r.selected),i=lr({},r.dragging),l=null===(t=i.items)||void 0===t?void 0:t.map((function(e){return e.ID})),c=i.itemParent,u=i.action,i.itemType===_e&&a.galleryId!==c&&u){e.next=11;break}return n({type:$r,dragging:{action:null,itemType:null,itemParent:null,items:[]}}),n({type:Jr,pressShift:!1}),n({type:Qr,pressCtrl:!1}),e.abrupt("return",o);case 11:if(n({type:Cr}),e.prev=12,u!==Ie){e.next=19;break}return e.next=16,(0,x.Tb)("".concat(O,"/move_media"),{json:{ids:l,new_col_id:a.galleryId,current_col_id:c},nonce:L});case 16:e.t0=e.sent,e.next=22;break;case 19:return e.next=21,(0,x.Tb)("".concat(O,"/copy_media"),{json:{ids:l,new_col_id:a.galleryId},nonce:L});case 21:e.t0=e.sent;case 22:if(e.t0.success){e.next=25;break}throw new Error("Failed to move the folder / collection.");case 25:r.mutateWpFoldersAndGalleries(),r.mutateUnassignedEntries(),n({type:Xr,selected:lr(lr({},a),{},{galleryId:i.itemParent})}),o=!0,e.next=34;break;case 31:e.prev=31,e.t1=e.catch(12),alert(e.t1.message);case 34:return e.prev=34,n({type:$r,dragging:{action:null,itemType:null,itemParent:null,items:[]}}),n({type:Jr,pressShift:!1}),n({type:Qr,pressCtrl:!1}),n({type:Nr}),e.finish(34);case 40:return e.abrupt("return",o);case 41:case"end":return e.stop()}}),e,null,[[12,31,34,40]])}))),e.updatePhoto=function(){var e=fr(ur().mark((function e(t,o){var a;return ur().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=!1,n({type:Cr}),e.prev=2,e.next=5,(0,x.Tb)("".concat(O,"/update_media"),{json:lr({id:t},o),nonce:L});case 5:if(e.sent.success){e.next=8;break}throw new Error("Failed to update the photo.");case 8:if(r.mutateWpFoldersAndGalleries(),!r.selected.galleryId){e.next=14;break}return e.next=12,r.mutateGalleryContent();case 12:e.next=16;break;case 14:r.mutateAllMedias(),r.mutateUnassignedEntries();case 16:a=!0,e.next=22;break;case 19:e.prev=19,e.t0=e.catch(2),alert(e.t0.message);case 22:return e.prev=22,n({type:Tr}),n({type:Nr}),e.finish(22);case 26:return e.abrupt("return",a);case 27:case"end":return e.stop()}}),e,null,[[2,19,22,26]])})));return function(t,r){return e.apply(this,arguments)}}(),e.removePhoto=function(){var e=fr(ur().mark((function e(t,o){var a;return ur().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=!1,n({type:Cr}),e.prev=2,e.next=5,(0,x.Tb)("".concat(O,"/remove_media"),{json:{ids:t,current_col_id:o},nonce:L});case 5:if(e.sent.success){e.next=8;break}throw new Error("Failed to remove the photo.");case 8:r.mutateWpFoldersAndGalleries(),r.mutateUnassignedEntries(),r.mutateGalleryContent(),a=!0,e.next=17;break;case 14:e.prev=14,e.t0=e.catch(2),alert(e.t0.message);case 17:return e.prev=17,n({type:$r,dragging:{action:null,itemType:null,itemParent:null,items:[]}}),n({type:Jr,pressShift:!1}),n({type:Qr,pressCtrl:!1}),n({type:Tr}),n({type:Nr}),e.finish(17);case 24:return e.abrupt("return",a);case 25:case"end":return e.stop()}}),e,null,[[2,14,17,24]])})));return function(t,r){return e.apply(this,arguments)}}(),e.updateFeaturedImage=function(){var e=fr(ur().mark((function e(t,o){var a;return ur().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=!1,n({type:Cr}),e.prev=2,e.next=5,(0,x.Tb)("".concat(O,"/update_featured_image"),{json:{collection_id:t,featured_image_id:o},nonce:L});case 5:if(e.sent.success){e.next=8;break}throw new Error("Failed to update the featured image.");case 8:if(r.selected.source!==Re){e.next=13;break}return e.next=11,r.mutateWpFoldersAndGalleries();case 11:e.next=16;break;case 13:if(r.selected.source!==xe){e.next=16;break}return e.next=16,r.mutateLrFoldersAndGalleries();case 16:a=!0,e.next=22;break;case 19:e.prev=19,e.t0=e.catch(2),alert(e.t0.message);case 22:return e.prev=22,n({type:Nr}),e.finish(22);case 25:return e.abrupt("return",a);case 26:case"end":return e.stop()}}),e,null,[[2,19,22,25]])})));return function(t,r){return e.apply(this,arguments)}}(),lr(lr({},r),e)};var on,an,ln,cn,un,sn=r(3276),fn=r(4975),dn=r(9794);function pn(e){return pn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pn(e)}function hn(){hn=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",l=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var a=t&&t.prototype instanceof g?t:g,i=Object.create(a.prototype),l=new P(n||[]);return o(i,"_invoke",{value:S(e,r,l)}),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var d="suspendedStart",p="suspendedYield",h="executing",m="completed",y={};function g(){}function v(){}function b(){}var w={};u(w,i,(function(){return this}));var E=Object.getPrototypeOf,R=E&&E(E(A([])));R&&R!==r&&n.call(R,i)&&(w=R);var x=b.prototype=g.prototype=Object.create(w);function _(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){function r(o,a,i,l){var c=f(e[o],e,a);if("throw"!==c.type){var u=c.arg,s=u.value;return s&&"object"==pn(s)&&n.call(s,"__await")?t.resolve(s.__await).then((function(e){r("next",e,i,l)}),(function(e){r("throw",e,i,l)})):t.resolve(s).then((function(e){u.value=e,i(u)}),(function(e){return r("throw",e,i,l)}))}l(c.arg)}var a;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}})}function S(t,r,n){var o=d;return function(a,i){if(o===h)throw Error("Generator is already running");if(o===m){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var l=n.delegate;if(l){var c=O(l,n);if(c){if(c===y)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===d)throw o=m,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=h;var u=f(t,r,n);if("normal"===u.type){if(o=n.done?m:p,u.arg===y)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=m,n.method="throw",n.arg=u.arg)}}}function O(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,O(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var a=f(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,y;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,y):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function I(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function L(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(I,this),this.reset(!0)}function A(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(pn(t)+" is not iterable")}return v.prototype=b,o(x,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:v,configurable:!0}),v.displayName=u(b,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,u(e,c,"GeneratorFunction")),e.prototype=Object.create(x),e},t.awrap=function(e){return{__await:e}},_(k.prototype),u(k.prototype,l,(function(){return this})),t.AsyncIterator=k,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new k(s(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},_(x),u(x,c,"Generator"),u(x,i,(function(){return this})),u(x,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=A,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(L),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return l.type="throw",l.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],l=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,y):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),L(r),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;L(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:A(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),y}},t}function mn(e,t,r,n,o,a,i){try{var l=e[a](i),c=l.value}catch(e){return void r(e)}l.done?t(c):Promise.resolve(c).then(n,o)}function yn(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){mn(a,n,o,i,l,"next",e)}function l(e){mn(a,n,o,i,l,"throw",e)}i(void 0)}))}}function gn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function vn(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?gn(Object(r),!0).forEach((function(t){bn(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):gn(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function bn(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=pn(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=pn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==pn(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function wn(e){return function(e){if(Array.isArray(e))return xn(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Rn(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function En(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,l=[],c=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return l}}(e,t)||Rn(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Rn(e,t){if(e){if("string"==typeof e)return xn(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?xn(e,t):void 0}}function xn(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function _n(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var kn=wp.element,Sn=kn.useState,On=kn.useMemo,In=kn.useEffect,Ln=A.Ay.div(on||(on=_n(["\n  \n"]))),Pn=A.Ay.p(an||(an=_n(["\n  padding: 10px;\n  margin: -5px 0 0 0;\n  font-size: 12px;\n"]))),An=A.Ay.div(ln||(ln=_n(["\n  background: var(--neko-main-color);\n  color: white;\n  cursor: pointer;\n  font-size: 13px;\n  line-height: 22px;\n  padding: 0 13px;\n"]))),jn=A.Ay.div(cn||(cn=_n(["\n  padding: 10px 10px 5px 5px;\n"]))),Tn=A.Ay.span(un||(un=_n(["\n  margin: 0px;\n  color: rgb(255 255 255);\n  background: #007cb9;\n  margin-top: 10px;\n  display: block;\n  font-family: monospace;\n  padding: 10px 15px;\n  font-size: 12px;\n  border-radius: 5px;\n  text-align: center;\n"])));const Cn=function(e){var t=e.activeTabIndex,r=e.onTabChange,n=e.isPurePhotoEngine,o=nn(),a=o.wpFoldersAndGalleries,i=o.lrFoldersAndGalleries,l=o.busy,c=o.showAllMedias,u=o.showUnassignedEntries,s=o.selected,f=o.dragging,d=o.pressShift,h=o.modals,m=o.modalData,y=nn(),g=y.setShowAllMedias,v=y.setSelected,b=y.setDragging,w=y.setPressShift,R=y.setPressCtrl,x=y.toggleModal,_=y.resetModal,k=y.setPage,S=y.setShowUnassignedEntries,O=y.setFolderContent,I=y.setGalleryContent,L=y.createNewFolder,P=y.updateFolder,A=y.deleteFolder,j=y.createCollection,T=y.updateCollection,C=y.deleteCollection,N=y.collectionDrop,D=y.folderDrop,F=y.setMediaSection,M=En(Sn(""),2),G=M[0],U=M[1],z=En(Sn(""),2),B=z[0],W=z[1];In((function(){n||(v(e.selected),g(e.showAllMedias))}),[n,e.selected,e.showAllMedias]);var Y=n,q=f.itemType===_e,H=f.itemType===Se,V=f.itemType===ke,K=m.source===xe,X=m.folderId?Ge(K?i:a,m.folderId):null,$=m.collectionId?Ge(K?i:a,m.collectionId):null,J=function(e,t){var r=s.expandedFolderIds?wn(s.expandedFolderIds):[];e.id===s.folderId&&(r=s.expandedFolderIds.includes(e.id)?s.expandedFolderIds.filter((function(t){return t!==e.id})):[].concat(wn(s.expandedFolderIds),[e.id])),v(vn(vn({},s),{},{folderId:e.id,source:e.source,parentId:t,expandedFolderIds:r}));var n=er(),o=n.length?n[n.length-1]:null;e.id!==o&&tr(o===t?[].concat(wn(n),[e.id]):[e.id])},Q=function(e){x("createNewFolder",!0,vn(vn({},m),{},{folderId:e?e.id:null,source:Re})),v(vn(vn({},s),{},{folderId:e?e.id:null,source:Re}))},Z=function(){var e=yn(hn().mark((function e(){return hn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L(G,m.folderId,m.source);case 2:e.sent&&U("");case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ee=function(){var e=yn(hn().mark((function e(t){return hn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P(t,G,m.source);case 2:e.sent&&U("");case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),te=function(){var e=yn(hn().mark((function e(t){return hn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A(t,m.source);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),re=function(t){v(vn(vn({},s),{},{folderId:null,galleryId:t.id,source:t.source})),b({action:null,itemType:null,itemParent:null,items:[]}),w(!1),R(!1),k(1),F(Te),e.onCollectionClick&&e.onCollectionClick(t)},ne=function(e){x("createNewCollection",!0,vn(vn({},m),{},{folderId:e?e.id:null,source:Re})),v(vn(vn({},s),{},{folderId:e?e.id:null,source:Re}))},oe=function(){var e=yn(hn().mark((function e(){return hn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j(B,m.folderId,m.source);case 2:e.sent&&W("");case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ae=function(){var e=yn(hn().mark((function e(t){return hn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T(t,B,m.source);case 2:e.sent&&W("");case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ie=function(){var e=yn(hn().mark((function e(t){return hn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C(t,m.source);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),le=function(e,t,r,n,o){b({action:Ue(n),itemType:Se,itemParent:r,items:t}),v(vn(vn({},o),{},{folderId:r}))},ce=function(e){b({action:null,itemType:null,itemParent:null,items:[]}),w(!1),R(!1)},ue=function(e,t,r){e.preventDefault(),r!==t&&e.target.click&&v(vn(vn({},s),{},{galleryId:t,source:Re}))},se=function(e,t,r){v(vn(vn({},t),{},q?{galleryId:r.itemParent}:{folderId:r.itemParent}))},fe=function(){var e=yn(hn().mark((function e(t){return hn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,N();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),de=function(e,t,r,n,o){b({action:Ue(n),itemType:ke,itemParent:r,items:t}),v(vn(vn({},o),{},{folderId:r}))},pe=function(){b({action:null,itemType:null,itemParent:null,items:[]})},he=function(e,t,r){e.preventDefault(),r!==t&&e.target.click&&e.target.click()},me=function(e,t,r){v(vn(vn({},t),{},{folderId:r.itemParent}))},ye=function(){var e=yn(hn().mark((function e(t){var r,n=arguments;return hn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.length>1&&void 0!==n[1]&&n[1],t.preventDefault(),e.next=4,D(r);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ge=function(){v({parentId:null,folderId:null,galleryId:null,source:null}),g(!0),F("all"),e.onAllMediaEntriesClick&&e.onAllMediaEntriesClick()},be=function(e,t){return n?React.createElement("div",{style:{display:"flex",alignItems:"center"}},React.createElement(sn.z,{icon:"folder-plus",onClick:function(){return Q(e)},width:"20",height:"20",color:"var(--neko-gray-60)",hoverColor:"var(--neko-green)",disabled:t}),React.createElement(sn.z,{icon:"image-plus",onClick:function(){return ne(e)},width:"20",height:"20",color:"var(--neko-gray-60)",hoverColor:"var(--neko-green)",disabled:t}),React.createElement(sn.z,{icon:"pencil",onClick:function(){return function(e){x("updateFolder",!0,vn(vn({},m),{},{folderId:e.id,source:Re})),v(vn(vn({},s),{},{folderId:e.id,source:Re}))}(e)},width:"20",height:"20",color:"var(--neko-gray-60)",hoverColor:"var(--neko-green)",disabled:t})):null},we=function(e,t){return n?React.createElement("div",{style:{display:"flex",alignItems:"center"}},React.createElement(sn.z,{icon:"pencil",onClick:function(){return function(e){x("updateCollection",!0,vn(vn({},m),{},{collectionId:e?e.id:null,source:Re})),v(vn(vn({},s),{},{galleryId:e.id,source:Re}))}(e)},width:"20",height:"20",color:"var(--neko-gray-60)",hoverColor:"var(--neko-green)",disabled:t})):null},Ee=function(e){var t;return React.createElement("div",{style:{display:"flex",alignItems:"center"}},React.createElement(p.s,{style:{color:"var(--neko-gray-60)",marginRight:"2px"}},null==e||null===(t=e.children)||void 0===t?void 0:t.length))},Oe=function e(t,r,n,o,a){return t.children.length?t.is_folder?t.children.map((function(i){var l,c,u=null===(l=n.items)||void 0===l?void 0:l.some((function(e){return e.id===i.id}));if(i.is_collection){var s=r.galleryId===i.id&&!n.action,f=q&&r.galleryId===i.id||H&&u;return React.createElement(ve.R,{key:i.id,title:i.name,icon:"gallery",dragging:f,draggable:Y&&!a,onDragStart:function(e){return le(0,[i],t.id,o,r)},onDragEnd:ce,onDragOver:function(e){return ue(e,i.id,r.galleryId)},onDrop:fe,onDragLeave:function(e){return se(0,r,n)},onClick:function(){return re(i)},selected:s,isExpanded:r.galleryId===i.id,rightAction:Ee(i),rightActionOnHover:we(i,a)})}var d=r.folderId===i.id&&!n.action,p=(H||V)&&i.id===r.folderId||V&&u;return React.createElement(ve.R,{key:i.id,title:i.name,preventClose:Boolean(n.action),dragging:p,draggable:Y&&!a,onDragStart:function(e){return de(0,[i],t.id,o,r)},onDragEnd:pe,onDragOver:function(e){return he(e,i.id,r.folderId)},onDrop:ye,onDragLeave:function(e){return me(0,r,n)},onClick:function(){return J(i,t.id)},selected:d,isExpanded:null==r||null===(c=r.expandedFolderIds)||void 0===c?void 0:c.includes(i.id),rightActionOnHover:be(i,a)},e(i,r,n,o,a))})):void 0:null},Ie=On((function(){return a.length?React.createElement(ve.M,null,a.map((function(e){var t,r,n=null,o=null===(t=f.items)||void 0===t?void 0:t.some((function(t){return t.id===e.id}));if(e.is_collection){var a=s.galleryId===e.id&&!f.action,i=q&&s.galleryId===e.id||H&&o;return React.createElement(ve.R,{key:e.id,title:React.createElement("span",{dangerouslySetInnerHTML:{__html:e.name}}),icon:"gallery",dragging:i,draggable:Y&&!l,onDragStart:function(t){return le(0,[e],n,d,s)},onDragEnd:ce,onDragOver:function(t){return ue(t,e.id,s.galleryId)},onDrop:fe,onDragLeave:function(e){return se(0,s,f)},onClick:function(){return re(e)},selected:a,isExpanded:s.galleryId===e.id,rightAction:Ee(e),rightActionOnHover:we(e,l)})}var c=s.folderId===e.id&&!f.action,u=(H||V)&&e.id===s.folderId||V&&o;return React.createElement(ve.R,{key:e.id,title:React.createElement("span",{dangerouslySetInnerHTML:{__html:e.name}}),preventClose:Boolean(f.action),dragging:u,draggable:Y&&!l,onDragStart:function(t){return de(0,[e],n,d,s)},onDragEnd:pe,onDragOver:function(t){return he(t,e.id,s.folderId)},onDrop:ye,onDragLeave:function(e){return me(0,s,f)},onClick:function(){return J(e,n)},selected:c,isExpanded:null==s||null===(r=s.expandedFolderIds)||void 0===r?void 0:r.includes(e.id),rightActionOnHover:be(e,l)},Oe(e,s,f,d,l))}))):React.createElement(Pn,null,"You can organize your photos into folders and collections manually here. You'll then be able to do cool things, such as using your collections directly as galleries in your content.")}),[a,s,f,d,l]),Le=function e(t,r){var n;return null!=t&&null!==(n=t.children)&&void 0!==n&&n.length?t.is_folder?t.children.map((function(n){var o;return n.is_collection?React.createElement(ve.R,{title:n.name,icon:"gallery",onClick:function(){return re(n)},selected:r.galleryId===n.id,rightAction:Ee(n)}):React.createElement(ve.R,{title:n.name,isExpanded:null==r||null===(o=r.expandedFolderIds)||void 0===o?void 0:o.includes(n.id),onClick:function(){return J(n,t.id)},selected:r.folderId===n.id},e(n,r))})):void 0:null},Pe=On((function(){return i.length?React.createElement(ve.M,null,i.map((function(e){var t;return e.is_collection?React.createElement(ve.R,{key:e.id,title:e.name,icon:"gallery",onClick:function(){return re(e)},selected:s.galleryId===e.id,rightAction:Ee(e)}):React.createElement(ve.R,{title:e.name,isExpanded:null==s||null===(t=s.expandedFolderIds)||void 0===t?void 0:t.includes(e.id),onClick:function(){return J(e,null)},selected:s.folderId===e.id},Le(e,s))}))):React.createElement(Pn,null,"You will be able to sync your Lightroom to this section of Photo Engine with ",React.createElement("a",{href:"https://meowapps.com/plugin/wplr-sync/",target:"_blank"},"WP/LR Sync"),". Avoid making changes here directly. The sync only goes from Lightroom to WordPress.")}),[i,s]);return React.createElement(Ln,null,React.createElement(An,{style:{paddingTop:"3px",fontWeight:c?"bold":"normal"},onClick:ge},"All Media Entries"),n&&React.createElement(An,{style:{paddingBottom:"3px",fontWeight:u?"bold":"normal"},onClick:function(){v({parentId:null,folderId:null,galleryId:null,source:null}),k(1),rr(null),S(!0),O(null),I(null),F(je)}},"Unassigned Entries"),React.createElement(fn.j,{onChange:function(e){null!==e?r&&r(e):ge()},activeTabIndex:t},React.createElement(fn.u,{title:"Photo Engine",onDragOver:he,onDrop:function(e){return ye(e,!0)},rightActions:n&&React.createElement("div",{style:{display:"flex",height:"36px",marginRight:"12px"}},React.createElement(sn.z,{icon:"folder-plus",onClick:function(e){e.stopPropagation(),Q()},width:"20",height:"20",color:"white",hoverColor:"var(--neko-green)",disabled:l}),React.createElement(sn.z,{icon:"image-plus",onClick:function(e){e.stopPropagation(),ne()},width:"20",height:"20",color:"white",hoverColor:"var(--neko-green)",disabled:l}))},React.createElement(jn,null,Ie)),React.createElement(fn.u,{title:"Lightroom"},React.createElement(jn,null,Pe))),React.createElement(dn.n,{isOpen:h.createNewFolder,onRequestClose:_,title:"Create a new folder",content:React.createElement(nt.A,{autoFocus:!0,name:"wplr_new_folder_name",placeholder:"folder name...",onInput:function(e){return U(e.target.value)}}),okOnEnter:!0,okButton:{label:"Create",onClick:Z},cancelButton:{label:"Cancel",onClick:_}}),React.createElement(dn.n,{isOpen:h.updateFolder,onRequestClose:_,title:"Modify or delete this folder",content:React.createElement(React.Fragment,null,React.createElement(nt.A,{autoFocus:!0,name:"wplr_update_folder_name",placeholder:"folder name...",value:null==X?void 0:X.name,onInput:function(e){return U(e.target.value)}}),React.createElement("div",{style:{marginTop:5}},"Slug: ",React.createElement("b",null,null==X?void 0:X.slug)," (not modifiable yet)"),React.createElement(Tn,null,'[gallery wplr-folder="'.concat(m.folderId,'"]')),React.createElement("small",null,"All the collections inside this folder will be united in a single gallery."),React.createElement(Tn,null,'[meow-collectin wplr-folder="'.concat(m.folderId,'"]')),React.createElement("small",null,"This folder will display as a collection and each collection inside will be a unique gallery.")),customButtons:React.createElement(E.M,{className:"danger",onClick:function(){return x("deleteFolder")},style:{marginRight:"auto"}},"Delete"),customButtonsPosition:"left",okOnEnter:!0,thumbnail:null!=X&&X.featured_image?React.createElement("img",{src:X.featured_image}):null,okButton:{label:"Update",onClick:function(){return ee(m.folderId)}},cancelButton:{label:"Cancel",onClick:_}}),React.createElement(dn.n,{isOpen:h.deleteFolder,onRequestClose:_,title:"Delete the folder",content:"Are you sure to delete this folder?",okOnEnter:!0,okButton:{label:"Delete",onClick:function(){return te(m.folderId)}},cancelButton:{label:"Cancel",onClick:_}}),React.createElement(dn.n,{isOpen:h.createNewCollection,onRequestClose:_,title:"Create a new collection",content:React.createElement(nt.A,{autoFocus:!0,name:"wplr_new_gallery_name",placeholder:"Collection name...",onInput:function(e){return W(e.target.value)}}),okOnEnter:!0,okButton:{label:"Create",onClick:oe},cancelButton:{label:"Cancel",onClick:_}}),React.createElement(dn.n,{OkOnEnter:!0,isOpen:h.updateCollection,onRequestClose:_,title:"Modify or Delete this collection",content:React.createElement(React.Fragment,null,React.createElement(nt.A,{autoFocus:!0,name:"wplr_update_gallery_name",placeholder:"Collection name...",onInput:function(e){return W(e.target.value)},value:null==$?void 0:$.name}),React.createElement("div",{style:{marginTop:5}},"Slug: ",React.createElement("b",null,null==$?void 0:$.slug)," (not modifiable yet)"),React.createElement(Tn,null,'[gallery wplr-collection="'.concat(m.collectionId,'"]'))),customButtons:React.createElement(E.M,{className:"danger",onClick:function(){return x("deleteCollection")},style:{marginRight:"auto"}},"Delete"),customButtonsPosition:"left",okOnEnter:!0,thumbnail:null!=$&&$.featured_image?React.createElement("img",{src:$.featured_image}):null,okButton:{label:"Update",onClick:function(){return ae(m.collectionId)}},cancelButton:{label:"Cancel",onClick:_}}),React.createElement(dn.n,{isOpen:h.deleteCollection,onRequestClose:_,title:"Delete the collection",content:"Are you sure to delete this collection?",okOnEnter:!0,okButton:{label:"Delete",onClick:function(){return ie(m.collectionId)}},cancelButton:{label:"Cancel",onClick:_}}))};var Nn,Dn,Fn,Mn,Gn,Un,zn,Bn,Wn,Yn,qn,Hn,Vn=r(520),Kn=r(5252),Xn=r(3896);function $n(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}A.Ay.div(Nn||(Nn=$n(["\n  padding: 10px 10px 5px 5px;\n"]))),A.Ay.div(Dn||(Dn=$n(["\n  display: flex;\n  align-items: center;\n  cursor: pointer;\n\n  & > div {\n    margin-right: 8px;\n  }\n"])));var Jn=A.Ay.div(Fn||(Fn=$n(["\n  box-sizing: border-box;\n  cursor: pointer;\n  width: 156px;\n  height: 104px;\n  margin-right: 8px;\n  margin-bottom: 8px;\n  position: relative;\n\n  .wplr-dashboard-edit-photo {\n    display: none;\n  }\n  .wplr-dashboard-featured-image {\n    display: none;\n\n    &.wplr-dashboard-is-featured {\n      cursor: default;\n      bottom: 3px;\n      left: 3px;\n      display: block;\n      position: absolute;\n    }\n  }\n\n  &:hover {\n    border: 3px solid var(--block-background);\n\n    .wplr-dashboard-edit-photo {\n      bottom: 3px;\n      display: block;\n      position: absolute;\n      right: 3px;\n    }\n\n    .wplr-dashboard-featured-image {\n      bottom: 3px;\n      display: block;\n      left: 3px;\n      position: absolute;\n    }\n  }\n\n  &.dragging {\n    border: 6px solid var(--neko-purple);\n    border-radius: 5px;\n  }\n"]))),Qn=A.Ay.img(Mn||(Mn=$n(["\n  object-fit: cover;\n  width: 100%;\n  height: 100%;\n"]))),Zn=A.Ay.div(Gn||(Gn=$n(["\n  background: var(--neko-main-color);\n  color: white;\n  box-sizing: border-box;\n  justify-content: space-between;\n  display: flex;\n  padding: 10px;\n  height: 50px;\n\n  h2 {\n    color: white;\n  }\n\n  &.dragging {\n    background: var(--neko-purple);\n  }\n\n  & > * {\n    margin-right: 4px;\n  }\n"]))),eo=A.Ay.div(Un||(Un=$n(["\n  align-self: center;\n  color: ",";\n"])),"white"),to=A.Ay.div(zn||(zn=$n(["\n  background-color: var(--neko-gray);\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n  min-height: 400px;\n  padding: 16px;\n"]))),ro=A.Ay.div(Bn||(Bn=$n(["\n  display: flex;\n  flex-wrap: wrap;\n"]))),no=A.Ay.div(Wn||(Wn=$n(["\n  padding: 10px;\n  background: white;\n  display: flex;\n"]))),oo=A.Ay.div(Yn||(Yn=$n(["\n  display: flex;\n"]))),ao=A.Ay.span(qn||(qn=$n(["\n  margin: 0px;\n  color: rgb(172 227 255);\n  background: #027faf;\n  padding: 3px 5px;\n  font-size: 11px;\n  border-radius: 5px;\n"]))),io=A.Ay.div(Hn||(Hn=$n(["\n  border-radius: 5px;\n  color: white\n  cursor: pointer;\n  font-family: Lato;\n  height: 156px;\n  margin-bottom: 12px;\n  margin-right: 12px;\n  padding: 0;\n  position: relative;\n  overflow: hidden;\n  width: 156px;\n\n  .wplr-dashboard-content-thumbnail {\n    align-items: center;\n    border-radius: 5px 5px 0 0;\n    background-color: var(--block-background);\n    background-position: center;\n    background-repeat: no-repeat;\n    background-size: cover;\n    display: flex;\n    justify-content: center;\n    height: 128px;\n    position: relative;\n    overflow: hidden;\n    width: 100%;\n\n    &.wplr-dashboard-content-no-featured-image {\n      &::before {\n        color: #00000030;\n        content: 'No featured image';\n        font-family: Lato;\n        text-transform: uppercase;\n        font-size: 11px;\n      }\n    }\n\n    img {\n      height: 100%;\n      object-fit: cover;\n      width: 100%;\n    }\n\n    .wplr-dashboard-featured-image {\n      display: none;\n\n      &.wplr-dashboard-is-featured {\n        cursor: default;\n        bottom: 3px;\n        left: 3px;\n        display: block;\n        position: absolute;\n      }\n    }\n\n    &:hover {\n      .wplr-dashboard-featured-image {\n        bottom: 3px;\n        display: block;\n        left: 3px;\n        position: absolute;\n      }\n    }\n  }\n\n  .wplr-dashboard-content-title-container {\n    align-items: center;\n    background-color: white;\n    border-radius: 0 0 5px 5px;\n    display: flex;\n    margin: 0;\n    overflow: hidden;\n    padding: 0 5px;\n\n    .wplr-dashboard-content-title {\n      color: black;\n      font-family: Lato;\n      font-style: normal;\n      font-weight: normal;\n      font-size: 11px;\n      line-height: 12px;\n      margin: 0 0 0 5px;\n      padding: 8px 0;\n    }\n  }\n"])));function lo(e){return lo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},lo(e)}function co(e){return function(e){if(Array.isArray(e))return vo(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||go(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function uo(){uo=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",l=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var a=t&&t.prototype instanceof g?t:g,i=Object.create(a.prototype),l=new P(n||[]);return o(i,"_invoke",{value:S(e,r,l)}),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var d="suspendedStart",p="suspendedYield",h="executing",m="completed",y={};function g(){}function v(){}function b(){}var w={};u(w,i,(function(){return this}));var E=Object.getPrototypeOf,R=E&&E(E(A([])));R&&R!==r&&n.call(R,i)&&(w=R);var x=b.prototype=g.prototype=Object.create(w);function _(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){function r(o,a,i,l){var c=f(e[o],e,a);if("throw"!==c.type){var u=c.arg,s=u.value;return s&&"object"==lo(s)&&n.call(s,"__await")?t.resolve(s.__await).then((function(e){r("next",e,i,l)}),(function(e){r("throw",e,i,l)})):t.resolve(s).then((function(e){u.value=e,i(u)}),(function(e){return r("throw",e,i,l)}))}l(c.arg)}var a;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}})}function S(t,r,n){var o=d;return function(a,i){if(o===h)throw Error("Generator is already running");if(o===m){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var l=n.delegate;if(l){var c=O(l,n);if(c){if(c===y)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===d)throw o=m,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=h;var u=f(t,r,n);if("normal"===u.type){if(o=n.done?m:p,u.arg===y)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=m,n.method="throw",n.arg=u.arg)}}}function O(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,O(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var a=f(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,y;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,y):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function I(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function L(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(I,this),this.reset(!0)}function A(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(lo(t)+" is not iterable")}return v.prototype=b,o(x,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:v,configurable:!0}),v.displayName=u(b,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,u(e,c,"GeneratorFunction")),e.prototype=Object.create(x),e},t.awrap=function(e){return{__await:e}},_(k.prototype),u(k.prototype,l,(function(){return this})),t.AsyncIterator=k,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new k(s(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},_(x),u(x,c,"Generator"),u(x,i,(function(){return this})),u(x,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=A,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(L),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return l.type="throw",l.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],l=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,y):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),L(r),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;L(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:A(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),y}},t}function so(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function fo(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?so(Object(r),!0).forEach((function(t){po(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):so(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function po(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=lo(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=lo(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==lo(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ho(e,t,r,n,o,a,i){try{var l=e[a](i),c=l.value}catch(e){return void r(e)}l.done?t(c):Promise.resolve(c).then(n,o)}function mo(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){ho(a,n,o,i,l,"next",e)}function l(e){ho(a,n,o,i,l,"throw",e)}i(void 0)}))}}function yo(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,l=[],c=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return l}}(e,t)||go(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function go(e,t){if(e){if("string"==typeof e)return vo(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?vo(e,t):void 0}}function vo(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var bo=wp.element,wo=bo.useState,Eo=bo.useMemo,Ro=bo.useCallback,xo=[{accessor:"thumbnail_url",title:"Thumb",style:{width:16}},{accessor:"type",title:"Origin",sortable:!0},{accessor:"path",title:"Title & Path"}],_o={marginTop:"6px",marginLeft:"2px"};const ko=function(e){var t=e.folderContent,r=nn(),n=r.allMedias,o=r.unassignedEntries,a=r.lrFoldersAndGalleries,i=r.wpFoldersAndGalleries,l=r.totalUnassignedEntries,c=r.totalAllMedias,u=r.limit,s=r.page,f=r.sort,d=r.busy,h=r.showUnassignedEntries,m=r.selected,y=r.dragging,g=r.pressShift,v=r.modals,b=r.modalData,w=r.galleryContent,R=r.total,x=r.setTotal,_=nn(),k=_.setSelected,S=_.toggleModal,O=_.resetModal,I=_.setShowAllMedias,L=_.setShowUnassignedEntries,P=_.setLimit,A=_.setPage,j=_.setSort,T=_.setDragging,C=_.setPressShift,N=_.setPressCtrl,D=_.pressCtrl,F=_.deleteCollection,M=_.deleteFolder,G=_.updatePhoto,U=_.removePhoto,z=_.updateFeaturedImage,B=yo(wo(null),2),W=B[0],Y=B[1],q=yo(wo({title:null,description:null,caption:null,alt:null}),2),H=q[0],V=q[1],K=yo(wo(Le),2),X=K[0],$=K[1],J=b.source===xe,Q=y.itemType===_e,Z=y.itemType===Se,ee=function(e,t,r){r.stopPropagation(),j({accessor:e,by:t})};(0,Xt.useEffect)((function(){w&&Y(null)}),[w]),(0,Xt.useEffect)((function(){V({title:null==W?void 0:W.title,description:null==W?void 0:W.description,caption:null==W?void 0:W.caption,alt:null==W?void 0:W.alt})}),[W]);var te=Ro(function(){var e=mo(uo().mark((function e(t){return uo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,G(t,H);case 2:e.sent&&(V({title:null,description:null,caption:null,alt:null}),Y(fo(fo({},W),H)));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[W,H,G]),re=function(e,t,r,n,o,a){if(e.stopPropagation(),n){Y(null);var i=o.some((function(e){return e.ID===t.ID}))?o.filter((function(e){return e.ID!==t.ID})):[].concat(co(o),[t]);T(fo(fo({},y),{},{items:i,itemType:_e,itemParent:m.galleryId}))}else if(r){if(Y(null),!o.length)return void T(fo(fo({},y),{},{items:[t],itemType:_e,itemParent:m.galleryId}));var l=o[0];if(l.ID===t.ID)return void T(fo(fo({},y),{},{items:[t],itemType:_e,itemParent:m.galleryId}));for(var c=a.findIndex((function(e){return e.ID===l.ID})),u=a.findIndex((function(e){return e.ID===t.ID})),s=u>c,f=s?u:c,d=[],p=(s?c:u)+1;p<f;p++)d.push(a[p]);var h=s?[l].concat(d,[t]):[t].concat(d,[l]);T(fo(fo({},y),{},{items:h,itemType:_e,itemParent:m.galleryId}))}else Y(t),T(fo(fo({},y),{},{items:[],itemType:null}))},ne=function(e,t,r,n){e.stopPropagation(),Y(null);var o=r.filter((function(e){return t.includes(e.ID)}));T(fo(fo({},y),{},{items:[].concat(co(n),co(o)),itemType:_e,itemParent:m.galleryId}))},oe=function(e,t,r){e.stopPropagation(),Y(null);var n=r.filter((function(e){return!t.includes(e.ID)}));T(fo(fo({},y),{},{items:n,itemType:_e,itemParent:m.galleryId}))},ae=function(t,r){t.stopPropagation(),Y(r),S("editPhoto"),e.onEditPhotoClick&&e.onEditPhotoClick(t,r)},ie=function(){var e=mo(uo().mark((function e(t,r){return uo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,U(t,r);case 2:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),le=function(){var e=mo(uo().mark((function e(t,r,n){return uo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.stopPropagation(),e.next=3,z(r,n);case 3:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}(),ce=function(e,t,r){T({action:Ue(r),itemType:_e,itemParent:m.galleryId,items:t})},ue=Ro((function(){Q&&k(fo(fo({},m),{},{galleryId:y.itemParent})),T({action:null,itemType:null,itemParent:null,items:[]}),C(!1),N(!1)}),[y.itemType,y.itemParent]),se=function(){var e=mo(uo().mark((function e(t){return uo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M(t,b.source);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),fe=function(){var e=mo(uo().mark((function e(t){return uo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F(t,b.source);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),de=function(e){return e.map((function(e){return{id:e.ID,thumbnail_url:React.createElement("img",{src:e.thumbnail_url,style:{width:40,height:40,objectFit:"cover"}}),type:React.createElement("a",{onClick:function(t){return ae(t,e)},style:{cursor:"pointer"}},"ID ",e.ID),path:React.createElement(React.Fragment,null,React.createElement(p.s,{p:!0,style:{margin:0}},e.title),React.createElement(p.s,{p:!0,style:{margin:0}},e.path))}}))},pe=Eo((function(){if(!w&&!n.length)return React.createElement(p.s,{p:!0,style:{marginTop:0}},"Welcome to Photo Engine! Please select a folder or a collection in the sidebar.");var e=!y.items.length&&W?[W]:[],r=Q?y.items.map((function(e){return e.ID})):[],u=W?W.ID:null,s=co(W?new Set([].concat(co(y.items),[W])):y.items);if(w){var v=Ge([].concat(co(a),co(i)),m.galleryId);I(!1),L(!1);var b=!J;return X===Pe?React.createElement(tt.o,{busy:d,data:de(w),columns:xo,sort:f,onSortChange:ee,onSelect:function(e,t){return ne(t,e,w,s)},onUnselect:function(e,t){return oe(t,e,s)},selectedItems:s.map((function(e){return e.ID}))}):React.createElement(ro,null,w.map((function(t){var n=v.featured_image_id===t.ID,o=r.includes(t.ID)||!r.length&&u===t.ID;return React.createElement(Jn,{key:"wplr-image-".concat(t.ID),className:o?"dragging":""},React.createElement(Qn,{draggable:b,onDragStart:function(e){return ce(0,co(new Set([].concat(co(y.items),[t]))),g)},onDragEnd:ue,onDoubleClick:function(e){return ae(e,t)},onClick:function(r){return re(r,t,g,D,[].concat(e,co(y.items)),w)},src:t.thumbnail_url}),React.createElement("div",{className:"wplr-dashboard-edit-photo",onClick:function(e){return ae(e,t)}},React.createElement(sn.z,{icon:"pencil",color:"white",width:"20",height:"20"})),n?React.createElement("div",{className:"wplr-dashboard-featured-image wplr-dashboard-is-featured"},React.createElement(sn.z,{icon:"star",color:"var(--neko-yellow)",width:"20",height:"20",hoverColor:"var(--neko-yellow)"})):React.createElement("div",{className:"wplr-dashboard-featured-image",onClick:function(e){return le(e,v.id,t.ID)}},React.createElement(sn.z,{icon:"star",color:"white",width:"20",height:"20"})))})))}if(t){var E=Ge([].concat(co(a),co(i)),m.folderId);return I(!1),L(!1),React.createElement(ro,null,t.children.map((function(e){var t=E.featured_image_id===e.featured_image_id,r=e.featured_image,n=r?"wplr-dashboard-content-thumbnail":"wplr-dashboard-content-thumbnail wplr-dashboard-content-no-featured-image",o=e.is_folder?function(){return function(e,t){var r=m.expandedFolderIds?co(m.expandedFolderIds):[];e.id===m.folderId&&(r=m.expandedFolderIds.includes(e.id)?m.expandedFolderIds.filter((function(t){return t!==e.id})):[].concat(co(m.expandedFolderIds),[e.id])),k(fo(fo({},m),{},{folderId:e.id,source:e.source,parentId:t,expandedFolderIds:r}));var n=er(),o=n.length?n[n.length-1]:null;e.id!==o&&tr(o===t?[].concat(co(n),[e.id]):[e.id])}(e)}:function(){return t=e,T({action:null,itemType:null,itemParent:null,items:[]}),C(!1),N(!1),k(fo(fo({},m),{},{folderId:null,galleryId:t.id,source:t.source})),void A(1);var t},a=e.is_folder?"folder":"image-multiple-outline";return React.createElement(io,{key:e.id,onClick:o},React.createElement("div",{className:n},r?React.createElement("img",{src:r}):null,r?t?React.createElement("div",{className:"wplr-dashboard-featured-image wplr-dashboard-is-featured"},React.createElement(sn.z,{icon:"star",color:"var(--neko-yellow)",width:"20",height:"20",hoverColor:"var(--neko-yellow)"})):React.createElement("div",{className:"wplr-dashboard-featured-image",onClick:function(t){return le(t,E.id,e.featured_image_id)}},React.createElement(sn.z,{icon:"star",color:"white",width:"20",height:"20"})):null),React.createElement("div",{className:"wplr-dashboard-content-title-container"},React.createElement(sn.z,{icon:a,width:20,height:20,color:"var(--neko-blue)"}),React.createElement("p",{className:"wplr-dashboard-content-title"},e.name)))})))}return h?(I(!1),x(l),X===Pe?React.createElement(tt.o,{busy:d,data:de(o),columns:xo,sort:f,onSortChange:ee,onSelect:function(e,t){return ne(t,e,o,s)},onUnselect:function(e,t){return oe(t,e,s)},selectedItems:s.map((function(e){return e.ID}))}):React.createElement(ro,null,o.map((function(t){return React.createElement(Jn,{className:r.includes(t.ID)||!r.length&&u===t.ID?"dragging":""},React.createElement(Qn,{draggable:!0,onDragStart:function(e){return ce(0,co(new Set([].concat(co(y.items),[t]))),!0)},onDragEnd:ue,onClick:function(r){return re(r,t,g,D,[].concat(e,co(y.items)),o)},src:t.thumbnail_url}),React.createElement("div",{className:"wplr-dashboard-edit-photo",onClick:function(e){return ae(e,t)}},React.createElement(sn.z,{icon:"pencil",color:"white"})))})))):(I(!0),x(c),X===Pe?React.createElement(tt.o,{busy:d,data:de(n),columns:xo,sort:f,onSortChange:ee,onSelect:function(e,t){return ne(t,e,n,s)},onUnselect:function(e,t){return oe(t,e,s)},selectedItems:s.map((function(e){return e.ID}))}):React.createElement(ro,null,n.map((function(t){return React.createElement(Jn,{className:r.includes(t.ID)||!r.length&&u===t.ID?"dragging":""},React.createElement(Qn,{draggable:!0,onDragStart:function(e){return ce(0,co(new Set([].concat(co(y.items),[t]))),!0)},onDragEnd:ue,onClick:function(r){return re(r,t,g,D,[].concat(e,co(y.items)),n)},src:t.thumbnail_url}),React.createElement("div",{className:"wplr-dashboard-edit-photo",onClick:function(e){return ae(e,t)}},React.createElement(sn.z,{icon:"pencil",color:"white"})))}))))}),[w,t,n,o,h,i,a,g,D,W,y.items,X,d]),he=Eo((function(){var e="";if(W||y.items.length){var r="";if(y.action===Ie?r="Moving":y.action===Oe&&(r="Copying"),r){var n=y.itemType;y.items.length>1&&(n=Z?"galleries":n+"s");var o=Ge(i,Q?m.galleryId:m.folderId),l=o&&o.id!==y.itemParent&&!y.items.some((function(e){return e.id===o.id}))?" to ".concat(o.name):" to ...";e=React.createElement(p.s,null,"".concat(r," ").concat(y.items.length," ").concat(n).concat(l))}else y.items.length>0?e=React.createElement(p.s,null,"".concat(y.items.length," photos selected")):W&&(e=React.createElement(p.s,null,W.title||"(No Title)"))}var c=y.action?"dragging":"";if(w){var u=Ge([].concat(co(a),co(i)),m.galleryId);if(W)return React.createElement(Zn,{className:c},React.createElement(oo,null,!y.action&&React.createElement(oo,{style:{marginRight:"6px"}},React.createElement(sn.z,{icon:"view-grid",onClick:function(){return $(Le)},width:"20",height:"20",color:"white"}),React.createElement(sn.z,{icon:"format-list-bulleted",onClick:function(){return $(Pe)},width:"20",height:"20",color:"white"})),React.createElement(eo,null,!y.action&&React.createElement(p.s,{h2:!0,style:{margin:0,color:"white"}},u.name),e)),React.createElement(E.M,{className:"danger",onClick:function(){return S("removePhoto",!0,{photoIds:[W.ID],collectionId:m.galleryId})},disabled:d},"Remove Photo"));var s=null!==w&&!y.items.length,f=!y.items.length&&!y.action;return React.createElement(Zn,{className:c},React.createElement(oo,null,!y.action&&React.createElement(oo,{style:{marginRight:"6px"}},React.createElement(sn.z,{icon:"view-grid",onClick:function(){return $(Le)},width:"20",height:"20",color:"white"}),React.createElement(sn.z,{icon:"format-list-bulleted",onClick:function(){return $(Pe)},width:"20",height:"20",color:"white"})),React.createElement(eo,null,!y.action&&React.createElement(p.s,{h2:!0,style:{margin:0,color:"white"}},u.name),e,f&&React.createElement(React.Fragment,null,React.createElement(ao,null,'[gallery wplr-collection="'.concat(m.galleryId,'"]')),m.folderId&&React.createElement(ao,{style:{marginLeft:5}},'[meow-collection wplr-folder="'.concat(m.folderId,'"]'))))),s&&React.createElement(E.M,{className:"danger",onClick:function(){return S("deleteCollection",!0,{collectionId:m.galleryId,source:m.source})},disabled:d},"Delete Collection"),!!y.items.length&&React.createElement(E.M,{className:"danger",onClick:function(){return S("removePhotos",!0,{photoIds:y.items.map((function(e){return e.ID})),collectionId:y.itemParent})},disabled:d},"Remove Photos"))}return y.action?React.createElement(Zn,{className:c},React.createElement(oo,null,React.createElement(eo,null,e))):t?React.createElement(Zn,{className:c},React.createElement(oo,null,React.createElement(eo,null,React.createElement(p.s,{h2:!0,style:{margin:0,color:"white"}},t.name),React.createElement(ao,null,'[gallery wplr-folder="'.concat(m.folderId,'"]')))),React.createElement(E.M,{className:"danger",onClick:function(){return S("deleteFolder",!0,{folderId:m.folderId,source:m.source})},disabled:d},"Delete Folder")):React.createElement(Zn,{className:c},React.createElement(oo,null,React.createElement(oo,{style:{marginRight:"6px"}},React.createElement(sn.z,{icon:"view-grid",onClick:function(){return $(Le)},width:"20",height:"20",color:"white"}),React.createElement(sn.z,{icon:"format-list-bulleted",onClick:function(){return $(Pe)},width:"20",height:"20",color:"white"})),React.createElement(eo,null,React.createElement(p.s,{h2:!0,style:{margin:0,color:"white"}},h?"Unassigned Entries":"All Media Entries"),e)))}),[w,t,n,W,h,a,i,y.items,y.action,d,m.galleryId,m.folderId]);return React.createElement(React.Fragment,null,he,React.createElement(rt.A,{busy:d},React.createElement(to,{onClick:function(){Y(null),T({action:null,itemType:null,itemParent:null,items:[]}),C(!1),N(!1)},style:{padding:X===Pe?"2px 0 0 2px":16}},pe),React.createElement(no,null,React.createElement(ge.u,{name:"wplr_sync-limit",scrolldown:!0,value:u,onChange:function(e){P(e),A(1)},style:{marginRight:"10px"}},Ae.map((function(e){return React.createElement(ge.j,{value:e,label:"".concat(e," items per page")})}))),React.createElement(Vn.Q,{currentPage:s,limit:u,total:R,onClick:function(e){return A(e)}}))),React.createElement(dn.n,{isOpen:v.deleteCollection,onRequestClose:O,title:"Delete the collection",content:"Are you sure to delete this collection?",okOnEnter:!0,okButton:{label:"Delete",onClick:function(){return fe(m.galleryId)}},cancelButton:{label:"Cancel",onClick:O}}),React.createElement(dn.n,{isOpen:v.deleteFolder,onRequestClose:O,title:"Delete the folder",content:"Are you sure to delete this folder?",okOnEnter:!0,okButton:{label:"Delete",onClick:function(){return se(b.folderId)}},cancelButton:{label:"Cancel",onClick:O}}),React.createElement(dn.n,{isOpen:v.removePhoto,onRequestClose:O,title:"Remove this photo",content:"Are you sure to remove this photo?",okOnEnter:!0,okButton:{label:"Remove",onClick:function(){return ie(b.photoIds,b.collectionId,"removePhoto")}},cancelButton:{label:"Cancel",onClick:O}}),React.createElement(dn.n,{isOpen:v.removePhotos,onRequestClose:O,title:"Remove the selected photos",content:"Are you sure to remove these selected photos?",okOnEnter:!0,okButton:{label:"Remove",onClick:function(){return ie(b.photoIds,b.collectionId,"removePhotos")}},cancelButton:{label:"Cancel",onClick:O}}),React.createElement(dn.n,{isOpen:v.editPhoto,onRequestClose:O,title:"Edit the photo",thumbnail:null!=W&&W.thumbnail_url?React.createElement("img",{src:W.thumbnail_url}):null,content:React.createElement(Kn.s,null,React.createElement(p.s,{label:!0,style:_o},"Title"),React.createElement(nt.A,{autoFocus:!0,name:"wplr_edit_photo_title",placeholder:"title",value:null==W?void 0:W.title,onInput:function(e){return V(fo(fo({},H),{},{title:e.target.value}))}}),React.createElement(p.s,{label:!0,style:_o},"Description"),React.createElement(Xn.m,{name:"wplr_edit_photo_description",placeholder:"description",value:null==W?void 0:W.description,onInput:function(e){return V(fo(fo({},H),{},{description:e.target.value}))},textAreaStyle:{height:"72px"}}),React.createElement(p.s,{label:!0,style:_o},"Caption"),React.createElement(Xn.m,{name:"wplr_edit_photo_caption",placeholder:"caption",value:null==W?void 0:W.caption,onInput:function(e){return V(fo(fo({},H),{},{caption:e.target.value}))},textAreaStyle:{height:"72px"}}),React.createElement(p.s,{label:!0,style:_o},"Alt"),React.createElement(nt.A,{name:"wplr_edit_photo_alt",placeholder:"alt",value:null==W?void 0:W.alt,onInput:function(e){return V(fo(fo({},H),{},{alt:e.target.value}))}})),okOnEnter:!0,okButton:{label:"Update",onClick:function(){return te(null==W?void 0:W.ID)}},cancelButton:{label:"Cancel",onClick:O}}))};function So(e){return So="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},So(e)}function Oo(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Io(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Oo(Object(r),!0).forEach((function(t){Lo(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Oo(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Lo(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=So(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=So(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==So(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}wp.element.useCallback;const Po=function(){var e,t=nn(),r=t.wpFoldersAndGalleries,n=t.lrFoldersAndGalleries,o=t.apiError,a=t.selected,i=t.folderContent,l=nn(),c=l.setGalleryContent,u=l.setPage,f=l.setShowUnassignedEntries,d=l.setSelected,p=l.setPressShift,h=l.setPressCtrl,m=l.setFolderContent,y=(0,ot.v_)(),w=y.pressShift,R=y.pressControl;return(0,Xt.useEffect)((function(){p(w),h(R)}),[w,R]),(0,Xt.useEffect)((function(){var e;if(a.folderId&&r.length&&n.length){var t=a.source===Re?r:n,o=Ge(t,a.folderId),i=null!==(e=o.children)&&void 0!==e?e:[];d(Io(Io({},a),{},{galleryId:null})),m(Io(Io({},o),{},{children:i})),c(null),rr(null)}}),[a.folderId,r,n]),React.createElement(s.A,null,React.createElement(g.z,{nekoErrors:[o]},React.createElement(v.n,{title:"Photo Engine | Media Organizer",subtitle:"By Jordy Meow"},React.createElement("div",{style:{display:"flex",justifyContent:"flex-end"}},React.createElement(E.M,{icon:"cog",className:"header",onClick:function(){return location.href="admin.php?page=wplr_sync_settings"}},"Settings"))),React.createElement(b.N,null,React.createElement(b.Y,{style:{maxWidth:"20%",minWidth:280,padding:0,margin:"20px 0 0 20px",background:"#d0d0d0"}},React.createElement(Cn,{activeTabIndex:(e=Number(localStorage.getItem($t)),isNaN(e)?null:e),onAllMediaEntriesClick:function(){u(1),rr(null),f(!1),m(null),c(null)},onTabChange:function(e){var t;null===(t=e)?localStorage.removeItem($t):localStorage.setItem($t,t)},isPurePhotoEngine:!0})),React.createElement(b.Y,{style:{padding:0,margin:"20px 20px 0 0"}},React.createElement(ko,{folderContent:i,isPurePhotoEngine:!0})))))};function Ao(e){return Ao="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ao(e)}function jo(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function To(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Co(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?To(Object(r),!0).forEach((function(t){No(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):To(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function No(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=Ao(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=Ao(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Ao(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Do=wp.element.render,Fo=new c.E({defaultOptions:{queries:{refetchOnWindowFocus:!1,refetchOnMount:!1,retry:!1,placeholderData:function(e){return e}}}}),Mo=null,Go=[],Uo=function(e){var t,r,n=e.style,o=void 0===n?{width:"100%",height:"100%",overflow:"auto"}:n,a=e.colIdSelector;if(!a)return React.createElement("span",null,"Could not hook to ID Selector.");var i=parseInt(a.value)||-1,l=null,c=[],u=!0,s=null;if(i>-1){l=Go.find((function(e){return e.wp_col_id===i})),u=!1,s=No(No({},Re,0),xe,1)[l.source];for(var f=l.level,d=Co({},l);f;){var p=Go.filter((function(e){return e.level===d.level-1})).find((function(e){return e.wp_col_id===d.wp_folder_id}));f=(d=Co({},p)).level,c.push(String(p.wp_col_id))}}var h={parentId:null,folderId:null,galleryId:String(null===(t=l)||void 0===t?void 0:t.wp_col_id)||null,source:(null===(r=l)||void 0===r?void 0:r.source)||null,expandedFolderIds:c},m=(0,Xt.useCallback)((function(e){var t,r=e.id;a?(a.value=r||"all",a.dispatchEvent(new Event("change")),Mo&&(null===(t=document.querySelector("#post-query-submit"))||void 0===t||t.click())):console.log("[Photo Engine | onSelectFilter] Cannot find filter selector.")}),[a]);return React.createElement("div",{style:o},React.createElement(Cn,{onCollectionClick:m,onAllMediaEntriesClick:function(){return onSelectFilter(-1)},isPurePhotoEngine:!1,activeTabIndex:s,selected:h,showAllMedias:u}))},zo=function(e,t){var r=document.getElementsByClassName("supports-drag-drop"),n=document.getElementsByClassName("media-modal"),o=document.getElementsByClassName("media-frame-content"),a=document.getElementsByClassName("hide-router").length;if(r.length){if(Mo&&o.length)return t.disconnect(),void Wo(o[0]);if(!Mo&&!a){var i,l=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return jo(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?jo(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,l=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){l=!0,a=e},f:function(){try{i||null==r.return||r.return()}finally{if(l)throw a}}}}(n);try{for(l.s();!(i=l.n()).done;){var c=i.value;if(!c.parentElement.classList.contains("supports-drag-drop"))return;Bo(c)}}catch(e){l.e(e)}finally{l.f()}}}},Bo=function(e){if(pEngine.media_modals){var t=e.closest(".supports-drag-drop");if("none"!==window.getComputedStyle(t).display){var r=t.querySelector(".media-frame");r.classList.remove("hide-menu");var n=r.querySelector(".media-menu");if(!n.classList.contains("wplr-hooked")){n.classList.add("wplr-hooked"),n.style.display="flex",n.style.flexDirection="column";var o=document.createElement("div");o.classList.add("wplr-dyn-ui-elem"),o.style.overflow="overlay",n.appendChild(o);var a=e.querySelector(".wplr_col_id_selector");return Do(React.createElement(rn,null,React.createElement(Uo,{colIdSelector:a})),o),o}}}},Wo=function(e){if(pEngine.media_library){Yo();var t=document.createElement("div");t.style.display="flex",t.style.width="100%";var r=document.createElement("div");r.style.width="260px",r.style.marginRight="10px";var n=document.querySelector(".wp-list-table.media"),o=document.querySelector(".tablenav.bottom"),a=n.parentElement;t.appendChild(r),t.appendChild(n),a.insertBefore(t,o);var i=e.querySelector("#wplr_col_id_selector");return console.log("[addBrowserToUI]",{mediaLibraryListModeElement:e,colIdSelector:i}),Do(React.createElement(rn,null,React.createElement(Uo,{colIdSelector:i})),r),r}};function Yo(){if(wp.media&&wp.media.view){var e=wp.media.view.AttachmentFilters.extend({id:"wplr_col_id_selector",className:"attachment-filters wplr_col_id_selector",style:"display: none;",createFilters:function(){var e={all:{text:"All Media",props:{col_id:-1},priority:10}};_.each(Go||{},(function(t,r){e[t.wp_col_id]={text:t.name,props:{col_id:t.wp_col_id}}})),this.filters=e}}),t=wp.media.view.AttachmentsBrowser;wp.media.view.AttachmentsBrowser=wp.media.view.AttachmentsBrowser.extend({createToolbar:function(){var r;t.prototype.createToolbar.call(this),(null===(r=this.toolbar)||void 0===r?void 0:r.secondary)&&(window.what=this),this.toolbar.set("MediaLibraryTaxonomyFilter",new e({controller:this.controller,model:this.collection.props,priority:-75}).render())}})}}document.addEventListener("DOMContentLoaded",(function(e){var t=document.getElementsByClassName("wp-core-ui")[0],r=document.getElementById("posts-filter");Mo=document.getElementsByClassName("upload-php")[0],Go=pEngine.hierarchy.map((function(e){return{name:e.name,level:parseInt(e.level),is_folder:"1"===e.is_folder,wp_col_id:parseInt(e.wp_col_id),wp_folder_id:e.wp_folder_id?parseInt(e.wp_folder_id):null,source:e.source}}));var n,o,a=document.getElementById("meow-common-dashboard");(a&&Do(React.createElement(u.Ht,{client:Fo},React.createElement(s.A,null,React.createElement(de,null))),a),(o=document.getElementById("wplr-sync-admin-settings"))&&(Do(React.createElement(Kt,null),o),1)||(n=document.getElementById("wplr-sync-dashboard"),n&&(Do(React.createElement(rn,null,React.createElement(s.A,null,React.createElement(Po,null))),n),1)))||(Mo&&Array.from(document.getElementsByClassName("wplr-sync-field")).forEach((function(e){var t=e.getAttribute("data-wp-id"),r=e.getAttribute("data-lastsync"),n=e.getAttribute("data-lr-id"),o=e.getAttribute("data-is-server-side");Do(React.createElement(ht,{show:null,wpId:t,lrId:n,lastSync:r,showInMedia:!0,isServerSide:o}),e)})),Mo&&r?(Yo(),Wo(r),r.style.display="block"):(Yo(),new MutationObserver(zo).observe(t,{childList:!0,subtree:!0})))}))},1594:e=>{e.exports=React},5206:e=>{e.exports=ReactDOM}},r={};function n(e){var o=r[e];if(void 0!==o)return o.exports;var a=r[e]={exports:{}};return t[e](a,a.exports,n),a.exports}n.m=t,n.amdO={},e=[],n.O=(t,r,o,a)=>{if(!r){var i=1/0;for(s=0;s<e.length;s++){for(var[r,o,a]=e[s],l=!0,c=0;c<r.length;c++)(!1&a||i>=a)&&Object.keys(n.O).every((e=>n.O[e](r[c])))?r.splice(c--,1):(l=!1,a<i&&(i=a));if(l){e.splice(s--,1);var u=o();void 0!==u&&(t=u)}}return t}a=a||0;for(var s=e.length;s>0&&e[s-1][2]>a;s--)e[s]=e[s-1];e[s]=[r,o,a]},n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e={57:0};n.O.j=t=>0===e[t];var t=(t,r)=>{var o,a,[i,l,c]=r,u=0;if(i.some((t=>0!==e[t]))){for(o in l)n.o(l,o)&&(n.m[o]=l[o]);if(c)var s=c(n)}for(t&&t(r);u<i.length;u++)a=i[u],n.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return n.O(s)},r=self.wpJsonWplr=self.wpJsonWplr||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})(),n.nc=void 0;var o=n.O(void 0,[121],(()=>n(8233)));o=n.O(o)})();
//# sourceMappingURL=index.js.map